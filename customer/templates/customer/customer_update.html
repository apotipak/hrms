{% extends "page_generic.html" %}

{% load i18n %}
{% load static %}
{% load widget_tweaks %}

{% block title %}{{ page_title}} - {% trans 'Customer Update' %} {% endblock %}

{% block content %}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  

  <!-- Content Header (Page header) -->
  <div class="content-header">
  
    <div class="">
      <div class="row mb-2">
        <div class="col-8">
          {% comment %}
           <h4 class="display-6 m-0 text-dark">{{customer.cus_name_th}} <span> - {{customer.cus_id|stringformat:"04d"}}{{customer.cus_brn|stringformat:"03d"}}</span></h4>
          {% endcomment %}

          {% if customer.cus_name_th != '' %}
          <h4 class="display-6 m-0 text-dark">{{cus_no}} <span> - {{ customer.cus_name_th }}</span></h4>
          {% else %}
          <h4 class="display-6 m-0 text-dark">No Site Name <span> - {{ cus_no }}</span></h4>
          {% endif %}

        </div>
        <div class="col-4">
          {% comment %}
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item active">
            {% render_field form.cus_active id="id_cus_active" class="form-control" type="checkbox" data-toggle="toggle" data-on="ACTIVE" data-off="Pending" data-onstyle="success" data-offstyle="danger"%}
            </li>
          </ol>
          {% endcomment %}
        </div>
      </div>
    </div>
  </div>

  <!-- Main content -->  
  <section class="content">

    <!-- Default box -->
    <div class="card">

      <!--
      <div class="col-sm-8 offset-sm-2 col-md-8 offset-md-2 pt pl-4 pr-4">        

      </div>

      <div class="card-header" style="vertical-align: middle;">
        <div class="card-tools">          
          <a href="#" id="mainOfficeSaveButton" type="button" class="btn btn-primary btn-md"><i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>
        </div>
      </div>
      -->

      <div class="card-body">

        <div class="clearfix">
          <div class="float-left">
            <ul class="nav nav-tabs navbar-expand nav-fill" id="customer" role="tablist">

              <li class="nav-item active">
                <a class="nav-link active" id="mainoffice-tab" data-toggle="tab" href="#mainoffice" role="tab" aria-controls="mainoffice">{% trans 'Main Office' %}</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" id="site-tab" data-toggle="tab" href="#site" role="tab" aria-controls="site">{% trans 'Site' %}</a>
              </li>

              <li class="nav-item">
                <a class="nav-link" id="billing-tab" data-toggle="tab" href="#billing" role="tab" aria-controls="billing">{% trans 'Billing' %}</a>
              </li>

            </ul>        
          </div>
        </div>



        <div class="tab-content" id="customerContent">

            <div class="tab-pane fade show active" id="mainoffice" role="tabpanel" aria-labelledby="mainoffice-tab">
            <!--<div class="tab-pane" id="mainoffice" role="tabpanel" aria-labelledby="mainoffice-tab">-->
            {% comment %}
            <div id="result"></div>

            <div class="pt-2" id="show-error">
            {% if cus_main_form.errors %}
                {% for field in cus_main_form %}                
                    {% for error in field.errors %}
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation"></i>&nbsp;&nbsp;{{ error }}
                        </div>
                    {% endfor %}
                {% endfor %}
            {% else %}

              {% if cus_main_form_is_valid %}
                <div class="alert alert-success">
                    <i class="fas fa-save"></i>&nbsp;&nbsp;Saved complete. Back to <a href="{% url 'customer-list' %}">Customer List</a>
                </div>
              {% endif %}
            {% endif %}
            </div>
            {% endcomment %}


            <form id="cus_main_form" method="POST">
            {% csrf_token %}

            <div class="clearfix">
              <div class="float-left">&nbsp;</div>
              <div class="float-right">

                <div class="mailbox-controls">
                  <div class="btn-group">
                    <button id="btnCopyToSite" type="button" class="btn btn-outline-primary btn-sm"><i class="far fa-copy"></i>&nbsp;&nbsp;Copy to Site</button>
                    &nbsp;&nbsp;
                    <button id="btnCopyToBill" type="button" class="btn btn-outline-primary btn-sm"><i class="far fa-copy"></i>&nbsp;&nbsp;Copy to Bill</button>
                  </div>

                  <div class="float-right">
                    &nbsp;&nbsp;&nbsp;
                    <div class="btn-group">
                      <label class="switch">                                 
                        {% if cus_main.cus_active|default_if_none:0 %}
                        <input type="checkbox" id="id_cus_main_cus_active" name="cus_main_cus_active" value=1 checked>
                        {% else %}
                        <input type="checkbox" id="id_cus_main_cus_active" name="cus_main_cus_active" value=0>
                        {% endif %} 
                        <div class="slider"></div>
                      </label>  
                    </div>
                  </div>

                </div>

              </div>
            </div>


            <!-- Main Office Tab -->            
            <div class="row pt-3">
              
              <div class="col-md-6">

                <div class="card card-info">
                  <div class="card-header">
                    <h3 class="card-title">TH</h3>
                  </div>
                  <div class="card-body">

                    <div class="form-group">  

                      <div class="input-group">
                        <label for="id_cus_main_cus_name_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Customer Name' %}</label>
                        <div class="col-sm-8">                          
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_name_th" name="cus_main_cus_name_th" value="{{ cus_main.cus_name_th }}">
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_add1_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Address' %}</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add1_th" name="cus_main_cus_add1_th" value="{{ cus_main.cus_add1_th|default_if_none:''}}">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add2_th" name="cus_main_cus_add2_th" value="{{ cus_main.cus_add2_th|default_if_none:''}}">
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_subdist_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Sub-District' %}</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_subdist_th" name="cus_main_cus_subdist_th" value="{{ cus_main.cus_subdist_th|default_if_none:'' }}">
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_disrict" class="col-sm-4 col-form-label form-control-sm">{% trans 'District' %}</label>

                        <div class="col-sm-8">                            
                          <div class="row">                              
                            <div class="col-12 input-group">
                              <input type="text" id="id_cus_main_cus_district_dist_th" name="cus_main_cus_district_dist_th" class="form-control form-control-sm" value="{{ cus_main.cus_district|default_if_none:'' }}" readonly>
                              
                              <button id="cus_main_district_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_district_list' %}"><i class="fas fa-search fa-sm"></i></button>

                              <input type="hidden" id="id_cus_main_select_district_id" name="cus_main_select_district_id" value="{{ cus_main.cus_district_id|default_if_none:'' }}">

                            </div>
                          </div>
                        </div>

                      </div>


                      <div class="input-group">
                        <label for="id_cus_main_cus_city_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'City' %}</label>
                        <div class="col-sm-8">                          
                          {% render_field cus_main_form.cus_main_cus_city_th class="form-control form-control-sm" %}
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_country" class="col-sm-4 col-form-label form-control-sm">{% trans 'Country' %}</label>
                        <div class="col-sm-8">
                          {% render_field cus_main_form.cus_main_cus_country_th class="form-control form-control-sm" %}
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>

              <!-- Main Office Tab English -->
              <div class="col-md-6">
                <div class="card card-info">
                  <div class="card-header">
                    <h3 class="card-title">EN</h3>
                  </div>
                  <div class="card-body">
                    <div class="form-group">
                      
                      <div class="input-group">
                        <label for="id_cus_main_cus_name_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Customer Name' %}</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_name_en" name="cus_main_cus_name_en" value="{{ cus_main.cus_name_en }}">
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_add1_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Address' %}</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add1_en" name="cus_main_cus_add1_en" value="{{ cus_main.cus_add1_en|default_if_none:''}}">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add2_en" name="cus_main_cus_add2_en" value="{{ cus_main.cus_add2_en|default_if_none:''}}">
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_subdist_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Sub-District' %}</label>
                        <div class="col-sm-8">
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_subdist_en" name="cus_main_cus_subdist_en" value="{{ cus_main.cus_subdist_en|default_if_none:'' }}">
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_disrict_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'District' %}</label>
                        <div class="col-sm-8">
                          {% if cus_main_form.cus_district.errors %}                
                            {% render_field cus_main_form.cus_main_cus_district_en class="form-control form-control-sm" %}
                            {% for error in cus_main_form.cus_main_cus_district.errors %}
                            <div class="invalid-feedback">
                              {{error}}
                            </div>
                            {% endfor %}
                          {% else %}                          

                          {% render_field cus_main_form.cus_main_cus_district_en class="form-control form-control-sm" %}

                          {% endif %}
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_city_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'City' %}</label>
                        <div class="col-sm-8">                                                    
                          {% render_field cus_main_form.cus_main_cus_city_en class="form-control form-control-sm" %}
                        </div>
                      </div>

                      <div class="input-group">
                        <label for="id_cus_main_cus_country_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Country' %}</label>
                        <div class="col-sm-8">
                          {% render_field cus_main_form.cus_main_cus_country_en class="form-control form-control-sm" %}
                        </div>
                      </div>





                    </div>                    
                  </div>
                </div>
              </div>
              <!-- Main Office Tab English -->

            </div>
            <!-- /.row -->            



            <!-- Main Office Tab Others -->
            <div class="row">
              <div class="col-md-12">
                <div class="card card-info">
                  <div class="card-body"> 


                    <div class="form-row">
                      
                      <div class="form-group col-md-2">
                        <label for="id_cus_main_cus_zip">{% trans 'Zip' %}</label>
                        {% if cus_main_form.cus_main_cus_zip.errors %}                
                                                    
                          <input type="text" class="form-control form-control-sm is-invalid" id="id_cus_main_cus_zip" name="cus_main_cus_zip" value="{{ cus_main.cus_zip|default_if_none:'' }}">

                          {% for error in cus_main_form.cus_main_cus_zip.errors %}
                          <div class="invalid-feedback">
                            {{error}}
                          </div>
                          {% endfor %}
                        {% else %}
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_zip" name="cus_main_cus_zip" value="{{ cus_main.cus_zip|default_if_none:'' }}">
                        {% endif %}
                      </div>

                      <div class="form-group col-md-2">
                        <label for="id_cus_main_cus_tel">{% trans 'Phone' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_tel" name="cus_main_cus_tel" value="{{ cus_main.cus_tel|default_if_none:'' }}">
                      </div>

                      <div class="form-group col-md-2">
                        <label for="id_cus_main_cus_fax">{% trans 'Fax' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_fax" name="cus_main_cus_fax" value="{{ cus_main.cus_fax|default_if_none:'' }}">
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_cus_email">{% trans 'Email' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_email" name="cus_main_cus_email" value="{{ cus_main.cus_email|default_if_none:'' }}">
                      </div>

                      <div class="form-group col-md-3">
                        <label for="cus_main_cus_zone">{% trans 'Zone' %}</label>
                        {% if cus_main_form.cus_main_cus_zone.errors %}                
                          {% render_field cus_main_form.cus_main_cus_zone class="form-control col-sm-12 form-control-sm is-invalid" %}
                          {% for error in cus_main_form.cus_main_cus_zone.errors %}
                          <div class="invalid-feedback">
                            {{error}}
                          </div>
                          {% endfor %}                
                        {% else %}
                          {% render_field cus_main_form.cus_main_cus_zone class="form-control col-sm-12 form-control-sm" %}
                        {% endif %}
                      </div>

                    </div>

                    <!-- Business Type -->
                    <div class="form-row">

                      <div class="form-group col-md-3">
                        <label for="id_customer_group_id">{% trans 'Group ID' %}</label>                          
                        <div class="container">
                          <select id="id_customer_group_id" name="customer_group_id" class="selectGroupID">
                            {% for option in group_id %}
                              {% if customer.cus_taxid == option %}
                              <option selected>{{ option }}</option>
                              {% else %}
                              <option>{{ option }}</option>
                              {% endif %}
                            {% endfor %}
                          </select>
                          <input class="groupIDTextBox" id="id_cus_main_group_id" name="cus_main_group_id" value="{{customer.cus_taxid|default_if_none:''}}" />
                        </div>                        
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_business_type">{% trans 'Business Type' %}</label>                          
                        <div class="container">
                          <select id="id_cus_main_business_type_temp" name="cus_main_business_type_temp" class="selectBusinessType">
                            {% for option in business_type_list %}
                              {% if customer_option.btype == option %}
                              <option selected>{{ option }}</option>
                              {% else %}
                              <option>{{ option }}</option>
                              {% endif %}
                            {% endfor %}
                          </select>
                          <input class="businessTypeTextBox" id="id_cus_main_business_type" name="cus_main_business_type" value="{{customer_option.btype|default_if_none:''}}" />
                        </div>                        
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_group_1">{% trans 'Group 1' %}</label>                          
                        <div class="container">
                          <select id="selectCustoemrOptionGroup1" name="cus_main_group_1" class="selectGroup1">
                            {% for option in group_1_list %}
                              {% if customer_option.op2 == option %}
                              <option selected>{{ option }}</option>
                              {% else %}
                              <option>{{ option }}</option>
                              {% endif %}
                            {% endfor %}
                          </select>
                          <input class="group1TextBox" id="id_cus_main_customer_option_op2" name="cus_main_customer_option_op2" value="{{customer_option.op2|default_if_none:''}}" />
                        </div>                        
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_group_2">{% trans 'Group 2' %}</label>                          
                        <div class="container">
                          <select id="selectCustoemrOptionGroup2" name="cus_main_group_2" class="selectGroup2">
                            {% for option in group_2_list %}
                              {% if customer_option.op3 == option %}
                              <option selected>{{ option }}</option>
                              {% else %}
                              <option>{{ option }}</option>
                              {% endif %}
                            {% endfor %}
                          </select>
                          <input class="group2TextBox" id="id_cus_main_customer_option_op3" name="cus_main_customer_option_op3" value="{{customer_option.op3|default_if_none:''}}" />
                        </div>
                      </div>

                    </div>




                    <div class="form-row">

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_customer_option_op1">{% trans 'Status' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_customer_option_op1" name="cus_main_customer_option_op1" value="{{ customer_option.op1|default_if_none:'' }}">
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_customer_option_op4" class="text-danger">{% trans 'A/R Code' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_customer_option_op4" name="cus_main_customer_option_op4" value="{{ customer_option.op4|default_if_none:'' }}">
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_customer_option_opn1" class="text-danger">{% trans 'GP Margin' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_customer_option_opn1" name="cus_main_customer_option_opn1" value="{{ customer_option.opn1|default_if_none:0|floatformat:2 }}">
                      </div>

                    </div>


                  </div>
                </div>
              </div>
            </div>

            <!-- Main Office Tab - Contact Information -->
            <div class="row">
              <div class="col-md-12">
                <div class="card card-info">
                  <div class="card-header">
                    <h3 class="card-title">Contact Information</h3>
                  </div>
                  <div class="card-body">

                    <div class="form-row">
                      

                      <div class="form-group col-md-2">
                        <label for="id_cus_site_site_contact_id" class="col-sm-12 col-form-label form-control-sm">{% trans 'Contact ID' %}</label>

                        <div class="row">                              
                          <div class="col-12 input-group">
                            <input type="text" id="id_cus_main_cus_contact_id" name="cus_main_cus_contact_id" class="form-control form-control-sm" value="{{ cus_main.cus_contact_id|default_if_none:'' }}" readonly>                              
                            <button id="cus_main_contact_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_contact_list' %}"><i class="fas fa-search fa-sm"></i></button>
                            <input type="hidden" id="id_cus_main_select_cus_contact_id" name="cus_main_select_cus_contact_id" value="{{ cus_main.cus_contact_id }}">
                          </div>
                        </div>                          
                      </div>

                      <div class="form-group col-md-2">
                        <label for="id_cus_main_cus_contact_cus_title_th">{% trans 'Title' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_cus_title_th" name="cus_main_cus_contact_cus_title_th" value="{{ cus_main.cus_contact.con_title|default_if_none:'' }}" readonly>
                      </div>

                      <div class="form-group col-md-2">
                        <label for="id_cus_main_cus_contact_con_fname_th">{% trans 'First Name' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_fname_th" name="cus_main_cus_contact_con_fname_th" value="{{ cus_main.cus_contact.con_fname_th|default_if_none:'' }}" readonly>
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_cus_contact_con_lname_th">{% trans 'Last Name' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_lname_th" name="cus_main_cus_contact_con_fname_th" value="{{ cus_main.cus_contact.con_lname_th|default_if_none:'' }}" readonly>
                      </div>

                      <div class="form-group col-md-3">
                        <label for="id_cus_main_cus_contact_con_position_th">{% trans 'Position' %}</label>
                        <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_position_th" name="cus_main_cus_contact_con_position_th" value="{{ cus_main.cus_contact.con_position_th|default_if_none:'' }}" readonly>
                      </div>

                    </div>
                    

                    {% comment %}
                    <div class="form-group">                              
                      <div class="col-sm-3">
                          <label for="input-type">Sex</label>
                          <div id="input-type" class="row">

                              {% render_field cus_site_form.cus_site_cus_contact_con_sex class="radio-inline" %}

                          </div>
                      </div>
                    </div>
                    {% endcomment %}

                  </div>
                </div>
              </div>
            </div>



            {% comment %}
            <div class="float-right">
              <input type="button" class="btn btn-secondary btn-md" value="Cancel" onClick="this.form.reset()" />
              <a href="#" id="cusMainSaveButton" type="button" class="btn btn-primary btn-md"><i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>
            </div>
            {% endcomment %}

            </form>

          </div>        



          <!-- Site Tab -->
          <div class="tab-pane" id="site" role="tabpanel" aria-labelledby="site-tab">

            <form id="cus_site_form" method="POST" action="{% url 'update_cus_site' %}">
            {% csrf_token %}

            <div class="clearfix">
              <div class="float-left">&nbsp;</div>
              <div class="float-right">


                <div class="mailbox-controls">
                  <div class="btn-group">
                    <button id="btnSiteCopyToBill" type="button" class="btn btn-outline-primary btn-sm"><i class="far fa-copy"></i>&nbsp;&nbsp;Copy to Bill</button>
                  </div>

                  <div class="float-right">
                    &nbsp;&nbsp;&nbsp;
                    <div class="btn-group">
                      <label class="switch">                                 
                        {% if customer.cus_active|default_if_none:0 %}
                        <input type="checkbox" id="id_cus_site_cus_active" name="cus_site_cus_active" value=1 checked>
                        {% else %}
                        <input type="checkbox" id="id_cus_site_cus_active" name="cus_site_cus_active" value=0>
                        {% endif %}                  
                        <div class="slider"></div>
                      </label>  
                    </div>
                  </div>
                </div>


              </div>
            </div>            


            <div class="container-fluid pt-2">








              <div class="row pt-3">

                <!-- Site Tab Thai -->
                <div class="col-md-6">


                  <div class="card card-info">
                    <div class="card-header">
                      <h3 class="card-title">TH</h3>
                    </div>
                    <div class="card-body">

                      <div class="form-group">  

                        <div class="input-group">
                          <label for="id_cus_site_cus_name_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_name_th" name="cus_site_cus_name_th" value="{{ customer.cus_name_th|default_if_none:'' }}">

                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_add1_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add1_th" name="cus_site_cus_add1_th" value="{{ customer.cus_add1_th|default_if_none:'' }}" autocomplete="off">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add2_th" name="cus_site_cus_add2_th" value="{{ customer.cus_add2_th|default_if_none:'' }}" autocomplete="off">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_subdist_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_subdist_th" name="cus_site_cus_subdist_th" value="{{ customer.cus_subdist_th|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_disrict" class="col-sm-4 col-form-label form-control-sm">{% trans 'District' %}</label>

                          <div class="col-sm-8">                            
                            <div class="row">                              
                              <div class="col-12 input-group">
                                <input type="text" id="id_cus_site_cus_district_dist_th" name="cus_site_cus_district_dist_th" class="form-control form-control-sm" value="{{ customer.cus_district|default_if_none:'' }}" readonly>
                                
                                <button id="cus_site_district_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_district_list' %}"><i class="fas fa-search fa-sm"></i></button>

                                <input type="hidden" id="id_cus_site_select_district_id" name="cus_site_select_district_id" value="{{ customer.cus_district_id|default_if_none:'' }}">
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_city_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_site_cus_city_th" name="cus_site_cus_city_th" class="form-control form-control-sm" value="{{ customer.cus_city|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_country_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_site_cus_country_th" name="cus_site_cus_country_th" class="form-control form-control-sm" value="{{ customer.cus_country|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>

                    </div>
                  </div>

                </div>
                <!-- Site Tab Thai End -->

                <!-- Site Tab English -->
                <div class="col-md-6">
                  <div class="card card-info">
                    <div class="card-header">
                      <h3 class="card-title">EN</h3>
                    </div>
                    <div class="card-body">


                      <div class="form-group">

                        <div class="input-group">
                          <label for="id_cus_name_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_name_en" name="cus_site_cus_name_th" value="{{ customer.cus_name_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_add1_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add1_en" name="cus_site_cus_add1_th" value="{{ customer.cus_add1_en|default_if_none:'' }}">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add2_en" name="cus_site_cus_add2_th" value="{{ customer.cus_add2_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_subdist_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_subdist_en" name="cus_site_cus_subdist_en" value="{{ customer.cus_subdist_en|default_if_none:'' }}">
                          </div>
                        </div>
                        
                        <div class="input-group">
                          <label for="id_cus_site_cus_district_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'District' %}</label>
                          <div class="col-sm-8">                                                    
                            
                            <input type="text" id="id_cus_site_cus_district_en" name="cus_site_cus_district_en" class="form-control form-control-sm" value="{{ customer.cus_district.dist_en|default_if_none:'' }}" readonly>
                            <input type="hidden" id="id_cus_site_cus_district_id" name="cus_site_cus_district_id" value="{{ customer.cus_site_cus_district_id }}">

                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_city_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_site_cus_city_en" name="cus_site_cus_city_en" class="form-control form-control-sm" value="{{ customer.cus_city.city_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_country_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_site_cus_country_en" name="cus_site_cus_country_en" class="form-control form-control-sm" value="{{ customer.cus_country.country_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>                                          
                    </div>
                  </div>


                </div>
                <!-- Site Tab English -->

              </div>



              <!-- Site Tab Others -->
              <div class="row">
                <div class="col-md-12">
                  <div class="card card-info">
                    <div class="card-body"> 


                      <div class="form-row">
                        
                        <div class="form-group col-md-2">
                          <label for="id_cus_site_cus_zip">{% trans 'Zip' %}</label>
                          {% if cus_site_form.cus_site_cus_zip.errors %}                
                                                      
                            <input type="text" class="form-control form-control-sm " id="id_cus_site_cus_zip" name="cus_site_cus_zip" value="{{ customer.cus_zip|default_if_none:'' }}">

                          {% else %}
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_zip" name="cus_site_cus_zip" value="{{ customer.cus_zip|default_if_none:'' }}">
                          {% endif %}

                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_cus_tel">{% trans 'Phone' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_tel" name="cus_site_cus_tel" value="{{ customer.cus_tel|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_cus_fax">{% trans 'Fax' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_fax" name="cus_site_cus_fax" value="{{ customer.cus_fax|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_cus_email">{% trans 'Email' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_email" name="cus_site_cus_email" value="{{ customer.cus_email|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="cus_main_cus_zone">{% trans 'Zone' %}</label>
                          {% if cus_site_form.cus_site_cus_zone.errors %}                
                            {% render_field cus_site_form.cus_site_cus_zone class="form-control col-sm-12 form-control-sm is-invalid" %}
                            {% for error in cus_site_form.cus_site_cus_zone.errors %}
                            <div class="invalid-feedback">
                              {{error}}
                            </div>
                            {% endfor %}                
                          {% else %}
                            {% render_field cus_site_form.cus_site_cus_zone class="form-control col-sm-12 form-control-sm" %}
                          {% endif %}      
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>



              <!-- Site Tab - Contact Information -->
              <div class="row">
                <div class="col-md-12">
                  <div class="card card-info">
                    <div class="card-header">
                      <h3 class="card-title">Contact Information</h3>
                    </div>
                    <div class="card-body">

                      <div class="form-row">
                        


                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_id" class="col-sm-12 col-form-label form-control-sm">{% trans 'Contact ID' %}</label>

                          <div class="row">                              
                            <div class="col-12 input-group">
                              <input type="text" id="id_cus_site_site_contact_id" name="cus_site_site_contact_id" class="form-control form-control-sm" value="{{ customer.site_contact_id|default_if_none:'' }}" readonly>                              
                              <button id="cus_site_contact_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_contact_list' %}"><i class="fas fa-search fa-sm"></i></button>                              
                              <input type="hidden" id="id_cus_site_select_site_contact_id" name="cus_site_select_site_contact_id" value="{{ customer.site_contact_id|default_if_none:'' }}">
                            </div>
                          </div>                          
                        </div>



                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_title_th">{% trans 'Title' %}</label>                          
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_title_th" name="cus_site_site_contact_title_th" value="{{ customer.site_contact.con_title|default_if_none:'' }}" readonly>
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_fname_th">{% trans 'First Name' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_fname_th" name="cus_site_site_contact_fname_th" value="{{ cus_site.site_contact.con_fname_th|default_if_none:'' }}" readonly>
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_lname_th">{% trans 'Last Name' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_lname_th" name="cus_site_cus_contact_con_fname_th" value="{{ cus_site.site_contact.con_lname_th|default_if_none:'' }}" readonly>
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_position_th">{% trans 'Position' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_position_th" name="cus_site_site_contact_position_th" value="{{ cus_site.site_contact.con_position_th|default_if_none:'' }}" readonly>
                        </div>

                      </div>
                      

                      {% comment %}
                      <div class="form-group">                              
                        <div class="col-sm-3">
                            <label for="input-type">Sex</label>
                            <div id="input-type" class="row">

                                {% render_field cus_site_form.cus_site_cus_contact_con_sex class="radio-inline" %}

                            </div>
                        </div>
                      </div>
                      {% endcomment %}

                    </div>
                  </div>
                </div>
              </div>

            {% comment %}
            <div class="float-right">              
              <input type="button" class="btn btn-secondary btn-md" value="Cancel" onClick="this.form.reset()" />
              <a href="#" id="cusSiteSaveButton" type="button" class="btn btn-primary btn-md"><i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>
            </div>
            {% endcomment %}

            </form>

            </div>

          </div>






          <!-- Billing Tab -->
          <div class="tab-pane fade" id="billing" role="tabpanel" aria-labelledby="billing-tab">            
            <div class="clearfix">
              <div class="float-left">&nbsp;</div>
              <div class="float-right">
                <div class="float-left pt-2">
                  &nbsp;
                </div>

                <label class="switch">                                 
                  {% if cus_bill.cus_active|default_if_none:0 %}
                  <input type="checkbox" id="id_cus_bill_cus_active" name="cus_bill_cus_active" value=1 checked>
                  {% else %}
                  <input type="checkbox" id="id_cus_bill_cus_active" name="cus_bill_cus_active" value=0>
                  {% endif %}                  
                  <div class="slider"></div>
                </label>

              </div>
            </div>

            <div class="container-fluid pt-2">


            <form id="cus_bill_form" method="POST" action="{% url 'update_cus_bill' %}">
            {% csrf_token %}

              <div class="row pt-3">

                <!-- Billing Tab Thai -->
                <div class="col-md-6">

                  <div class="card card-info">
                    <div class="card-header">
                      <h3 class="card-title">TH</h3>
                    </div>
                    <div class="card-body">

                      <div class="form-group">  

                        <div class="input-group">
                          <label for="id_cus_bill_cus_name_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_name_th" name="cus_bill_cus_name_th" value="{{ cus_bill.cus_name_th|default_if_none:'' }}">

                          </div>
                        </div>



                        <div class="input-group">
                          <label for="id_cus_bill_cus_add1_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add1_th" name="cus_bill_cus_add1_th" value="{{ cus_bill.cus_add1_th|default_if_none:'' }}" autocomplete="off">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add2_th" name="cus_bill_cus_add2_th" value="{{ cus_bill.cus_add2_th|default_if_none:'' }}" autocomplete="off">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_subdist_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_subdist_th" name="cus_bill_cus_subdist_th" value="{{ cus_bill.cus_subdist_th|default_if_none:'' }}">
                          </div>
                        </div>



                        <div class="input-group">
                          <label for="id_cus_bill_cus_disrict" class="col-sm-4 col-form-label form-control-sm">{% trans 'District' %}</label>

                          <div class="col-sm-8">                            
                            <div class="row">                              
                              <div class="col-12 input-group">
                                <input type="text" id="id_cus_bill_cus_district_dist_th" name="cus_bill_cus_district_dist_th" class="form-control form-control-sm" value="{{ cus_bill.cus_district|default_if_none:'' }}" readonly>
                                
                                <button id="cus_bill_district_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_district_list' %}"><i class="fas fa-search fa-sm"></i></button>

                                <input type="hidden" id="id_cus_bill_select_district_id" name="cus_bill_select_district_id" value="{{ cus_bill.cus_district_id|default_if_none:'' }}">
                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- cus_bill_cus_city_th-->
                        <div class="input-group">
                          <label for="id_cus_bill_cus_city_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_bill_cus_city_th" name="cus_bill_cus_city_th" class="form-control form-control-sm" value="{{ cus_bill.cus_city.city_th|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_country_th" class="col-sm-4 col-form-label form-control-sm">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_bill_cus_country_th" name="cus_bill_cus_country_th" class="form-control form-control-sm" value="{{ cus_bill.cus_country|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>

                    </div>
                  </div>

                </div>
                <!-- Billing Tab Thai End -->

                <!-- Billing Tab English -->
                <div class="col-md-6">
                  <div class="card card-info">
                    <div class="card-header">
                      <h3 class="card-title">EN</h3>
                    </div>
                    <div class="card-body">


                      <div class="form-group">

                        <div class="input-group">
                          <label for="id_cus_bill_cus_name_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_name_en" name="cus_bill_cus_name_en" value="{{ cus_bill.cus_name_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_add1_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add1_en" name="cus_bill_cus_add1_en" value="{{ cus_bill.cus_add1_en|default_if_none:'' }}">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add2_en" name="cus_bill_cus_add2_en" value="{{ cus_bill.cus_add2_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_subdist_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_subdist_en" name="cus_bill_cus_subdist_en" value="{{ cus_bill.cus_subdist_en|default_if_none:'' }}">
                          </div>
                        </div>
                        
                        <div class="input-group">
                          <label for="id_cus_bill_cus_district_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'District' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_bill_cus_district_en" name="cus_bill_cus_district_en" class="form-control form-control-sm" value="{{ cus_bill.cus_district.dist_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_city_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_bill_cus_city_en" name="cus_bill_cus_city_en" class="form-control form-control-sm" value="{{ cus_bill.cus_city.city_en|default_if_none:'' }}" readonly>                            
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_country_en" class="col-sm-4 col-form-label form-control-sm">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_bill_cus_country_en" name="cus_bill_cus_country_en" class="form-control form-control-sm" value="{{ cus_bill.cus_country.country_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>                                          
                    </div>
                  </div>


                </div>
                <!-- Billing Tab English -->

              </div>




              <!-- Bill Tab - Others -->
              <div class="row">
                <div class="col-md-12">
                  <div class="card card-info">
                    <div class="card-body"> 


                      <div class="form-row">
                        
                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_zip">{% trans 'Zip' %}</label>
                          {% if cus_bill_form.cus_bill_cus_zip.errors %}                
                                                      
                            <input type="text" class="form-control form-control-sm " id="id_cus_bill_cus_zip" name="cus_bill_cus_zip" value="{{ cus_bill.cus_zip|default_if_none:'' }}">

                          {% else %}
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_zip" name="cus_bill_cus_zip" value="{{ cus_bill.cus_zip|default_if_none:'' }}">
                          {% endif %}

                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_tel">{% trans 'Phone' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_tel" name="cus_bill_cus_tel" value="{{ cus_bill.cus_tel|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_fax">{% trans 'Fax' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_fax" name="cus_bill_cus_fax" value="{{ cus_bill.cus_fax|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_email">{% trans 'Email' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_email" name="cus_bill_cus_email" value="{{ cus_bill.cus_email|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="cus_main_cus_zone">{% trans 'Zone' %}</label>
                          {% if cus_bill_form.cus_bill_cus_zone.errors %}                
                            {% render_field cus_bill_form.cus_bill_cus_zone class="form-control col-sm-12 form-control-sm is-invalid" %}
                            {% for error in cus_bill_form.cus_bill_cus_zone.errors %}
                            <div class="invalid-feedback">
                              {{error}}
                            </div>
                            {% endfor %}                
                          {% else %}
                            {% render_field cus_bill_form.cus_bill_cus_zone class="form-control col-sm-12 form-control-sm" %}
                          {% endif %}      
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>




              <!-- Bill Tab - Contact Information -->
              <div class="row">
                <div class="col-md-12">
                  <div class="card card-info">
                    <div class="card-header">
                      <h3 class="card-title">Contact Information</h3>
                    </div>
                    <div class="card-body">

                      <div class="form-row">
                        


                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_id" class="col-sm-12 col-form-label form-control-sm">{% trans 'Contact ID' %}</label>

                          <div class="row">                              
                            <div class="col-12 input-group">
                              <input type="text" id="id_cus_bill_cus_contact_id" name="cus_bill_cus_contact_id" class="form-control form-control-sm" value="{{ cus_bill.cus_contact_id|default_if_none:'' }}" readonly>                              
                              <button id="cus_bill_contact_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_contact_list' %}"><i class="fas fa-search fa-sm"></i></button>                              
                              <input type="hidden" id="id_cus_bill_select_bill_contact_id" name="cus_bill_select_bill_contact_id" value="{{ cus_bill.cus_contact_id|default_if_none:'' }}">

                            </div>
                          </div>                          
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_cus_title">{% trans 'Title' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_cus_title" name="cus_bill_cus_contact_cus_title" value="{{ cus_bill.cus_contact.con_title|default_if_none:'' }}" readonly>
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_con_fname_th">{% trans 'First Name' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_fname_th" name="cus_bill_cus_contact_con_fname_th" value="{{ cus_bill.cus_contact.con_fname_th|default_if_none:'' }}" readonly>
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_contact_con_lname_th">{% trans 'Last Name' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_lname_th" name="cus_bill_cus_contact_con_fname_th" value="{{ cus_bill.cus_contact.con_lname_th|default_if_none:'' }}" readonly>
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_contact_con_position_th">{% trans 'Position' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_position_th" name="cus_bill_cus_contact_con_position_th" value="{{ cus_bill.cus_contact.con_position_th|default_if_none:'' }}" readonly>
                        </div>

                      </div>
                      

                      {% comment %}
                      <div class="form-group">                              
                        <div class="col-sm-3">
                            <label for="input-type">Sex</label>
                            <div id="input-type" class="row">

                                {% render_field cus_site_form.cus_site_cus_contact_con_sex class="radio-inline" %}

                            </div>
                        </div>
                      </div>
                      {% endcomment %}

                    </div>
                  </div>
                </div>
              </div>


            {% comment %}
            <div class="float-right">
              <input type="button" class="btn btn-secondary btn-md" value="Cancel" onClick="this.form.reset()" />
              <a href="#" id="cusBillSaveButton" type="button" class="btn btn-primary btn-md"><i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>
            </div>
            {% endcomment %}

            </form>

            
            </div>
          </div>
          <!-- end billing -->




        </div>

            <div class="float-right">
              <a href="#" id="saveAllCustomerTabs" type="button" class="btn btn-primary btn-md"><i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>
            </div>

        <!-- /.end tabs -->
      </div>



      <!-- /.card-body -->

      <!--
      <div class="card-footer text-right">        
        <a href="#" type="button" onclick="customerupdateform.submit()" class="btn btn-success btn-sm"><i class="fas fa-save fa-sm"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>        
      </div>
      -->
      <!-- /.card-footer-->

  </div>
  <!-- /.card -->

  <div class="modal fade" id="modal-customer">
    <div class="modal-dialog">
      <div class="modal-content"></div>
    </div>
  </div>
  </form>

  <div class="container">
    <div class="row"></div>
  </div>

</section>
<!-- /.content -->

</div>

<!-- Customer District Modal -->
<div class="modal fade" id="districtmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle"><i class="fas fa-search"></i>&nbsp;&nbsp;{% trans 'Select a Location' %}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {% trans 'Loading...' %}
      </div>

      <div class="modal-footer">
        <!--<button id='cus_site_district_lookup_modal' type='button' class='btn btn-outline-secondary btn-xs'><b>></b></button>-->
        <button type="button" class="btn btn-success btn-sm" data-dismiss="modal">{% trans 'Close' %}</button>
        <!--<button type="button" class="btn btn-success btn-sm">{% trans 'Select' %}</button>-->
      </div>

    </div>
  </div>
</div>


<!-- Contact Modal -->
<div class="modal fade" id="contact_modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle"><i class="fas fa-search"></i>&nbsp;&nbsp;{% trans 'Select a Person' %}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {% trans 'Loading...' %}
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-success btn-sm" data-dismiss="modal">{% trans 'Close' %}</button>
      </div>

    </div>
  </div>
</div>

<!-- /.content-wrapper -->
{% endblock %}



{% block javascript %}
<script>
  $('#btnCopyToSite').on('click', function (e) {
    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();      
    cus_main_cus_district_dist_th = $('#id_cus_main_cus_district_dist_th').val();    
    cus_main_cus_city_th = $('#id_cus_main_cus_city_th').val();
    cus_main_cus_country_th = $('#id_cus_main_cus_country_th').val();
    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();      
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();      
    id_cus_main_cus_district_en = $('#id_cus_main_cus_district_en').val();
    cus_main_cus_city_en = $('#id_cus_main_cus_city_en').val();
    cus_main_cus_country_en = $('#id_cus_main_cus_country_en').val();
    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();
    cus_main_select_district_id = $('#id_cus_main_select_district_id').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();

    cus_main_cus_contact_id = $('#id_cus_main_cus_contact_id').val();    
    cus_main_cus_contact_cus_title_th = $('#id_cus_main_cus_contact_cus_title_th').val();        
    cus_main_cus_contact_con_fname_th = $('#id_cus_main_cus_contact_con_fname_th').val();  
    cus_main_cus_contact_con_lname_th = $('#id_cus_main_cus_contact_con_lname_th').val();
    cus_main_cus_contact_con_position_th = $('#id_cus_main_cus_contact_con_position_th').val();

    $('#id_cus_site_cus_name_th').val(cus_main_cus_name_th);
    $('#id_cus_site_cus_add1_th').val(cus_main_cus_add1_th);
    $('#id_cus_site_cus_add2_th').val(cus_main_cus_add2_th);
    $('#id_cus_site_cus_subdist_th').val(cus_main_cus_subdist_th);
    $('#id_cus_site_cus_district_dist_th').val(cus_main_cus_district_dist_th);
    $('#id_cus_site_cus_city_th').val(cus_main_cus_city_th);
    $('#id_cus_site_cus_country_th').val(cus_main_cus_country_th);

    $('#id_cus_site_cus_name_en').val(cus_main_cus_name_en);
    $('#id_cus_site_cus_add1_en').val(cus_main_cus_add1_en);
    $('#id_cus_site_cus_add2_en').val(cus_main_cus_add2_en);
    $('#id_cus_site_cus_subdist_en').val(cus_main_cus_subdist_en);
    $('#id_cus_site_cus_district_en').val(id_cus_main_cus_district_en);
    $('#id_cus_site_cus_city_en').val(cus_main_cus_city_en);
    $('#id_cus_site_cus_country_en').val(cus_main_cus_country_en);

    $('#id_cus_site_select_district_id').val(cus_main_select_district_id);
    $('#id_cus_site_cus_district_dist_th').val(cus_main_cus_district_dist_th);

    $('#id_cus_site_cus_zip').val(cus_main_cus_zip);
    $('#id_cus_site_cus_tel').val(cus_main_cus_tel);
    $('#id_cus_site_cus_fax').val(cus_main_cus_fax);
    $('#id_cus_site_cus_email').val(cus_main_cus_email);
    $('#id_cus_site_cus_zone').val(cus_main_cus_zone);

    // Site - Contact Information
    $('#id_cus_site_site_contact_id').val(cus_main_cus_contact_id);
    $('#id_cus_site_site_contact_title_th').val(cus_main_cus_contact_cus_title_th);
    $('#id_cus_site_site_contact_fname_th').val(cus_main_cus_contact_con_fname_th);
    $('#id_cus_site_site_contact_lname_th').val(cus_main_cus_contact_con_lname_th);
    $('#id_cus_site_site_contact_position_th').val(cus_main_cus_contact_con_position_th);

    $(document).Toasts('create', {
      class: 'bg-success', 
      title: "{% trans 'Message' %}",
      subtitle: '',
      autohide: true,
      delay: 2000,      
      body: "Copy to site successfully.",
      autoDismiss: true,
      close: true,
      autoremove: true,
    });    
  });

  $('#btnCopyToBill').on('click', function (e) {
    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();      
    cus_main_cus_district_dist_th = $('#id_cus_main_cus_district_dist_th').val();
    cus_main_cus_city_th = $('#id_cus_main_cus_city_th').val();
    cus_main_cus_country_th = $('#id_cus_main_cus_country_th').val();

    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();      
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();      
    id_cus_main_cus_district_en = $('#id_cus_main_cus_district_en').val();
    cus_main_cus_city_en = $('#id_cus_main_cus_city_en').val();
    cus_main_cus_country_en = $('#id_cus_main_cus_country_en').val();
    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();
    
    cus_main_select_district_id = $('#id_cus_main_select_district_id').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();
    cus_main_cus_contact_id = $('#id_cus_main_cus_contact_id').val();
    cus_main_cus_contact_cus_title = $('#id_cus_main_cus_contact_cus_title_th').val();
    cus_main_cus_contact_con_fname_th = $('#id_cus_main_cus_contact_con_fname_th').val();
    cus_main_cus_contact_con_lname_th = $('#id_cus_main_cus_contact_con_lname_th').val();
    cus_main_cus_contact_con_position_th = $('#id_cus_main_cus_contact_con_position_th').val();

    $('#id_cus_bill_cus_name_th').val(cus_main_cus_name_th);
    $('#id_cus_bill_cus_add1_th').val(cus_main_cus_add1_th);
    $('#id_cus_bill_cus_add2_th').val(cus_main_cus_add2_th);
    $('#id_cus_bill_cus_subdist_th').val(cus_main_cus_subdist_th);
    $('#id_cus_bill_cus_district_dist_th').val(cus_main_cus_district_dist_th);
    $('#id_cus_bill_cus_city_th').val(cus_main_cus_city_th);
    $('#id_cus_bill_cus_country_th').val(cus_main_cus_country_th);

    $('#id_cus_bill_cus_name_en').val(cus_main_cus_name_en);
    $('#id_cus_bill_cus_add1_en').val(cus_main_cus_add1_en);
    $('#id_cus_bill_cus_add2_en').val(cus_main_cus_add2_en);
    $('#id_cus_bill_cus_subdist_en').val(cus_main_cus_subdist_en);
    $('#id_cus_bill_cus_district_en').val(id_cus_main_cus_district_en);
    $('#id_cus_bill_cus_city_en').val(cus_main_cus_city_en);
    $('#id_cus_bill_cus_country_en').val(cus_main_cus_country_en);

    $('#id_cus_bill_select_district_id').val(cus_main_select_district_id);
    $('#id_cus_bill_cus_district_dist_th').val(cus_main_cus_district_dist_th);

    $('#id_cus_bill_cus_zip').val(cus_main_cus_zip);
    $('#id_cus_bill_cus_tel').val(cus_main_cus_tel);
    $('#id_cus_bill_cus_fax').val(cus_main_cus_fax);
    $('#id_cus_bill_cus_email').val(cus_main_cus_email);
    $('#id_cus_bill_cus_zone').val(cus_main_cus_zone);

    // Bill Cotact Information
    $('#id_cus_bill_cus_contact_id').val(cus_main_cus_contact_id);        
    $('#id_cus_bill_cus_contact_cus_title').val(cus_main_cus_contact_cus_title);
    $('#id_cus_bill_cus_contact_con_fname_th').val(cus_main_cus_contact_con_fname_th);
    $('#id_cus_bill_cus_contact_con_lname_th').val(cus_main_cus_contact_con_lname_th);
    $('#id_cus_bill_cus_contact_con_position_th').val(cus_main_cus_contact_con_position_th);

    $(document).Toasts('create', {
      class: 'bg-success', 
      title: "{% trans 'Message' %}",
      subtitle: '',
      autohide: true,
      delay: 2000,      
      body: "Copy to bill successfully.",
      autoDismiss: true,
      close: true,
      autoremove: true,
    });    
  });

  $('#btnSiteCopyToBill').on('click', function (e) {
    cus_site_cus_name_th = $('#id_cus_site_cus_name_th').val();
    cus_site_cus_add1_th = $('#id_cus_site_cus_add1_th').val();
    cus_site_cus_add2_th = $('#id_cus_site_cus_add2_th').val();
    cus_site_cus_subdist_th = $('#id_cus_site_cus_subdist_th').val();      
    cus_site_cus_district_dist_th = $('#id_cus_site_cus_district_dist_th').val();
    cus_site_cus_city_th = $('#id_cus_site_cus_city_th').val();    
    cus_site_cus_country_th = $('#id_cus_site_cus_country_th').val();

    cus_site_cus_name_en = $('#id_cus_site_cus_name_en').val();      
    cus_site_cus_add1_en = $('#id_cus_site_cus_add1_en').val();
    cus_site_cus_add2_en = $('#id_cus_site_cus_add2_en').val();
    cus_site_cus_subdist_en = $('#id_cus_site_cus_subdist_en').val();      
    id_cus_site_cus_district_en = $('#id_cus_site_cus_district_en').val();
    cus_site_cus_city_en = $('#id_cus_site_cus_city_en').val();
    cus_site_cus_country_en = $('#id_cus_site_cus_country_en').val();
    cus_site_cus_zip = $('#id_cus_site_cus_zip').val();
    cus_site_cus_tel = $('#id_cus_site_cus_tel').val();
    cus_site_cus_fax = $('#id_cus_site_cus_fax').val();
    cus_site_cus_email = $('#id_cus_site_cus_email').val();
    
    cus_main_select_district_id = $('#id_cus_main_select_district_id').val();
    cus_site_cus_zone = $('#id_cus_site_cus_zone').val();

    cus_site_site_contact_id = $('#id_cus_site_site_contact_id').val();
    cus_site_site_contact_cus_title = $('#id_cus_site_site_contact_title_th').val();
    cus_site_site_contact_con_fname_th = $('#id_cus_site_site_contact_fname_th').val();
    cus_site_site_contact_con_lname_th = $('#id_cus_site_site_contact_lname_th').val();
    cus_site_site_contact_con_position_th = $('#id_cus_site_site_contact_position_th').val();    

    $('#id_cus_bill_cus_name_th').val(cus_site_cus_name_th);
    $('#id_cus_bill_cus_add1_th').val(cus_site_cus_add1_th);
    $('#id_cus_bill_cus_add2_th').val(cus_site_cus_add2_th);
    $('#id_cus_bill_cus_subdist_th').val(cus_site_cus_subdist_th);
    $('#id_cus_bill_cus_district_dist_th').val(cus_site_cus_district_dist_th);
    $('#id_cus_bill_cus_city_th').val(cus_site_cus_city_th);
    $('#id_cus_bill_cus_country_th').val(cus_site_cus_country_th);

    $('#id_cus_bill_cus_name_en').val(cus_site_cus_name_en);
    $('#id_cus_bill_cus_add1_en').val(cus_site_cus_add1_en);
    $('#id_cus_bill_cus_add2_en').val(cus_site_cus_add2_en);
    $('#id_cus_bill_cus_subdist_en').val(cus_site_cus_subdist_en);
    $('#id_cus_bill_cus_district_en').val(id_cus_site_cus_district_en);
    $('#id_cus_bill_cus_city_en').val(cus_site_cus_city_en);
    $('#id_cus_bill_cus_country_en').val(cus_site_cus_country_en);

    $('#id_cus_bill_select_district_id').val(cus_main_select_district_id);
    $('#id_cus_bill_cus_district_dist_th').val(cus_site_cus_district_dist_th);

    $('#id_cus_bill_cus_zip').val(cus_site_cus_zip);
    $('#id_cus_bill_cus_tel').val(cus_site_cus_tel);
    $('#id_cus_bill_cus_fax').val(cus_site_cus_fax);
    $('#id_cus_bill_cus_email').val(cus_site_cus_email);
    $('#id_cus_bill_cus_zone').val(cus_site_cus_zone);

    // Bill Cotact Information
    $('#id_cus_bill_cus_contact_id').val(cus_site_site_contact_id);        
    $('#id_cus_bill_cus_contact_cus_title').val(cus_site_site_contact_cus_title);
    $('#id_cus_bill_cus_contact_con_fname_th').val(cus_site_site_contact_con_fname_th);
    $('#id_cus_bill_cus_contact_con_lname_th').val(cus_site_site_contact_con_lname_th);
    $('#id_cus_bill_cus_contact_con_position_th').val(cus_site_site_contact_con_position_th);

    $(document).Toasts('create', {
      class: 'bg-success', 
      title: "{% trans 'Message' %}",
      subtitle: '',
      autohide: true,
      delay: 2000,      
      body: "Copy to bill successfully.",
      autoDismiss: true,
      close: true,
      autoremove: true,
    });    
  });

  $(document).on('keyup keypress', '#cus_site_search_district_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });

  $(document).on('keyup keypress', '#cus_main_search_district_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });

  $(document).on('keyup keypress', '#cus_main_search_contact_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });

  $(document).on('keyup keypress', '#cus_site_search_contact_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });  

  $(document).on('keyup keypress', '#cus_bill_search_contact_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });  

  $(document).on('keyup keypress', '#id_cus_main_cus_district_search_text input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });  

  $(document).ready(function(){
    $('#cus_main_contact_lookup').on('click', function (e) {
      var obj = $(this);
      current_contact_id = $('#id_cus_main_cus_contact_id').val();
      //alert(current_contact_id);
      
      if(current_contact_id == null)
        current_contact_id = null;

      $.ajax({
          url: obj.attr("data-url"),  // get_contact_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_contact_id : current_contact_id,
          },          
          beforeSend: function () {
            $("#contact_modal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var con_id = data.results[0]["con_id"];
            var con_fname_th = data.results[0]["con_fname_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_main_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_main_contact_option' class='form-control form-control-sm' required id='id_cus_main_cus_contact_option'>";
            result += "    <option value='1'>Contact ID</option>";
            result += "    <option value='2' selected>Name (TH)</option>";
            result += "    <option value='3'>Last Name (TH)</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_contact_search_text' name='cus_main_cus_contact_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_main_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
            result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
            result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var con_id = data.results[i]["con_id"];
              var con_fname_th = data.results[i]["con_fname_th"];
              var con_lname_th = data.results[i]["con_lname_th"];

              result += "<tr>";
              result += "<td>" + con_id + "</td>";        
              result += "<td>" + con_fname_th + "</td>";
              result += "<td>" + con_lname_th + "</td>";
              result += "<td><a href='javascript:cus_main_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
              result += "</tr>";
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_main_distict_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }

            $("#contact_modal .modal-body").html(result);            
          },
          error: function(data){
            $("#contact_modal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });

    });
  });

  $(document).ready(function(){
    $('#cus_site_contact_lookup').on('click', function (e) {
      var obj = $(this);
      current_contact_id = $('#id_cus_site_site_contact_id').val();
      
      $.ajax({
          url: obj.attr("data-url"), // url: get_contact_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_contact_id : current_contact_id,
          },          
          beforeSend: function () {
            $("#contact_modal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var con_id = data.results[0]["con_id"];
            var con_fname_th = data.results[0]["con_fname_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_site_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
            result += "    <option value='1'>Contact ID</option>";
            result += "    <option value='2' selected>Name (TH)</option>";
            result += "    <option value='3'>Last Name (TH)</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
            result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
            result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var con_id = data.results[i]["con_id"];
              var con_fname_th = data.results[i]["con_fname_th"];
              var con_lname_th = data.results[i]["con_lname_th"];

              result += "<tr>";
              result += "<td>" + con_id + "</td>";        
              result += "<td>" + con_fname_th + "</td>";
              result += "<td>" + con_lname_th + "</td>";
              result += "<td><a href='javascript:cus_site_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
              result += "</tr>";
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }

            $("#contact_modal .modal-body").html(result);            
          },
          error: function(data){
            $("#contact_modal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });

    });
  });


  $(document).ready(function(){
    $('#cus_bill_contact_lookup').on('click', function (e) {
      var obj = $(this);
      current_contact_id = $('#id_cus_bill_cus_contact_id').val();
      id_cus_bill_select_bill_contact_id
      
      //alert(current_contact_id);

      $.ajax({
          url: obj.attr("data-url"), // url: get_contact_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_contact_id : current_contact_id,
          },          
          beforeSend: function () {
            $("#contact_modal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var con_id = data.results[0]["con_id"];
            var con_fname_th = data.results[0]["con_fname_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_bill_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_bill_contact_option' class='form-control form-control-sm' required id='id_cus_bill_cus_contact_option'>";
            result += "    <option value='1'>Contact ID</option>";
            result += "    <option value='2' selected>Name (TH)</option>";
            result += "    <option value='3'>Last Name (TH)</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_bill_search_contact' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_contact_search_text' name='cus_bill_cus_contact_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_bill_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
            result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
            result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var con_id = data.results[i]["con_id"];
              var con_fname_th = data.results[i]["con_fname_th"];
              var con_lname_th = data.results[i]["con_lname_th"];

              result += "<tr>";
              result += "<td>" + con_id + "</td>";        
              result += "<td>" + con_fname_th + "</td>";
              result += "<td>" + con_lname_th + "</td>";
              result += "<td><a href='javascript:cus_bill_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
              result += "</tr>";
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_bill_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }

            $("#contact_modal .modal-body").html(result);            
          },
          error: function(data){
            $("#contact_modal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });

    });
  });


  function cus_site_select_contact(con_id) {    
    $.ajax({
        url : "/customer/ajax/get_contact",
        type: 'get',          
        dataType: 'json',
        data : {          
          contact_id : con_id,
        },
        beforeSend: function () {
          $("#contact_modal").modal("show");
        },
        success: function (data) {

          var con_id = data.results[0]["con_id"];
          var con_fname_th = data.results[0]["con_fname_th"];
          var con_lname_th = data.results[0]["con_lname_th"];
          var con_position_th = data.results[0]["con_position_th"];
          //console.log(con_id + "," + con_fname_th + "," + con_lname_th + "," + con_position_th);

          $("#id_cus_site_site_contact_id").val(con_id);
          $("#id_cus_site_site_contact_fname_th").val(con_fname_th);          
          $("#id_cus_site_site_contact_lname_th").val(con_lname_th);          
          $("#id_cus_site_site_contact_position_th").val(con_position_th);
        },
        error: function(data){
          alert("error");
        }          
    });

    $("#contact_modal").modal("hide");    
  }

  function cus_main_select_contact(con_id) {    
    $.ajax({
        url : "/customer/ajax/get_contact",
        type: 'get',          
        dataType: 'json',
        data : {          
          contact_id : con_id,
        },
        beforeSend: function () {
          $("#contact_modal").modal("show");
        },
        success: function (data) {
          var con_id = data.results[0]["con_id"];
          var con_fname_th = data.results[0]["con_fname_th"];
          var con_lname_th = data.results[0]["con_lname_th"];
          var con_position_th = data.results[0]["con_position_th"];
          var con_title_th = data.results[0]["con_title_th"];

          $("#id_cus_main_cus_contact_id").val(con_id);
          $("#id_cus_main_cus_contact_cus_title").val(con_title_th);
          $("#id_cus_main_cus_contact_con_fname_th").val(con_fname_th);          
          $("#id_cus_main_cus_contact_con_lname_th").val(con_lname_th);          
          $("#id_cus_main_cus_contact_con_position_th").val(con_position_th);
        },
        error: function(data){
          // 
        }          
    });

    $("#contact_modal").modal("hide");    
  }



  function cus_bill_select_contact(con_id) {
    $.ajax({
        url : "/customer/ajax/get_contact",
        type: 'get',          
        dataType: 'json',
        data : {          
          contact_id : con_id,
        },
        beforeSend: function () {
          $("#contact_modal").modal("show");
        },
        success: function (data) {
          var con_id = data.results[0]["con_id"];
          var con_title_th = data.results[0]["con_title_th"];
          var con_fname_th = data.results[0]["con_fname_th"];
          var con_lname_th = data.results[0]["con_lname_th"];
          var con_position_th = data.results[0]["con_position_th"];

          $("#id_cus_bill_cus_contact_id").val(con_id);
          $("#id_cus_bill_cus_contact_cus_title").val(con_title_th);
          $("#id_cus_bill_cus_contact_con_fname_th").val(con_fname_th);          
          $("#id_cus_bill_cus_contact_con_lname_th").val(con_lname_th);          
          $("#id_cus_bill_cus_contact_con_position_th").val(con_position_th);          

        },
        error: function(data){
          // 
        }          
    });

    $("#contact_modal").modal("hide");    
  }


  $(document).ready(function(){

    $('#cus_main_district_lookup').on('click', function (e) {
      var obj = $(this);
      current_district_id = $('#id_cus_main_select_district_id').val();
      //alert(current_district_id);

      $.ajax({
          url: obj.attr("data-url"), // get_district_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_district_id : current_district_id,
          },          
          beforeSend: function () {
            $("#districtmodal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var dist_id = data.results[0]["dist_id"];
            var dist_th = data.results[0]["dist_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_main_cus_district_option' class='form-control form-control-sm' required id='id_cus_main_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_district_search_text' name='cus_main_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_main_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var dist_id = data.results[i]["dist_id"];
              var dist_name_th = data.results[i]["dist_th"];
              var dist_name_en = data.results[i]["dist_en"];
              var city_name_th = data.results[i]["city_th"];
              var city_name_en = data.results[i]["city_en"];
              var country_name_th = data.results[i]["country_name_th"];
              var country_name_en = data.results[i]["country_name_en"];

              result += "<tr>";
              result += "<td>" + dist_id + "</td>";        
              result += "<td>" + dist_name_th + "</td>";
              result += "<td>" + city_name_th + "</td>";
              
              result += "<td><a href='javascript:cus_main_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

              result += "</tr>";              
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }
            
            $("#districtmodal .modal-body").html(result);            
          },
          error: function(data){
            $("#districtmodal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });
    });
  });


  $(document).ready(function(){

    $('#cus_site_district_lookup').on('click', function (e) {
      var obj = $(this);
      current_district_id = $('#id_cus_site_select_district_id').val();

      $.ajax({
          url: obj.attr("data-url"),
          type: 'get',          
          dataType: 'json',
          data : {          
            current_district_id : current_district_id,
          },          
          beforeSend: function () {
            $("#districtmodal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var dist_id = data.results[0]["dist_id"];
            var dist_th = data.results[0]["dist_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var dist_id = data.results[i]["dist_id"];
              var dist_name_th = data.results[i]["dist_th"];
              var dist_name_en = data.results[i]["dist_en"];
              var city_name_th = data.results[i]["city_th"];
              var city_name_en = data.results[i]["city_en"];
              var country_name_th = data.results[i]["country_name_th"];
              var country_name_en = data.results[i]["country_name_en"];

              result += "<tr>";
              result += "<td>" + dist_id + "</td>";        
              result += "<td>" + dist_name_th + "</td>";
              result += "<td>" + city_name_th + "</td>";
              
              //result += "<td><a href='javascript:select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Selectxx</a></td>";

              result += "<td><a href='javascript:select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

              result += "</tr>";              
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }
            
            $("#districtmodal .modal-body").html(result);            
          },
          error: function(data){
            $("#districtmodal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });
    });
  
  });


  $(document).ready(function(){
    $('#cus_bill_district_lookup').on('click', function (e) {
      var obj = $(this);
      current_district_id = $('#id_cus_site_select_district_id').val();
      
      //alert(current_district_id);

      $.ajax({
          url: obj.attr("data-url"),
          type: 'get',          
          dataType: 'json',
          data : {          
            current_district_id : current_district_id,
          },          
          beforeSend: function () {
            $("#districtmodal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var dist_id = data.results[0]["dist_id"];
            var dist_th = data.results[0]["dist_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_bill_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_bill_cus_district_option' class='form-control form-control-sm' required id='id_cus_bill_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_district_search_text' name='cus_bill_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_bill_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var dist_id = data.results[i]["dist_id"];
              var dist_name_th = data.results[i]["dist_th"];
              var dist_name_en = data.results[i]["dist_en"];
              var city_name_th = data.results[i]["city_th"];
              var city_name_en = data.results[i]["city_en"];

              result += "<tr>";
              result += "<td>" + dist_id + "</td>";        
              result += "<td>" + dist_name_th + "</td>";
              result += "<td>" + city_name_th + "</td>";
              result += "<td><a href='javascript:cus_bill_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

              result += "</tr>";              
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_bill_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }
            
            $("#districtmodal .modal-body").html(result);            
          },
          error: function(data){
            $("#districtmodal .modal-body").html("{% trans 'There is no data.' %}");
          }
      });

    });
  });

  $("#cusMainSaveButton").click( function() {
    event.preventDefault();    
    update_cus_main();
  });

  $("#cusSiteSaveButton").click( function() {
    event.preventDefault();
    update_cus_site();
  });

  $("#cusBillSaveButton").click( function() {
    event.preventDefault();
    update_cus_bill();
  });

  //TODO
  $("#saveAllCustomerTabs").click( function() {
    event.preventDefault();
    
    var cus_main_cus_id = "{{cus_main.cus_id}}";
    var cus_site_cus_no = "{{customer.cus_no}}";
    var cus_bill_cus_no = "{{cus_bill.cus_no}}";

    var cus_id = "{{customer.cus_id}}";
    var cus_brn = "{{customer.cus_brn}}";

    if(cus_id=='' || cus_brn=='') {
      alert("Customer Number is required.");
    } else {
      update_all_customer_tabs(cus_id, cus_brn);
    }

    /*
    console.log(cus_main_cus_id + "," + cus_site_cus_no + "," + cus_bill_cus_no);

    if(cus_main_cus_id=='' || cus_site_cus_no=='' || cus_bill_cus_no=='') {      
      alert("Customer ID is required.");
    }
    else {
      update_all_customer_tabs(cus_main_cus_id, cus_site_cus_no, cus_bill_cus_no);
    }
    */
  });

  //function update_all_customer_tabs(cus_main_cus_id, cus_site_cus_no, cus_bill_cus_no) {
  function update_all_customer_tabs(cus_id, cus_brn) {
    //console.log(cus_main_cus_id + "," + cus_site_cus_no + "," + cus_bill_cus_no);    

    // CUS_MAIN
    if ($('#id_cus_main_cus_active').is(":checked"))
      cus_main_cus_active = 1;
    else
      cus_main_cus_active = 0;

    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();    
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();
    
    cus_main_cus_district_id = $('#id_cus_main_select_district_id').val();
    //alert(cus_main_cus_district_id);

    cus_main_cus_district_th = $('#id_cus_main_cus_district_dist_th').val();    
    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();
    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();
    customer_option_btype = $('#id_cus_main_business_type').val();
    customer_option_op1 = $('#id_cus_main_customer_option_op1').val();
    customer_option_op2 = $('#id_cus_main_customer_option_op2').val();
    customer_option_op3 = $('#id_cus_main_customer_option_op3').val();
    customer_option_op4 = $('#id_cus_main_customer_option_op4').val();
    customer_option_opn1 = $('#id_cus_main_customer_option_opn1').val();
    cus_main_cus_contact_id = $('#id_cus_main_cus_contact_id').val();
    if(cus_main_cus_contact_id == null)
      cus_main_cus_contact_id = null;

    /*
    console.log(
      cus_main_cus_active + "\n" +
      cus_main_cus_name_th + "\n" + 
      cus_main_cus_add1_th + "\n" + 
      cus_main_cus_add2_th + "\n" +
      cus_main_cus_subdist_th + "\n" + 
      cus_main_cus_district_id + "\n" + 
      cus_main_cus_district_th + "\n" + 
      cus_main_cus_name_en + "\n" + 
      cus_main_cus_add1_en + "\n" + 
      cus_main_cus_add2_en + "\n" +
      cus_main_cus_subdist_en + "\n" +   
      cus_main_cus_zip + "\n" + 
      cus_main_cus_tel + "\n" + 
      cus_main_cus_email + "\n" + 
      cus_main_cus_zone + "\n" + 
      customer_option_btype + "\n" + 
      customer_option_op1 + "\n" + 
      customer_option_op2 + "\n" + 
      customer_option_op3 + "\n" + 
      customer_option_op4 + "\n" + 
      cus_main_cus_contact_id + "\n"
    );
    */

    // CUS_SITE
    if ($('#id_cus_site_cus_active').is(":checked"))
      cus_site_cus_active = 1;
    else
      cus_site_cus_active = 0;
    cus_site_cus_name_th = $('#id_cus_site_cus_name_th').val();
    cus_site_cus_add1_th = $('#id_cus_site_cus_add1_th').val();
    cus_site_cus_add2_th = $('#id_cus_site_cus_add2_th').val();    
    cus_site_cus_subdist_th = $('#id_cus_site_cus_subdist_th').val();
    cus_site_cus_district_id = $('#id_cus_site_select_district_id').val();    
    cus_site_cus_district_th = $('#id_cus_bill_cus_district_dist_th').val();
    cus_site_cus_name_en = $('#id_cus_site_cus_name_en').val();    
    cus_site_cus_add1_en = $('#id_cus_site_cus_add1_en').val();
    cus_site_cus_add2_en = $('#id_cus_site_cus_add2_en').val();    
    cus_site_cus_subdist_en = $('#id_cus_site_cus_subdist_en').val();
    cus_site_cus_zip = $('#id_cus_site_cus_zip').val();
    cus_site_cus_tel = $('#id_cus_site_cus_tel').val();
    cus_site_cus_fax = $('#id_cus_site_cus_fax').val();
    cus_site_cus_email = $('#id_cus_site_cus_email').val();
    cus_site_cus_zone = $('#id_cus_site_cus_zone').val();    
    cus_site_site_contact_id = $('#id_cus_site_site_contact_id').val();
    customer_group_id = $('#id_customer_group_id').val();
    //alert(customer_group_id);    

    /*
    console.log(
      cus_site_cus_active + "\n" +
      cus_site_cus_name_th + "\n" + 
      cus_site_cus_add1_th + "\n" + 
      cus_site_cus_add2_th + "\n" +
      cus_site_cus_subdist_th + "\n" + 
      cus_site_cus_district_id + "\n" + 
      cus_site_cus_district_th + "\n" + 
      cus_site_cus_name_en + "\n" + 
      cus_site_cus_add1_en + "\n" + 
      cus_site_cus_add2_en + "\n" +
      cus_site_cus_subdist_en + "\n" +   
      cus_site_cus_zip + "\n" + 
      cus_site_cus_tel + "\n" + 
      cus_site_cus_email + "\n" + 
      cus_site_cus_zone + "\n" + 
      cus_site_site_contact_id + "\n"
    );
    */


    // CUS_BILL
    if ($('#id_cus_bill_cus_active').is(":checked"))
      cus_bill_cus_active = 1;
    else
      cus_bill_cus_active = 0;

    cus_bill_cus_name_th = $('#id_cus_bill_cus_name_th').val();    
    cus_bill_cus_add1_th = $('#id_cus_bill_cus_add1_th').val();
    cus_bill_cus_add2_th = $('#id_cus_bill_cus_add2_th').val();    
    cus_bill_cus_subdist_th = $('#id_cus_bill_cus_subdist_th').val();
    cus_bill_cus_district_id = $('#id_cus_bill_select_district_id').val();
    cus_bill_cus_district_th = $('#id_cus_bill_cus_city_th').val();
    cus_bill_cus_name_en = $('#id_cus_bill_cus_name_en').val();
    cus_bill_cus_add1_en = $('#id_cus_bill_cus_add1_en').val();
    cus_bill_cus_add2_en = $('#id_cus_bill_cus_add2_en').val();
    cus_bill_cus_subdist_en = $('#id_cus_bill_cus_subdist_en').val();
    cus_bill_cus_zip = $('#id_cus_bill_cus_zip').val();
    cus_bill_cus_tel = $('#id_cus_bill_cus_tel').val();
    cus_bill_cus_fax = $('#id_cus_bill_cus_fax').val();
    cus_bill_cus_email = $('#id_cus_bill_cus_email').val();
    cus_bill_cus_zone = $('#id_cus_bill_cus_zone').val();    
    cus_bill_cus_contact_id = $('#id_cus_bill_cus_contact_id').val();

    /*
    console.log(
      cus_bill_cus_active + "\n" +
      cus_bill_cus_name_th + "\n" + 
      cus_bill_cus_add1_th + "\n" + 
      cus_bill_cus_add2_th + "\n" +
      cus_bill_cus_subdist_th + "\n" + 
      cus_bill_cus_district_id + "\n" + 
      cus_bill_cus_district_th + "\n" + 
      cus_bill_cus_name_en + "\n" + 
      cus_bill_cus_add1_en + "\n" + 
      cus_bill_cus_add2_en + "\n" +
      cus_bill_cus_subdist_en + "\n" +   
      cus_bill_cus_zip + "\n" + 
      cus_bill_cus_tel + "\n" + 
      cus_bill_cus_email + "\n" + 
      cus_bill_cus_zone + "\n" + 
      cus_bill_cus_contact_id + "\n"
    );
    */

    $.ajax({
      url : "/customer/ajax/update_all_cus_tabs/",
      type : "POST",
      data : {          
        csrfmiddlewaretoken: '{{ csrf_token }}',
        cus_id: cus_id,
        cus_brn: cus_brn,

        // CUS_MAIN
        cus_main_cus_active: cus_main_cus_active,        
        cus_main_cus_name_th: cus_main_cus_name_th,
        cus_main_cus_add1_th: cus_main_cus_add1_th,
        cus_main_cus_add2_th: cus_main_cus_add2_th,
        cus_main_cus_subdist_th: cus_main_cus_subdist_th,
        cus_main_cus_district_id: cus_main_cus_district_id,        
        cus_main_cus_name_en: cus_main_cus_name_en,
        cus_main_cus_add1_en: cus_main_cus_add1_en,
        cus_main_cus_add2_en: cus_main_cus_add2_en,
        cus_main_cus_subdist_en: cus_main_cus_subdist_en,        
        cus_main_cus_zip: cus_main_cus_zip,
        cus_main_cus_tel: cus_main_cus_tel,
        cus_main_cus_fax: cus_main_cus_fax,
        cus_main_cus_email: cus_main_cus_email,
        cus_main_cus_zone: cus_main_cus_zone,
        cus_main_business_type: customer_option_btype,
        cus_main_customer_option_op1: customer_option_op1,
        cus_main_customer_option_op2: customer_option_op2,
        cus_main_customer_option_op3: customer_option_op3,
        cus_main_customer_option_op4: customer_option_op4,
        cus_main_customer_option_opn1: customer_option_opn1,
        cus_main_cus_contact_id: cus_main_cus_contact_id,

        // CUS_SITE
        cus_site_cus_active: cus_site_cus_active,
        cus_site_cus_name_th: cus_site_cus_name_th,
        cus_site_cus_add1_th: cus_site_cus_add1_th,
        cus_site_cus_add2_th: cus_site_cus_add2_th,
        cus_site_cus_subdist_th: cus_site_cus_subdist_th,
        cus_site_cus_name_en: cus_site_cus_name_en,
        cus_site_cus_add1_en: cus_site_cus_add1_en,
        cus_site_cus_add2_en: cus_site_cus_add2_en,
        cus_site_cus_subdist_en: cus_site_cus_subdist_en,        
        cus_site_cus_district_id: cus_site_cus_district_id,
        cus_site_cus_zip: cus_site_cus_zip,
        cus_site_cus_tel: cus_site_cus_tel,
        cus_site_cus_fax: cus_site_cus_fax,
        cus_site_cus_email: cus_site_cus_email,
        cus_site_cus_zone: cus_site_cus_zone,
        cus_site_site_contact_id: cus_site_site_contact_id,
        customer_group_id: customer_group_id,

        // CUS_BILL
        cus_bill_cus_active: cus_bill_cus_active,
        cus_bill_cus_name_th: cus_bill_cus_name_th,
        cus_bill_cus_add1_th: cus_bill_cus_add1_th,
        cus_bill_cus_add2_th: cus_bill_cus_add2_th,
        cus_bill_cus_subdist_th: cus_bill_cus_subdist_th,
        cus_bill_cus_name_en: cus_bill_cus_name_en,
        cus_bill_cus_add1_en: cus_bill_cus_add1_en,
        cus_bill_cus_add2_en: cus_bill_cus_add2_en,
        cus_bill_cus_subdist_en: cus_bill_cus_subdist_en,        
        cus_bill_cus_district_id: cus_bill_cus_district_id,
        cus_bill_cus_zip: cus_bill_cus_zip,
        cus_bill_cus_tel: cus_bill_cus_tel,
        cus_bill_cus_fax: cus_bill_cus_fax,
        cus_bill_cus_email: cus_bill_cus_email,
        cus_bill_cus_zone: cus_bill_cus_zone,
        cus_bill_cus_contact_id: cus_bill_cus_contact_id,        
      },
      success : function(json) {        
        if(json.form_is_valid) {
          $(document).Toasts('create', {
            class: 'bg-success', 
            title: "{% trans 'Message' %}",
            subtitle: '',
            autohide: true,
            delay: 2000,
            body: json.result + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",
            autoDismiss: true,
            close: true,
            autoremove: true,
          });

          $.each($('.is-valid'), function() {
            $('.is-valid').removeClass('is-valid');              
          });            

          $.each($('.is-invalid'), function() {
            $('.is-invalid').addClass('is-valid');  
            $('.is-invalid').removeClass('is-invalid');              
          });           

        }
        else {          
          //alert("b");          

          $(document).Toasts('create', {
            class: 'bg-danger', 
            title: "{% trans 'Error' %}",
            subtitle: '',
            autohide: true,
            delay: 5000,
            body: json.message,
            autoDismiss: true,
            close: true,
            autoremove: true,
            preventDuplicates: true,       
          });

          $.each($('.is-invalid'), function() {
            $('.is-invalid').removeClass('is-invalid');
          });            

          for(error in json.errors) {
            $("#id_" + error).addClass("is-invalid");         
          };            


        }
      },
    });
  }

  function update_cus_main() {
    cus_id = "{{customer.cus_id|stringformat:'04d'}}";
    cus_brn = "{{customer.cus_brn|stringformat:'03d'}}";
    cus_no = cus_id + cus_brn;

    // Main Office TH
    if ($('#id_cus_main_cus_active').is(":checked"))
      cus_main_cus_active = 1;
    else
      cus_main_cus_active = 0;

    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();    
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();

    // Main Office EN
    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();

    select_district_id = $('#id_cus_main_select_district_id').val();

    cus_main_cus_country_en = $('#id_cus_main_cus_country_en').val();

    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();

    // Business Type
    cus_main_business_type = $('#id_cus_main_business_type').val();
    cus_main_customer_option_op1 = $('#id_cus_main_customer_option_op1').val(); // Status    
    cus_main_customer_option_op2 = $('#id_cus_main_customer_option_op2').val(); // Group 1
    cus_main_customer_option_op3 = $('#id_cus_main_customer_option_op3').val(); // Group 2
    cus_main_customer_option_op4 = $('#id_cus_main_customer_option_op4').val(); // A/R Code

    // Contact Information
    cus_main_cus_contact_id = $("#id_cus_main_cus_contact_id").val();
    if(cus_main_cus_contact_id == null)
      cus_main_cus_contact_id = null;

    $.ajax({
      url : "/customer/ajax/update_cus_main/",
      type : "POST",
      data : {          
        csrfmiddlewaretoken: '{{ csrf_token }}',
        cus_id : cus_id,
        cus_brn : cus_brn,
        cus_no : cus_no,

        cus_main_cus_active : cus_main_cus_active,
        cus_main_cus_name_th : cus_main_cus_name_th,
        cus_main_cus_add1_th : cus_main_cus_add1_th,
        cus_main_cus_add2_th : cus_main_cus_add2_th,
        cus_main_cus_subdist_th :  cus_main_cus_subdist_th,

        cus_main_cus_name_en : cus_main_cus_name_en,
        cus_main_cus_add1_en : cus_main_cus_add1_en,
        cus_main_cus_add2_en : cus_main_cus_add2_en,      
        cus_main_cus_subdist_en :  cus_main_cus_subdist_en,        
        select_district_id : select_district_id,   
        cus_main_cus_country_en : cus_main_cus_country_en,

        cus_main_cus_zip : cus_main_cus_zip,
        cus_main_cus_tel : cus_main_cus_tel,
        cus_main_cus_fax : cus_main_cus_fax,
        cus_main_cus_email : cus_main_cus_email,
        cus_main_cus_zone : cus_main_cus_zone,

        cus_main_business_type : cus_main_business_type,
        cus_main_customer_option_op1 : cus_main_customer_option_op1,
        cus_main_customer_option_op2 : cus_main_customer_option_op2,
        cus_main_customer_option_op3 : cus_main_customer_option_op3,
        cus_main_customer_option_op4 : cus_main_customer_option_op4,

        cus_main_cus_contact_id : cus_main_cus_contact_id,
      },
      success : function(json) {
        if(json.form_is_valid) {          
          $(document).Toasts('create', {
            class: 'bg-success', 
            title: "{% trans 'Message' %}",
            subtitle: '',
            autohide: true,
            delay: 2000,
            body: json.result + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",
            autoDismiss: true,
            close: true,
            autoremove: true,
          });

          $.each($('.is-valid'), function() {
            $('.is-valid').removeClass('is-valid');              
          });            

          $.each($('.is-invalid'), function() {
            $('.is-invalid').addClass('is-valid');  
            $('.is-invalid').removeClass('is-invalid');              
          });

        }
        else {          

          $(document).Toasts('create', {
            class: 'bg-danger', 
            title: "{% trans 'Error' %}",
            subtitle: '',
            autohide: true,
            delay: 5000,
            body: json.message,
            autoDismiss: true,
            close: true,
            autoremove: true,
            preventDuplicates: true,       
          });

          for(error in json.errors) {
            $("#id_" + error).addClass("is-invalid");         
          };

        }
      },
    });
  }


  function update_cus_site() {
    cus_id = "{{customer.cus_id|stringformat:'04d'}}";
    cus_brn = "{{customer.cus_brn|stringformat:'03d'}}";
    cus_no = "{{cus_no}}";

    if ($('#id_cus_site_cus_active').is(":checked"))
      cus_site_cus_active = 1;
    else
      cus_site_cus_active = 0;

    cus_site_cus_name_th = $('#id_cus_site_cus_name_th').val();
    cus_site_cus_add1_th = $('#id_cus_site_cus_add1_th').val();
    cus_site_cus_add2_th = $('#id_cus_site_cus_add2_th').val();
    cus_site_cus_subdist_th = $('#id_cus_site_cus_subdist_th').val();

    cus_site_cus_name_en = $('#id_cus_site_cus_name_en').val();
    cus_site_cus_add1_en = $('#id_cus_site_cus_add1_en').val();
    cus_site_cus_add2_en = $('#id_cus_site_cus_add2_en').val();
    cus_site_cus_subdist_en = $('#id_cus_site_cus_subdist_en').val();
    select_district_id = $('#id_cus_site_select_district_id').val();
    //alert(select_district_id);
    cus_site_cus_zip = $('#id_cus_site_cus_zip').val();
    cus_site_cus_tel = $('#id_cus_site_cus_tel').val();
    cus_site_cus_fax = $('#id_cus_site_cus_fax').val();
    cus_site_cus_email = $('#id_cus_site_cus_email').val();
    cus_site_cus_zone = $('#id_cus_site_cus_zone').val();

    // Contact Information
    cus_site_cus_contact_con_sex = $('input[name="cus_site_cus_contact_con_sex"]:checked').val();    
    cus_site_site_contact_id = $("#id_cus_site_site_contact_id").val();
    //alert(cus_site_site_contact_id);

    $.ajax({
        url : "/customer/ajax/update_cus_site/",
        type : "POST",
        data : {          
          csrfmiddlewaretoken: '{{ csrf_token }}',
          cus_id : cus_id,
          cus_brn : cus_brn,
          cus_no : cus_no,
          cus_site_cus_active : cus_site_cus_active,
          cus_site_cus_name_th : cus_site_cus_name_th,
          cus_site_cus_add1_th : cus_site_cus_add1_th,
          cus_site_cus_add2_th : cus_site_cus_add2_th,
          cus_site_cus_subdist_th :  cus_site_cus_subdist_th,
          cus_site_cus_name_en : cus_site_cus_name_en,
          cus_site_cus_add1_en : cus_site_cus_add1_en,
          cus_site_cus_add2_en : cus_site_cus_add2_en,
          cus_site_cus_subdist_en : cus_site_cus_subdist_en,
          select_district_id : select_district_id,
          cus_site_cus_zip : cus_site_cus_zip,
          cus_site_cus_tel : cus_site_cus_tel,
          cus_site_cus_fax : cus_site_cus_fax,
          cus_site_cus_email : cus_site_cus_email,
          cus_site_cus_zone : cus_site_cus_zone,

          cus_site_cus_contact_con_sex : cus_site_cus_contact_con_sex,
          cus_site_site_contact_id : cus_site_site_contact_id,
        },
        success : function(json) {
          if(json.form_is_valid) {        

            $(document).Toasts('create', {
              class: 'bg-success', 
              title: "{% trans 'Message' %}",
              subtitle: '',
              autohide: true,
              delay: 2000,
              body: json.result + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",
              autoDismiss: true,
              close: true,
              autoremove: true,
            });

            $.each($('.is-valid'), function() {
              $('.is-valid').removeClass('is-valid');              
            });            

            $.each($('.is-invalid'), function() {
              $('.is-invalid').addClass('is-valid');  
              $('.is-invalid').removeClass('is-invalid');              
            });            

          }
          else {            
            $(document).Toasts('create', {
              class: 'bg-danger', 
              title: "{% trans 'Error' %}",
              subtitle: '',
              autohide: true,
              delay: 5000,
              body: json.message,
              autoDismiss: true,
              close: true,
              autoremove: true,
              preventDuplicates: true,
            });

            for(error in json.errors) {
              $("#id_"+error).addClass("is-invalid");         
            };
          }
        },
        error : function(json) {
          //
        }
    });
  }



  function update_cus_bill() {
    cus_id = "{{cus_site.cus_id|stringformat:'04d'}}";
    cus_brn = "{{cus_site.cus_brn|stringformat:'03d'}}";
    cus_no = cus_id + cus_brn;

    //alert(cus_no);

    if ($('#id_cus_bill_cus_active').is(":checked"))
      cus_bill_cus_active = 1;
    else
      cus_bill_cus_active = 0;

    cus_bill_cus_name_th = $('#id_cus_bill_cus_name_th').val();
    cus_bill_cus_add1_th = $('#id_cus_bill_cus_add1_th').val();
    cus_bill_cus_add2_th = $('#id_cus_bill_cus_add2_th').val();
    cus_bill_cus_subdist_th = $('#id_cus_bill_cus_subdist_th').val();

    cus_bill_cus_name_en = $('#id_cus_bill_cus_name_en').val();
    cus_bill_cus_add1_en = $('#id_cus_bill_cus_add1_en').val();
    cus_bill_cus_add2_en = $('#id_cus_bill_cus_add2_en').val();
    cus_bill_cus_subdist_en = $('#id_cus_bill_cus_subdist_en').val();
    
    select_district_id = $('#id_cus_bill_select_district_id').val();
    //alert(select_district_id);

    cus_bill_cus_zip = $('#id_cus_bill_cus_zip').val();
    cus_bill_cus_tel = $('#id_cus_bill_cus_tel').val();
    cus_bill_cus_fax = $('#id_cus_bill_cus_fax').val();
    cus_bill_cus_email = $('#id_cus_bill_cus_email').val();
    cus_bill_cus_zone = $('#id_cus_bill_cus_zone').val();

    // Contact Information
    cus_bill_cus_contact_con_sex = $('input[name="cus_bill_cus_contact_con_sex"]:checked').val();    
    cus_bill_cus_contact_id = $("#id_cus_bill_cus_contact_id").val();
    
    $.ajax({
        url : "/customer/ajax/update_cus_bill/",
        type : "POST",
        data : {          
          csrfmiddlewaretoken: '{{ csrf_token }}',
          cus_id : cus_id,
          cus_brn : cus_brn,
          cus_no : cus_no,
          cus_bill_cus_active : cus_bill_cus_active,
          cus_bill_cus_name_th : cus_bill_cus_name_th,
          cus_bill_cus_add1_th : cus_bill_cus_add1_th,
          cus_bill_cus_add2_th : cus_bill_cus_add2_th,
          cus_bill_cus_subdist_th :  cus_bill_cus_subdist_th,
          cus_bill_cus_name_en : cus_bill_cus_name_en,
          cus_bill_cus_add1_en : cus_bill_cus_add1_en,
          cus_bill_cus_add2_en : cus_bill_cus_add2_en,
          cus_bill_cus_subdist_en : cus_bill_cus_subdist_en,
          select_district_id : select_district_id,
          cus_bill_cus_zip : cus_bill_cus_zip,
          cus_bill_cus_tel : cus_bill_cus_tel,
          cus_bill_cus_fax : cus_bill_cus_fax,
          cus_bill_cus_email : cus_bill_cus_email,
          cus_bill_cus_zone : cus_bill_cus_zone,

          cus_bill_cus_contact_con_sex : cus_bill_cus_contact_con_sex,
          cus_bill_cus_contact_id : cus_bill_cus_contact_id,
        },
        success : function(json) {
          if(json.form_is_valid) {        

            $(document).Toasts('create', {
              class: 'bg-success', 
              title: "{% trans 'Message' %}",
              subtitle: '',
              autohide: true,
              delay: 2000,
              body: json.result + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",
              autoDismiss: true,
              close: true,
              autoremove: true,
            });

            $.each($('.is-valid'), function() {
              $('.is-valid').removeClass('is-valid');              
            });            

            $.each($('.is-invalid'), function() {
              $('.is-invalid').addClass('is-valid');  
              $('.is-invalid').removeClass('is-invalid');              
            });            

          }
          else {            
            $(document).Toasts('create', {
              class: 'bg-danger', 
              title: "{% trans 'Error' %}",
              subtitle: '',
              autohide: true,
              delay: 5000,
              body: json.message,
              autoDismiss: true,
              close: true,
              autoremove: true,
              preventDuplicates: true,
            });

            for(error in json.errors) {
              $("#id_"+error).addClass("is-invalid");         
            };
          }
        },
        error : function(json) {
          //
        }
    });
  }

  function cus_main_search_contact_modal() {
    //alert("todo");
    current_contact_id = $('#id_cus_main_select_cus_contact_id').val();    
    search_contact_option = $('#id_cus_main_cus_contact_option').val();
    search_contact_text = $('#id_cus_main_cus_contact_search_text').val();
    page_no = 1;

    console.log(current_contact_id);

    $.ajax({
        url : "/customer/ajax/get_contact_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_contact_id : current_contact_id,
          search_contact_option : search_contact_option,
          search_contact_text : search_contact_text,          
        },
        success: function (data) {
    
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_main_cus_contact_option' class='form-control form-control-sm' required id='id_cus_main_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_contact' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_contact_search_text' name='cus_main_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_main_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          
          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
          result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
          result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";

          for(var i=0; i<count; i++) {              
            var con_id = data.results[i]["con_id"];
            var con_fname_th = data.results[i]["con_fname_th"];
            var con_lname_th = data.results[i]["con_lname_th"];
            var con_position_th = data.results[i]["con_position_th"];
            var con_position_en = data.results[i]["con_position_en"];

            result += "<tr>";
            result += "<td>" + con_id + "</td>";        
            result += "<td>" + con_fname_th + "</td>";
            result += "<td>" + con_lname_th + "</td>";
            
            result += "<td><a href='javascript:cus_main_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_main_contact_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_main_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          

          $("#contact_modal .modal-body").html(result);
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_main_cus_contact_option' class='form-control form-control-sm' required id='id_cus_main_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_contact_search_text' name='cus_main_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_main_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#contact_modal .modal-body").html(result);
        }          
    });
  }



  function cus_site_search_contact_modal() {
    current_contact_id = $('#id_cus_site_select_site_contact_id').val();
    search_contact_option = $('#id_cus_site_cus_contact_option').val();
    search_contact_text = $('#id_cus_site_cus_contact_search_text').val();    
    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_contact_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_contact_id : current_contact_id,
          search_contact_option : search_contact_option,
          search_contact_text : search_contact_text,          
        },
        success: function (data) {
    
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          
          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
          result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
          result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";

          for(var i=0; i<count; i++) {              
            var con_id = data.results[i]["con_id"];
            var con_fname_th = data.results[i]["con_fname_th"];
            var con_lname_th = data.results[i]["con_lname_th"];
            var con_position_th = data.results[i]["con_position_th"];
            var con_position_en = data.results[i]["con_position_en"];

            result += "<tr>";
            result += "<td>" + con_id + "</td>";        
            result += "<td>" + con_fname_th + "</td>";
            result += "<td>" + con_lname_th + "</td>";
            
            result += "<td><a href='javascript:cus_site_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_site_contact_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_site_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          

          $("#contact_modal .modal-body").html(result);
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#contact_modal .modal-body").html(result);
        }          
    });
  }


  //amnaj
  function cus_bill_search_contact_modal() {
    current_contact_id = $('#id_cus_bill_select_bill_contact_id').val();    
    search_contact_option = $('#id_cus_bill_cus_contact_option').val();
    search_contact_text = $('#id_cus_bill_cus_contact_search_text').val();    
    page_no = 1;

    //alert(current_contact_id);
    //alert("todo");


    $.ajax({
        url : "/customer/ajax/get_contact_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_contact_id : current_contact_id,
          search_contact_option : search_contact_option,
          search_contact_text : search_contact_text,          
        },
        success: function (data) {
    
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_bill_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_bill_cus_contact_option' class='form-control form-control-sm' required id='id_cus_bill_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_bill_search_contact' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_bill_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          
          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
          result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
          result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";

          for(var i=0; i<count; i++) {              
            var con_id = data.results[i]["con_id"];
            var con_fname_th = data.results[i]["con_fname_th"];
            var con_lname_th = data.results[i]["con_lname_th"];
            var con_position_th = data.results[i]["con_position_th"];
            var con_position_en = data.results[i]["con_position_en"];

            result += "<tr>";
            result += "<td>" + con_id + "</td>";        
            result += "<td>" + con_fname_th + "</td>";
            result += "<td>" + con_lname_th + "</td>";
            
            result += "<td><a href='javascript:cus_bill_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_bill_contact_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_bill_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          

          $("#contact_modal .modal-body").html(result);
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_bill_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_bill_cus_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_bill_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#contact_modal .modal-body").html(result);
        }          
    });    
  }


  function cus_main_search_district_modal() {
    current_district_id = $('#id_cus_main_select_district_id').val();
    search_district_option = $('#id_cus_main_cus_district_option').val();
    search_district_text = $('#id_cus_main_cus_district_search_text').val();

    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          city_name : search_district_text,
          search_district_option : search_district_option,          
          search_district_text : search_district_text,
          current_district_id : current_district_id,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_main_cus_district_option' class='form-control form-control-sm' required id='id_cus_main_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_district_search_text' name='cus_main_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_main_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var city_name_th = data.results[i]["city_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_en = data.results[i]["city_en"];
            var country_name_th = data.results[i]["country_name_th"];
            var country_name_en = data.results[i]["country_name_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";
            
            //result += "<td><a href='javascript:cus_main_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
            result += "<td><a href='javascript:cus_main_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_main_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_main_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_main_cus_district_option' class='form-control form-control-sm' required id='id_cus_main_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_district_search_text' name='cus_main_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_main_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#districtmodal .modal-body").html(result);
        }          
    });
  }

  function cus_site_search_district_modal() {
    current_district_id = $('#id_cus_site_select_district_id').val();
    search_district_option = $('#id_cus_site_cus_district_option').val();
    search_district_text = $('#id_cus_site_cus_district_search_text').val();

    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          city_name : search_district_text,
          search_district_option : search_district_option,          
          search_district_text : search_district_text,
          current_district_id : current_district_id,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var city_name_th = data.results[i]["city_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_en = data.results[i]["city_en"];
            var country_name_th = data.results[i]["country_name_th"];
            var country_name_en = data.results[i]["country_name_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";
            
            //result += "<td><a href='javascript:select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
            result += "<td><a href='javascript:select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#districtmodal .modal-body").html(result);
        }          
    });
  }

  function cus_bill_search_district_modal() {
    current_district_id = $('#id_cus_bill_select_district_id').val();
    search_district_option = $('#id_cus_bill_cus_district_option').val();
    search_district_text = $('#id_cus_bill_cus_district_search_text').val();

    //alert(current_district_id);

    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          city_name : search_district_text,
          search_district_option : search_district_option,          
          search_district_text : search_district_text,
          current_district_id : current_district_id,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_bill_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_bill_cus_district_option' class='form-control form-control-sm' required id='id_cus_bill_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_district_search_text' name='cus_bill_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_bill_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var city_name_th = data.results[i]["city_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_en = data.results[i]["city_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";
            
            result += "<td><a href='javascript:cus_bill_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_bill_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_bill_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_bill_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_bill_cus_district_option' class='form-control form-control-sm' required id='id_cus_bill_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_district_search_text' name='cus_bill_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_bill_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#districtmodal .modal-body").html(result);
        }          
    });
  }

  //function cus_main_select_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en) {
  function cus_main_select_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en, country_name_th, country_name_en) {
    $("#id_cus_main_cus_district_dist_th").val(dist_name_th);
    $("#id_cus_main_select_district_id").val(dist_id);
    $("#id_cus_main_cus_city_th").val(city_name_th);
    $("#id_cus_main_cus_district_en").val(dist_name_en);
    $("#id_cus_main_cus_city_en").val(city_name_en);    
    $("#id_cus_main_cus_country_th").val(country_name_th);
    $("#id_cus_main_cus_country_en").val(country_name_en);

    $("#districtmodal").modal("hide");    
  };

  function select_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en, country_name_th, country_name_en) {        
    $("#id_cus_site_cus_district_dist_th").val(dist_name_th);
    $("#id_cus_site_select_district_id").val(dist_id);
    $("#id_cus_site_cus_city_th").val(city_name_th);
    $("#id_cus_site_cus_district_en").val(dist_name_en);
    $("#id_cus_site_cus_city_en").val(city_name_en);
    $("#id_cus_site_cus_country_th").val(country_name_th);
    $("#id_cus_site_cus_country_en").val(country_name_en);
    $("#districtmodal").modal("hide");    
  }

  function cus_bill_select_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en) {        
    $("#id_cus_bill_cus_district_dist_th").val(dist_name_th);
    $("#id_cus_bill_select_district_id").val(dist_id);
    $("#id_cus_bill_cus_city_th").val(city_name_th);
    $("#id_cus_bill_cus_district_en").val(dist_name_en);
    $("#id_cus_bill_cus_city_en").val(city_name_en);

    // Get Country
    $.ajax({
      url : "/customer/ajax/get_country/",
      type : 'get',
      dataType: 'json',
      data : {          
        dist_id : dist_id,
      },
      success : function(json) {        
        var country_th = json.country_th;
        var country_en = json.country_en;
        $("#id_cus_bill_cus_country_th").val(country_th);
        $("#id_cus_bill_cus_country_en").val(country_en);
      },
    });

    $("#districtmodal").modal("hide");    
  }

  function get_cus_site_district_lookup(page_no) {
    current_district_id = $('#id_cus_site_select_district_id').val();
    search_district_option = $('#id_cus_site_cus_district_option').val();
    search_district_text = $('#id_cus_site_cus_district_search_text').val();

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_district_id : current_district_id,
          search_district_option : search_district_option,
          search_district_text : search_district_text,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_name_th = data.results[0]["dist_th"];

          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'District ID' %}</th>";
          result += "     <th scope='col'>{% trans 'District' %}</th>";
          result += "     <th scope='col'>{% trans 'City' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";          

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_th = data.results[i]["city_th"];            
            var city_name_en = data.results[i]["city_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";

            //result += "<td><a href='javascript:select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\");' type='button' class='btn btn-primary btn-xs'>Selectaaa</a></td>";
            result += "<td><a href='javascript:cus_main_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select333</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          //var instance = JSON.parse(data.paginator);

          if(data.is_paginated) {
            //alert(data.current_page + " | " + data.current_page_number + " | " + data.current_page_paginator_num_pages);

            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          $("#districtmodal .modal-body").html("error");
        }          
    });

  }

  function get_site_contact_lookup(page_no) {
    current_contact_id = $('#id_cus_site_select_site_contact_id').val();
    search_contact_option = $('#id_cus_site_cus_contact_option').val();
    search_contact_text = $('#id_cus_site_cus_contact_search_text').val();

    $.ajax({
        url : "/customer/ajax/get_contact_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_contact_id : current_contact_id,
          search_contact_option : search_contact_option,
          search_contact_text : search_contact_text,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var con_id = data.results[0]["con_id"];
          var con_fname_th = data.results[0]["con_fname_th"];

          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Searchaa</a>";            
          result += "</form>";
          result += "</div>";

          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
          result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
          result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";          

          for(var i=0; i<count; i++) {              
            var con_id = data.results[i]["con_id"];
            var con_fname_th = data.results[i]["con_fname_th"];
            var con_lname_th = data.results[i]["con_lname_th"];

            result += "<tr>";
            result += "<td>" + con_id + "</td>";        
            result += "<td>" + con_fname_th + "</td>";
            result += "<td>" + con_lname_th + "</td>";

            result += "<td><a href='javascript:cus_site_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {

            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_site_contact_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_site_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#contact_modal .modal-body").html(result);          
        },
        error: function(data){
          $("#contact_modal .modal-body").html("error");
        }        
    });

  }

  $(document).ready(function(){
    $("#id_customer_group_id").change(function(){         
      $(".groupIDTextBox").val($("#id_customer_group_id option:selected").html());
    });

    $("#id_cus_main_business_type_temp").change(function(){         
      $(".businessTypeTextBox").val($("#id_cus_main_business_type_temp option:selected").html());
    });

    $("#selectCustoemrOptionGroup1").change(function(){         
      $(".group1TextBox").val($("#selectCustoemrOptionGroup1 option:selected").html());
    });

    $("#selectCustoemrOptionGroup2").change(function(){         
      $(".group2TextBox").val($("#selectCustoemrOptionGroup2 option:selected").html());
    });

  });

</script>


{% endblock %}
