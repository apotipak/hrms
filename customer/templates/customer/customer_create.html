{% extends "page_generic.html" %}

{% load i18n %}
{% load static %}
{% load widget_tweaks %}

{% block title %}{{ page_title}} - {% trans 'Manage Customer' %} {% endblock %}

{% block content %}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  
  <!-- SEARCH -->  
  <div class="content-header pt-2" style="padding:0">
    <form id="customer_code_form" method="POST">
    {% csrf_token %}

    <div class="">
      <div class="row mb-2">
        <div class="col-8 offset-2">
          <div class="form-row">
            <div class="col-3 mt-1 text-nowrap text-right"><strong>Customer Code</strong>&nbsp;&nbsp;&nbsp;</div>
            <div class="col-3"><input type="number" name="cus_id" class="form-control form-control-md" required="" id="id_cus_id" maxlength="4" placeholder="ID" autocomplete="off" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"></div>
            <div class="col-3"><input type="number" name="cus_brn" class="form-control form-control-md" id="id_cus_brn" maxlength="3" placeholder="BRANCH" autocomplete="off" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"></div>
            <div class="col-3"><button id="customer_lookup" type="button" class="btn btn-outline-primary btn-md" data-toggle="modal" data-url="{% url 'get_customer_list' %}"><i class="fas fa-search fa-md"></i></button></div>
          </div>
        </div>
      </div>
    </div>

    </form>
  </div>
  <!-- SEARCH -->


  <!-- Main content -->  
  <section class="content" id="main-content">

    <!-- TEST -->
    <div class="card card-default" style="background-color: #018349;">

      <!-- PAGE TITLE -->
      <div class="card-header" style="padding:8px 15px 4px 4px;">        
        <h1 class="card-title"><span id="customer_name_title"><button type='button' class='btn text-light' style="background-color: #018349;"><span style='font-size:18px;font-weight:bold;'>CUSTOMER</span></button></span></h1>

        <div class="float-right pt-1 pr-1">
          <button id="cancelSaveAllCustomerTabs" type="button" class="btn btn-sm btn-outline-light pull-right">Cancel</button>
          <button id="saveAllCustomerTabs" type="button" class="btn btn-sm btn-outline-light">&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}&nbsp;&nbsp;&nbsp;&nbsp;</button>
        </div>

      </div>
      <!-- PAGE TITLE -->


      <!-- BODY -->
      <div class="card-body" style="background-color: #a6caae; padding:4px 2px 2px 2px;">
        <div class="row">
          <div class="col-12">

            <!-- Tab Header -->
            <ul class="nav nav-tabs active text-dark col-12 p-0" id="myTab" role="tablist">
              <li class="nav-item active col-4 text-center"><a class="nav-link text-dark active" id="mainoffice-tab" data-toggle="tab" href="#mainoffice" role="tab" aria-controls="mainoffice"><b>{% trans 'Main Office' %}</b></a></li>
              <li class="nav-item col-4 text-center w-100"><a class="nav-link text-dark" id="site-tab" data-toggle="tab" href="#site" role="tab" aria-controls="site"><b>{% trans 'Site' %}</b></a></li>
              <li class="nav-item col-4 text-center"><a class="nav-link text-dark" id="billing-tab" data-toggle="tab" href="#billing" role="tab" aria-controls="billing"><b>{% trans 'Billing' %}</b></a></li>
            </ul>
            <!-- Tab Header -->


            <!-- Tab Content -->
            <div class="tab-content bg-white" id="customerContent" style="padding:2px 5px 2px 5px;">



              
              
              <!-- Main Office Tab -->              
              <div class="tab-pane fade show active" id="mainoffice" role="tabpanel" aria-labelledby="mainoffice-tab">

                <form id="cus_main_form" method="POST">
                {% csrf_token %}


                <div class="clearfix">
                  <div class="float-left">&nbsp;</div>
                  <div class="float-right">
                  
                    <div class="mailbox-controls">
                      <div class="btn-group">
                        <button id="btnCopyToSite" type="button" class="btn btn-outline-primary btn-sm"><i class="far fa-copy"></i>&nbsp;&nbsp;Copy to Site</button>
                        &nbsp;&nbsp;
                        <button id="btnCopyToBill" type="button" class="btn btn-outline-primary btn-sm"><i class="far fa-copy"></i>&nbsp;&nbsp;Copy to Bill</button>
                      </div>

                      <div class="float-right">
                        &nbsp;&nbsp;&nbsp;
                        <div class="btn-group">
                          <label class="switch">                                 
                            {% if cus_main.cus_active|default_if_none:0 %}
                            <input type="checkbox" id="id_cus_main_cus_active" name="cus_main_cus_active" value=1 checked>
                            {% else %}
                            <input type="checkbox" id="id_cus_main_cus_active" name="cus_main_cus_active" value=0>
                            {% endif %}                  
                            <div class="slider"></div>
                          </label>  
                        </div>
                      </div>
                    </div>

                  </div>


                </div>   




            <div class="container-fluid">
              
                <!-- Main Office Tab Thai -->            
                <div class="row">
                  <div class="col-md-6 float-left pb-2">
                    <div class="card card-secondary">
                      
                      <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                        <h1 class="card-title text-dark pt-1"><strong>TH</strong></h1>
                      </div>

                      <div class="card-body" style="padding:8px 0 0 0; background-color: #eee;">
                        <div class="form-group">
                          <div class="input-group">
                            <label for="id_cus_main_cus_name_th" class="col-sm-4 col-form-label"><span class='text-danger'>*</span>&nbsp;{% trans 'Customer Name' %}</label>
                            <div class="col-sm-8"><input type="text" class="form-control form-control-sm" id="id_cus_main_cus_name_th" name="cus_main_cus_name_th" value="{{ cus_main.cus_name_th }}"></div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_add1_th" class="col-sm-4 col-form-label">{% trans 'Address' %}</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add1_th" name="cus_main_cus_add1_th" value="{{ cus_main.cus_add1_th|default_if_none:''}}" autocomplete="off">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add2_th" name="cus_main_cus_add2_th" value="{{ cus_main.cus_add2_th|default_if_none:''}}" autocomplete="off">
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_subdist_th" class="col-sm-4 col-form-label">{% trans 'Sub-District' %}</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_subdist_th" name="cus_main_cus_subdist_th" value="{{ cus_main.cus_subdist_th|default_if_none:'' }}" autocomplete="off">
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_disrict" class="col-sm-4 col-form-label">{% trans 'District' %}</label>
                            <div class="col-sm-8">                            
                              <div class="row">                              
                                <div class="col-12 input-group">
                                  <input type="text" id="id_cus_main_cus_district_dist_th" name="cus_main_cus_district_dist_th" class="form-control form-control-sm" value="" readonly>
                                  <button id="cus_main_district_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_district_list' %}"><i class="fas fa-search fa-sm"></i></button>
                                  <input type="hidden" id="id_cus_main_select_district_id" name="cus_main_select_district_id" value="">
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_city_th" class="col-sm-4 col-form-label">{% trans 'City' %}</label>
                            <div class="col-sm-8"><input type="text" id="id_cus_main_cus_city_th" name="cus_main_cus_city_th" class="form-control form-control-sm" value="{{ cus_main.cus_city }}" readonly></div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_country_th" class="col-sm-4 col-form-label">{% trans 'Country' %}</label>
                            <div class="col-sm-8"><input type="text" id="id_cus_main_cus_country_th" name="cus_main_cus_country_th" class="form-control form-control-sm" value="{{ cus_main.cus_city }}" readonly></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Main Office Tab English -->
                  <div class="col-md-6 float-right">
                    <div class="card card-secondary" style="background-color: #eee;">

                      <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                        <h1 class="card-title text-dark pt-1"><strong>EN</strong></h1>
                      </div>
                      
                      <div class="card-body" style="padding:8px 0 0 0;">
                        <div class="form-group">
                          
                          <div class="input-group">
                            <label for="id_cus_main_cus_name_en" class="col-sm-4 col-form-label">{% trans 'Customer Name' %}</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_name_en" name="cus_main_cus_name_en" value="{{ cus_main.cus_name_en }}">
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_add1_en" class="col-sm-4 col-form-label">{% trans 'Address' %}</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add1_en" name="cus_main_cus_add1_en" value="{{ cus_main.cus_add1_en|default_if_none:''}}" autocomplete="off">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_add2_en" name="cus_main_cus_add2_en" value="{{ cus_main.cus_add2_en|default_if_none:''}}" autocomplete="off">
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_subdist_en" class="col-sm-4 col-form-label">{% trans 'Sub-District' %}</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_subdist_en" name="cus_main_cus_subdist_en" value="{{ cus_main.cus_subdist_en|default_if_none:'' }}" autocomplete="off">
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_disrict_en" class="col-sm-4 col-form-label">{% trans 'District' %}</label>
                            <div class="col-sm-8">
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_district_en" name="cus_main_cus_district_dist_en" value="" readonly>
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_city_en" class="col-sm-4 col-form-label">{% trans 'City' %}</label>
                            <div class="col-sm-8">                                                                              
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_city_en" name="cus_main_cus_city_city_en" value="" readonly>
                            </div>
                          </div>

                          <div class="input-group">
                            <label for="id_cus_main_cus_country_en" class="col-sm-4 col-form-label">{% trans 'Country' %}</label>
                            <div class="col-sm-8">                          
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_country_en" name="cus_main_cus_country_en" value="" readonly>
                            </div>
                          </div>
                        </div>                    
                      </div>
                    </div>
                  </div>
                  <!-- Main Office Tab English -->
                </div>




                <!-- Main Office Tab Others -->
                <div class="row">

                  <div class="col-md-12 pb-2">
                    <div class="card card-info">
                      <div class="card-body" style="padding:0 8px 0 8px; background-color: #eee;"> 

                        <div class="form-row">
                          
                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_zip">{% trans 'Zip' %}</label>
                            {% if cus_main_form.cus_main_cus_zip.errors %}                
                                                        
                              <input type="text" class="form-control form-control-sm is-invalid" id="id_cus_main_cus_zip" name="cus_main_cus_zip" value="{{ cus_main.cus_zip|default_if_none:'' }}">

                              {% for error in cus_main_form.cus_main_cus_zip.errors %}
                              <div class="invalid-feedback">
                                {{error}}
                              </div>
                              {% endfor %}
                            {% else %}
                              <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_zip" name="cus_main_cus_zip" value="{{ cus_main.cus_zip|default_if_none:'' }}">
                            {% endif %}
                          </div>

                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_tel">{% trans 'Phone' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_tel" name="cus_main_cus_tel" value="{{ cus_main.cus_tel|default_if_none:'' }}">
                          </div>

                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_fax">{% trans 'Fax' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_fax" name="cus_main_cus_fax" value="{{ cus_main.cus_fax|default_if_none:'' }}">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_email">{% trans 'Email' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_email" name="cus_main_cus_email" value="{{ cus_main.cus_email|default_if_none:'' }}" autocomplete="off">
                          </div>

                          <!-- Main Office Zone -->
                          <div class="form-group col-md-3">
                            <label for="cus_main_cus_zone">{% trans 'Zone' %}</label>
                              {% render_field customer_code_create_form.cus_main_cus_zone class="form-control col-sm-12 form-control-sm" %}
                          </div>
                          
                        </div>


                        <!-- Business Type -->
                        <div class="form-row">

                          <div class="form-group col-md-3">
                            <label for="id_customer_group_id">{% trans 'Group ID' %}</label>                          
                            <div class="container">
                              {% render_field customer_code_create_form.customer_group_id class="selectGroupID" %}
                              <input type="text" class="groupIDTextBox" id="id_customer_group_id_text" name="customer_group_id_text" />
                            </div>                        
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_business_type">{% trans 'Business Type' %}</label>                          
                            <div class="container">
                              {% render_field customer_code_create_form.customer_option_btype class="selectBusinessType" %}
                              <input class="businessTypeTextBox" id="id_cus_main_business_type" name="cus_main_business_type" value="{{customer_option.btype|default_if_none:''}}" />
                            </div>                        
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_group_1">{% trans 'Group 1' %}</label>                          
                            <div class="container">
                              {% render_field customer_code_create_form.customer_option_op2 class="selectBusinessType" %}
                              <input class="group1TextBox" id="id_cus_main_customer_option_op2" name="cus_main_customer_option_op2" value="{{customer_option.op2|default_if_none:''}}" />
                            </div>                        
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_group_2">{% trans 'Group 2' %}</label>                          
                            <div class="container">
                              {% render_field customer_code_create_form.customer_option_op3 class="selectBusinessType" %}
                              <input class="group2TextBox" id="id_cus_main_customer_option_op3" name="cus_main_customer_option_op3" value="{{customer_option.op3|default_if_none:''}}" />
                            </div>
                          </div>
                        </div>


                        <div class="form-row">

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_customer_option_op1">{% trans 'Status' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_customer_option_op1" name="cus_main_customer_option_op1" value="{{ customer_option.op1.strip }}" autocomplete="off">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_customer_option_op4" class="text-danger">{% trans 'A/R Code' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_customer_option_op4" name="cus_main_customer_option_op4" value="{{ customer_option.op4.strip }}">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_customer_option_opn1" class="text-danger">{% trans 'GP Margin' %}</label>                        
                            <input type="number" name="cus_main_customer_option_opn1" min="0" value="0.00" class="form-control form-control-sm" id="id_cus_main_customer_option_opn1">                        
                          </div>

                        </div>


                      </div>
                    </div>
                  </div>
                  
                </div>


                <!-- Main Office Tab - Contact Information -->
                <div class="row pb-2">
                  <div class="col-md-12">

                    <div class="card">
                      <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                        <h1 class="card-title pt-1"><strong>Contact Information</strong></h1>
                      </div>
                      
                      <div class="card-body" style="padding:5px 8px 0 8px; background-color: #eee;">

                        <div class="form-row">
                          
                          <div class="form-group col-md-2">

                            <label for="id_cus_site_site_contact_id">{% trans 'Contact ID' %}</label>
                            <div class="row">
                              <div class="col-12 input-group">
                                <input type="text" id="id_cus_main_cus_contact_id" name="cus_main_cus_contact_id" class="form-control form-control-sm" value="0" readonly>
                                <button id="cus_main_contact_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_contact_list' %}"><i class="fas fa-search fa-sm"></i></button>
                                <input type="hidden" id="id_cus_main_select_cus_contact_id" name="cus_main_select_cus_contact_id" value="{{ cus_main.cus_contact_id }}">
                              </div>
                            </div>

                          </div>

                          <div class="form-group col-md-2">
                            <label for="id_cus_main_selected_contact_title">{% trans 'Title (TH)' %}</label>                          
                            <div class="container">

                              <select name="cus_main_cus_contact_title_list" class="form-control form-control-sm" required="" id="id_cus_main_cus_contact_title_list">
                                {% for choice in customer_code_create_form.contact_title_list.field.queryset %}
                                  {% if choice.title_th == 'คุณ' %}
                                  <option value="{{ choice.pk }}" selected>{{ choice.title_th}}</option> 
                                  {% else %}
                                  <option value="{{ choice.pk }}">{{ choice.title_th}}</option> 
                                  {% endif %}
                                {% endfor %}
                              </select>

                            </div>
                          </div>

                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_contact_con_fname_th">{% trans 'First Name (TH)' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_fname_th" name="cus_main_cus_contact_con_fname_th">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_contact_con_lname_th">{% trans 'Last Name (TH)' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_lname_th" name="cus_main_cus_contact_con_fname_th">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_contact_con_position_th">{% trans 'Position (TH)' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_position_th" name="cus_main_cus_contact_con_position_th">
                          </div>

                        </div>
                        




                        <!-- cus_main -->
                        <div class="form-row">
                          
                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_contact_id" class="col-sm-12 col-form-label">{% trans 'Sex' %}</label>

                            <div class="row">                              
                              <div class="col-12 input-group">

                                <div class="form-check form-check-inline pl-1">
                                  <input class="form-check-input" type="radio" name="sexOptions" id="id_sex_male" value="M" checked>
                                  <label class="form-check-label" for="id_sex_male">Male</label>
                                </div>
                                <div class="form-check form-check-inline">
                                  <input class="form-check-input" type="radio" name="sexOptions" id="id_sex_female" value="F">
                                  <label class="form-check-label" for="id_sex_female">Female</label>
                                </div>

                              </div>

                            </div>                          
                          </div>

                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_contact_cus_title_en">{% trans 'Title (EN)' %}</label>                          
                              {% render_field customer_code_create_form.cus_main_cus_contact_cus_title_en class="form-control form-control-sm" %}
                          </div>

                          <div class="form-group col-md-2">
                            <label for="id_cus_main_cus_contact_con_fname_en">{% trans 'First Name (EN)' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_fname_en" name="cus_main_cus_contact_con_fname_en">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_contact_con_lname_en">{% trans 'Last Name (EN)' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_lname_en" name="cus_main_cus_contact_con_lname_en">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_contact_con_position_en">{% trans 'Position (EN)' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_position_en" name="cus_main_cus_contact_con_position_en">
                          </div>

                        </div>
                        




                        <div class="form-row">
                          
                          <div class="form-group col-md-2">

                            <label for="id_cus_main_cus_contact_cus_title_en">{% trans 'Nationality' %}</label>                          
                            <select name="cus_main_cus_contact_nation_list" class="form-control form-control-sm" required="" id="id_cus_main_cus_contact_nation_list">
                              {% for choice in customer_code_create_form.contact_nation_list.field.queryset %}
                                {% if choice.nation_th == "ไทย" %}
                                <option value="{{ choice.pk }}" selected>{{ choice.nation_th}}</option> 
                                {% else %}
                                <option value="{{ choice.pk }}">{{ choice.nation_th}}</option> 
                                {% endif %}
                              {% endfor %}
                            </select>

                          </div>


                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_contact_con_mobile">{% trans 'Mobile' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_mobile" name="cus_main_cus_contact_con_mobile">
                          </div>

                          <div class="form-group col-md-3">
                            <label for="id_cus_main_cus_contact_con_email">{% trans 'Email' %}</label>
                            <input type="text" class="form-control form-control-sm" id="id_cus_main_cus_contact_con_email" name="cus_main_cus_contact_con_email">
                          </div>

                        </div>
                        


                      </div>
                    </div>
                  </div>
                </div>
                </form>

              </div>
            </div>              




















            

            <!-- Site Tab -->          
            <div class="tab-pane" id="site" role="tabpanel" aria-labelledby="site-tab">

            <form id="cus_site_form" method="POST" action="{% url 'update_cus_site' %}">
            {% csrf_token %}



            <div class="clearfix">
              <div class="float-left">&nbsp;</div>
              <div class="float-right">

                <div class="mailbox-controls">
                  <div class="btn-group">
                    <button id="btnSiteCopyToBill" type="button" class="btn btn-outline-primary btn-sm"><i class="far fa-copy"></i>&nbsp;&nbsp;Copy to Bill</button>
                  </div>

                  <div class="float-right">
                    &nbsp;&nbsp;&nbsp;
                    <div class="btn-group">
                      <label class="switch">                                 
                        {% if cus_main.cus_active|default_if_none:0 %}
                        <input type="checkbox" id="id_cus_site_cus_active" name="cus_site_cus_active" value=1 checked>
                        {% else %}
                        <input type="checkbox" id="id_cus_site_cus_active" name="cus_site_cus_active" value=0>
                        {% endif %}                  
                        <div class="slider"></div>
                      </label>  
                    </div>
                  </div>

                </div>

              </div>
            </div>            

            
            <div class="container-fluid">
              
              <div class="row">

                <!-- Site Tab Thai -->
                <div class="col-md-6">
                  
                  <div class="card card-secondary" style="background-color: #eee;">
                    <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                      <h1 class="card-title text-dark pt-1"><strong>TH</strong></h1>
                    </div>

                    <div class="card-body">

                      <div class="form-group">  

                        <div class="input-group">
                          <label for="id_cus_site_cus_name_th" class="col-sm-4 col-form-label">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_name_th" name="cus_site_cus_name_th" value="{{ customer.cus_name_th|default_if_none:'' }}">

                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_add1_th" class="col-sm-4 col-form-label">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add1_th" name="cus_site_cus_add1_th" value="{{ customer.cus_add1_th|default_if_none:'' }}" autocomplete="off">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add2_th" name="cus_site_cus_add2_th" value="{{ customer.cus_add2_th|default_if_none:'' }}" autocomplete="off">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_subdist_th" class="col-sm-4 col-form-label">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_subdist_th" name="cus_site_cus_subdist_th" value="{{ customer.cus_subdist_th|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_disrict" class="col-sm-4 col-form-label">{% trans 'District' %}</label>

                          <div class="col-sm-8">                            
                            <div class="row">                              
                              <div class="col-12 input-group">
                                <input type="text" id="id_cus_site_cus_district_dist_th" name="cus_site_cus_district_dist_th" class="form-control form-control-sm" value="{{ customer.cus_district|default_if_none:'' }}" readonly>
                                
                                <button id="cus_site_district_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_district_list' %}"><i class="fas fa-search fa-sm"></i></button>

                                <input type="hidden" id="id_cus_site_select_district_id" name="cus_site_select_district_id" />
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_city" class="col-sm-4 col-form-label">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_site_cus_city_th" name="cus_site_cus_city_th" class="form-control form-control-sm" value="" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_country" class="col-sm-4 col-form-label">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_site_cus_country_th" name="cus_site_cus_country_th" class="form-control form-control-sm" value="" readonly>
                          </div>
                        </div>

                      </div>

                    </div>
                  </div>

                </div>
                <!-- Site Tab Thai End -->




                  <!-- Main Office Tab English -->
                  <div class="col-md-6 float-right">
                    <div class="card card-secondary" style="background-color: #eee;">

                      <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                        <h1 class="card-title text-dark pt-1"><strong>EN</strong></h1>
                      </div>

                    <div class="card-body">


                      <div class="form-group">

                        <div class="input-group">
                          <label for="id_cus_site_cus_name_en" class="col-sm-4 col-form-label">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_name_en" name="cus_site_cus_name_th" value="{{ customer.cus_name_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_add1_en" class="col-sm-4 col-form-label">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add1_en" name="cus_site_cus_add1_th" value="{{ customer.cus_add1_en|default_if_none:'' }}">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_add2_en" name="cus_site_cus_add2_th" value="{{ customer.cus_add2_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_subdist_en" class="col-sm-4 col-form-label">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_subdist_en" name="cus_site_cus_subdist_en" value="{{ customer.cus_subdist_en|default_if_none:'' }}">
                          </div>
                        </div>
                        
                        <div class="input-group">
                          <label for="id_cus_site_cus_district_en" class="col-sm-4 col-form-label">{% trans 'District' %}</label>
                          <div class="col-sm-8">
                            
                            <input type="text" id="id_cus_site_cus_district_en" name="cus_site_cus_district_en" class="form-control form-control-sm" value="{{ customer.cus_district.dist_en|default_if_none:'' }}" readonly>
                            
                            <input type="hidden" id="id_cus_site_cus_district_id" name="cus_site_cus_district_id" value="">

                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_city_en" class="col-sm-4 col-form-label">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_site_cus_city_en" name="cus_site_cus_city_en" class="form-control form-control-sm" value="{{ customer.cus_city.city_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_site_cus_country_en" class="col-sm-4 col-form-label">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_site_cus_country_en" name="cus_site_cus_country_en" class="form-control form-control-sm" value="{{ customer.cus_country.country_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>                                          
                    </div>
                  </div>


                </div>
                <!-- Site Tab English -->

              </div>



              <!-- Site Tab Others -->
              <div class="row pt-2">
                <div class="col-md-12">
                  <div class="card card-info">
                    <div class="card-body" style="padding:0 8px 0 8px; background-color: #eee;"> 

                      <div class="form-row">
                        
                        <div class="form-group col-md-2">
                          <label for="id_cus_site_cus_zip">{% trans 'Zip' %}</label>
                          {% if cus_site_form.cus_site_cus_zip.errors %}                
                                                      
                            <input type="text" class="form-control form-control-sm " id="id_cus_site_cus_zip" name="cus_site_cus_zip" value="{{ customer.cus_zip|default_if_none:'' }}">

                          {% else %}
                            <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_zip" name="cus_site_cus_zip" value="{{ customer.cus_zip|default_if_none:'' }}">
                          {% endif %}

                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_cus_tel">{% trans 'Phone' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_tel" name="cus_site_cus_tel" value="{{ customer.cus_tel|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_cus_fax">{% trans 'Fax' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_fax" name="cus_site_cus_fax" value="{{ customer.cus_fax|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_cus_email">{% trans 'Email' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_cus_email" name="cus_site_cus_email" value="{{ customer.cus_email|default_if_none:'' }}">
                        </div>

                        <!-- Site Zone -->
                        <div class="form-group col-md-3">
                          <label for="cus_site_cus_zone">{% trans 'Zone' %}</label>
                          {% render_field customer_code_create_form.cus_site_cus_zone class="form-control col-sm-12 form-control-sm" %}
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>



              <!-- Site Tab - Contact Information -->
              <div class="row pt-2 pb-2">
                <div class="col-md-12">
                  <div class="card card-info">

                    <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                      <h1 class="card-title pt-1 text-dark"><strong>Contact Information</strong></h1>
                    </div>
                    
                    <div class="card-body" style="padding:5px 8px 0 8px; background-color: #eee;">

                      <div class="form-row">
                        


                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_id">{% trans 'Contact ID' %}</label>

                          <div class="row">                              
                            <div class="col-12 input-group">
                              <input type="text" id="id_cus_site_site_contact_id" name="cus_site_site_contact_id" class="form-control form-control-sm" value="0" readonly>                              
                              <button id="cus_site_contact_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_contact_list' %}"><i class="fas fa-search fa-sm"></i></button>                              
                              <input type="hidden" id="id_cus_site_select_site_contact_id" name="cus_site_select_site_contact_id" value="{{ customer.site_contact_id }}">
                            </div>
                          </div>                          
                        </div>






                        <div class="form-group col-md-2">
                          <label for="id_cus_site_selected_contact_title">{% trans 'Title (TH)' %}</label>                          
                          <div class="container">

                            <select name="cus_site_cus_contact_title_list" class="form-control form-control-sm" required="" id="id_cus_site_cus_contact_title_list">
                              {% for choice in customer_code_create_form.contact_title_list.field.queryset %}
                              {% if choice.title_th == "คุณ" %}
                                <option value="{{ choice.pk }}" selected>{{ choice.title_th}}</option> 
                              {% else %}
                                <option value="{{ choice.pk }}">{{ choice.title_th}}</option> 
                              {% endif %}
                              {% endfor %}
                            </select>

                          </div>
                        </div>


                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_fname_th">{% trans 'First Name (TH)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_fname_th" name="cus_site_site_contact_fname_th">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_lname_th">{% trans 'Last Name (TH)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_lname_th" name="cus_site_site_contact_fname_th">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_position_th">{% trans 'Position (TH)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_position_th" name="cus_site_site_contact_position_th">
                        </div>
                      </div>
                      


                        <!-- cus_site -->
                      <div class="form-row">
                        
                        <div class="form-group col-md-2">
                          <label for="cus_site_sex_options">{% trans 'Sex' %}</label>

                          <div class="row">                              
                            <div class="col-12 input-group">

                              <div class="form-check form-check-inline pl-1">
                                <input class="form-check-input" type="radio" name="cus_site_sex_options" id="id_cus_site_sex_male" value="M" checked>
                                <label class="form-check-label" for="id_cus_site_sex_male">Male</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="cus_site_sex_options" id="id_cus_site_sex_female" value="F">
                                <label class="form-check-label" for="id_cus_site_sex_female">Female</label>
                              </div>

                            </div>

                          </div>                          
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_cus_title_en">{% trans 'Title (EN)' %}</label>                    
                            {% render_field customer_code_create_form.cus_site_site_contact_cus_title_en class="form-control form-control-sm" %}
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_site_site_contact_con_fname_en">{% trans 'First Name (EN)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_con_fname_en" name="cus_site_site_contact_con_fname_en">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_con_lname_en">{% trans 'Last Name (EN)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_con_lname_en" name="cus_site_cus_contact_con_lname_en">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_con_position_en">{% trans 'Position (EN)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_con_position_en" name="cus_site_cus_contact_con_position_en">
                        </div>

                      </div>
                      

                      <div class="form-row">
                        
                        <div class="form-group col-md-2">

                          <label for="id_cus_site_site_contact_cus_title_en">{% trans 'Nationality' %}</label>                          
                          <select name="cus_site_site_contact_nation_list" class="form-control form-control-sm" required="" id="id_cus_site_site_contact_nation_list">
                            {% for choice in customer_code_create_form.contact_nation_list.field.queryset %}
                            {% if choice.nation_th == "ไทย" %}
                              <option value="{{ choice.pk }}" selected>{{ choice.nation_th}}</option> 
                            {% else %}
                              <option value="{{ choice.pk }}">{{ choice.nation_th}}</option> 
                            {% endif %}
                            {% endfor %}
                          </select>

                        </div>


                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_con_mobile">{% trans 'Mobile' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_con_mobile" name="cus_site_site_contact_con_mobile">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_con_email">{% trans 'Email' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_site_site_contact_con_email" name="cus_site_site_contact_con_email">
                        </div>

                      </div>


                    </div>


                  </div>
                </div>
              </div>

            </form>

            </div>

              </div>








              <!-- Billing Tab -->
              <div class="tab-pane fade" id="billing" role="tabpanel" aria-labelledby="billing-tab">


                <div class="clearfix">
                  <div class="float-left">&nbsp;</div>
                  <div class="float-right">

                    <div class="mailbox-controls">
                      <div class="btn-group">
                        &nbsp;
                      </div>

                      <div class="float-right">
                        &nbsp;&nbsp;&nbsp;
                        <div class="btn-group">

                          <label class="switch">                                 
                            {% if cus_bill.cus_active|default_if_none:0 %}
                            <input type="checkbox" id="id_cus_bill_cus_active" name="cus_bill_cus_active" value=1 checked>
                            {% else %}
                            <input type="checkbox" id="id_cus_bill_cus_active" name="cus_bill_cus_active" value=0>
                            {% endif %}                  
                            <div class="slider"></div>
                          </label>

                        </div>
                      </div>

                    </div>

                  </div>
                </div>            




            <div class="container-fluid">


            <form id="cus_bill_form" method="POST" action="{% url 'update_cus_bill' %}">
            {% csrf_token %}

              <div class="row">

                <!-- Billing Tab Thai -->
                <div class="col-md-6">

                  <div class="card card-secondary" style="background-color: #eee;">
                    <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                      <h1 class="card-title text-dark pt-1"><strong>TH</strong></h1>
                    </div>

                    <div class="card-body">

                      <div class="form-group">  

                        <div class="input-group">
                          <label for="id_cus_bill_cus_name_th" class="col-sm-4 col-form-label">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_name_th" name="cus_bill_cus_name_th" value="{{ cus_bill.cus_name_th|default_if_none:'' }}">

                          </div>
                        </div>



                        <div class="input-group">
                          <label for="id_cus_bill_cus_add1_th" class="col-sm-4 col-form-label">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add1_th" name="cus_bill_cus_add1_th" value="{{ cus_bill.cus_add1_th|default_if_none:'' }}" autocomplete="off">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add2_th" name="cus_bill_cus_add2_th" value="{{ cus_bill.cus_add2_th|default_if_none:'' }}" autocomplete="off">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_subdist_th" class="col-sm-4 col-form-label">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_subdist_th" name="cus_bill_cus_subdist_th" value="{{ cus_bill.cus_subdist_th|default_if_none:'' }}">
                          </div>
                        </div>



                        <div class="input-group">
                          <label for="id_cus_bill_cus_disrict" class="col-sm-4 col-form-label">{% trans 'District' %}</label>

                          <div class="col-sm-8">                            
                            <div class="row">                              
                              <div class="col-12 input-group">
                                <input type="text" id="id_cus_bill_cus_district_dist_th" name="cus_bill_cus_district_dist_th" class="form-control form-control-sm" value="{{ cus_bill.cus_district|default_if_none:'' }}" readonly>
                                
                                <button id="cus_bill_district_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_district_list' %}"><i class="fas fa-search fa-sm"></i></button>

                                <input type="hidden" id="id_cus_bill_select_district_id" name="cus_bill_select_district_id" value="{{ cus_bill.cus_district_id|default_if_none:'' }}">
                              </div>
                            </div>
                          </div>
                        </div>

                        <!-- cus_bill_cus_city_th-->
                        <div class="input-group">
                          <label for="id_cus_bill_cus_city_th" class="col-sm-4 col-form-label">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_bill_cus_city_th" name="cus_bill_cus_city_th" class="form-control form-control-sm" value="{{ cus_bill.cus_city.city_th|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_country_th" class="col-sm-4 col-form-label">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_bill_cus_country_th" name="cus_bill_cus_country_th" class="form-control form-control-sm" value="{{ cus_bill.cus_country|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>

                    </div>
                  </div>

                </div>
                <!-- Billing Tab Thai End -->

                <!-- Billing Tab English -->
                <div class="col-md-6">
                  <div class="card card-secondary" style="background-color: #eee;">
                    <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                      <h1 class="card-title text-dark pt-1"><strong>EN</strong></h1>
                    </div>


                    <div class="card-body">



                      <div class="form-group">

                        <div class="input-group">
                          <label for="id_cus_bill_cus_name_en" class="col-sm-4 col-form-label">{% trans 'Customer Name' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_name_en" name="cus_bill_cus_name_en" value="{{ cus_bill.cus_name_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_add1_en" class="col-sm-4 col-form-label">{% trans 'Address' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add1_en" name="cus_bill_cus_add1_en" value="{{ cus_bill.cus_add1_en|default_if_none:'' }}">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_add2_en" name="cus_bill_cus_add2_en" value="{{ cus_bill.cus_add2_en|default_if_none:'' }}">
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_subdist_en" class="col-sm-4 col-form-label">{% trans 'Sub-District' %}</label>
                          <div class="col-sm-8">
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_subdist_en" name="cus_bill_cus_subdist_en" value="{{ cus_bill.cus_subdist_en|default_if_none:'' }}">
                          </div>
                        </div>
                        
                        <div class="input-group">
                          <label for="id_cus_bill_cus_district_en" class="col-sm-4 col-form-label">{% trans 'District' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_bill_cus_district_en" name="cus_bill_cus_district_en" class="form-control form-control-sm" value="{{ cus_bill.cus_district.dist_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_city_en" class="col-sm-4 col-form-label">{% trans 'City' %}</label>
                          <div class="col-sm-8">                            
                            <input type="text" id="id_cus_bill_cus_city_en" name="cus_bill_cus_city_en" class="form-control form-control-sm" value="{{ cus_bill.cus_city.city_en|default_if_none:'' }}" readonly>                            
                          </div>
                        </div>

                        <div class="input-group">
                          <label for="id_cus_bill_cus_country_en" class="col-sm-4 col-form-label">{% trans 'Country' %}</label>
                          <div class="col-sm-8">                                                    
                            <input type="text" id="id_cus_bill_cus_country_en" name="cus_bill_cus_country_en" class="form-control form-control-sm" value="{{ cus_bill.cus_country.country_en|default_if_none:'' }}" readonly>
                          </div>
                        </div>

                      </div>                                          
                    </div>
                  </div>


                </div>
                <!-- Billing Tab English -->

              </div>



              <!-- Bill Tab - Others -->
              <div class="row pt-2">
                <div class="col-md-12">
                
                  <div class="card card-info">
                    
                    <div class="card-body" style="padding:0 8px 0 8px; background-color: #eee;"> 

                      <div class="form-row">
                        
                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_zip">{% trans 'Zip' %}</label>
                          {% if cus_bill_form.cus_bill_cus_zip.errors %}                
                                                      
                            <input type="text" class="form-control form-control-sm " id="id_cus_bill_cus_zip" name="cus_bill_cus_zip" value="{{ cus_bill.cus_zip|default_if_none:'' }}">

                          {% else %}
                            <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_zip" name="cus_bill_cus_zip" value="{{ cus_bill.cus_zip|default_if_none:'' }}">
                          {% endif %}

                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_tel">{% trans 'Phone' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_tel" name="cus_bill_cus_tel" value="{{ cus_bill.cus_tel|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_fax">{% trans 'Fax' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_fax" name="cus_bill_cus_fax" value="{{ cus_bill.cus_fax|default_if_none:'' }}">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_email">{% trans 'Email' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_email" name="cus_bill_cus_email" value="{{ cus_bill.cus_email|default_if_none:'' }}">
                        </div>


                        <!-- Billing Zone -->
                        <div class="form-group col-md-3">
                          <label for="cus_bill_cus_zone">{% trans 'Zone' %}</label>
                          {% render_field customer_code_create_form.cus_bill_cus_zone class="form-control col-sm-12 form-control-sm" %}
                        </div>




                        {% comment %}
                        <div class="form-group col-md-3">
                          <label for="cus_main_cus_zone">{% trans 'Zone' %}</label>
                          {% if cus_bill_form.cus_bill_cus_zone.errors %}                
                            {% render_field cus_bill_form.cus_bill_cus_zone class="form-control col-sm-12 form-control-sm is-invalid" %}
                            {% for error in cus_bill_form.cus_bill_cus_zone.errors %}
                            <div class="invalid-feedback">
                              {{error}}
                            </div>
                            {% endfor %}                
                          {% else %}
                            {% render_field cus_bill_form.cus_bill_cus_zone class="form-control col-sm-12 form-control-sm" %}
                          {% endif %}      
                        </div>
                        {% endcomment %}

                      </div>
                    </div>
                  </div>
                </div>
              </div>




              <!-- Bill Tab - Contact Information -->
              <div class="row pt-2 pb-2">
                <div class="col-md-12">
                  <div class="card card-info">
                    <div class="card-header" style="background-color: #DCDCDC; padding:0 0 0 5px;">                        
                      <h1 class="card-title pt-1 text-dark"><strong>Contact Information</strong></h1>
                    </div>
                    
                    <div class="card-body" style="padding:5px 8px 0 8px; background-color: #eee;">

                      <div class="form-row">
                        
                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_id">{% trans 'Contact ID' %}</label>

                          <div class="row">                              
                            <div class="col-12 input-group">
                              <input type="text" id="id_cus_bill_cus_contact_id" name="cus_bill_cus_contact_id" class="form-control form-control-sm" value="{{ cus_bill.cus_contact_id|default_if_none:'' }}" readonly>                              
                              <button id="cus_bill_contact_lookup" type="button" class="btn btn-outline-primary btn-sm" data-toggle="modal" data-url="{% url 'get_contact_list' %}"><i class="fas fa-search fa-sm"></i></button>                              
                              <input type="hidden" id="id_cus_bill_select_bill_contact_id" name="cus_bill_select_bill_contact_id" value="{{ cus_bill.cus_contact_id|default_if_none:'' }}">

                            </div>
                          </div>                          
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_selected_contact_title">{% trans 'Title (TH)' %}</label>                          
                          <div class="container">

                            <select name="cus_bill_cus_contact_title_list" class="form-control form-control-sm" id="id_cus_bill_cus_contact_title_list">
                              {% for choice in customer_code_create_form.contact_title_list.field.queryset %}
                                {% if choice.title_th == "คุณ" %}
                                  <option value="{{ choice.pk }}" selected>{{ choice.title_th}}</option> 
                                {% else %}
                                  <option value="{{ choice.pk }}">{{ choice.title_th}}</option> 
                                {% endif %}
                              {% endfor %}
                            </select>

                          </div>
                        </div>


                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_con_fname_th">{% trans 'First Name (TH)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_fname_th" name="cus_bill_cus_contact_con_fname_th">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_contact_con_lname_th">{% trans 'Last Name (TH)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_lname_th" name="cus_bill_cus_contact_con_fname_th">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_contact_con_position_th">{% trans 'Position (TH)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_position_th" name="cus_bill_cus_contact_con_position_th">
                        </div>

                      </div>
                      


                      <div class="form-row">                        
                        <div class="form-group col-md-2">
                          <label for="cus_bill_sex_options" class="col-sm-12 col-form-label">{% trans 'Sex' %}</label>

                          <div class="row">                              
                            <div class="col-12 input-group">

                              <div class="form-check form-check-inline pl-1">
                                <input class="form-check-input" type="radio" name="cus_bill_sex_options" id="id_cus_bill_sex_male" value="M" checked>
                                <label class="form-check-label" for="id_cus_bill_sex_male">Male</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="cus_bill_sex_options" id="id_cus_bill_sex_female" value="F">
                                <label class="form-check-label" for="id_cus_bill_sex_female">Female</label>
                              </div>

                            </div>

                          </div>                          
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_cus_title_en">{% trans 'Title (EN)' %}</label>                          
                            {% render_field customer_code_create_form.cus_bill_cus_contact_cus_title_en class="form-control form-control-sm" %}
                        </div>

                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_con_fname_en">{% trans 'First Name (EN)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_fname_en" name="cus_bill_cus_contact_con_fname_en">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_site_site_contact_con_lname_en">{% trans 'Last Name (EN)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_lname_en" name="cus_bill_cus_contact_con_lname_en">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_contact_con_position_en">{% trans 'Position (EN)' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_position_en" name="cus_bill_cus_contact_con_position_en">
                        </div>
                      </div>


                      <div class="form-row">                        
                        <div class="form-group col-md-2">
                          <label for="id_cus_bill_cus_contact_cus_title_en">{% trans 'Nationality' %}</label>                          
                          <select name="cus_bill_cus_contact_nation_list" class="form-control form-control-sm" required="" id="id_cus_bill_cus_contact_nation_list">
                            {% for choice in customer_code_create_form.contact_nation_list.field.queryset %}
                            {% if choice.nation_th == "ไทย" %}
                              <option value="{{ choice.pk }}" selected>{{ choice.nation_th}}</option> 
                            {% else %}
                              <option value="{{ choice.pk }}">{{ choice.nation_th}}</option> 
                            {% endif %}
                            {% endfor %}
                          </select>
                        </div>


                        <div class="form-group col-md-3">
                          <label for="id_cus_cus_bill_cus_contact_con_mobile">{% trans 'Mobile' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_mobile" name="cus_bill_cus_contact_con_mobile">
                        </div>

                        <div class="form-group col-md-3">
                          <label for="id_cus_bill_cus_contact_con_email">{% trans 'Email' %}</label>
                          <input type="text" class="form-control form-control-sm" id="id_cus_bill_cus_contact_con_email" name="cus_bill_cus_contact_con_email">
                        </div>
                      </div>

                    </div>



                  </div>
                </div>
              </div>

            {% comment %}
            <div class="float-right">
              <input type="button" class="btn btn-secondary btn-md" value="Cancel" onClick="this.form.reset()" />
              <a href="#" id="cusBillSaveButton" type="button" class="btn btn-primary btn-md"><i class="fas fa-save fa-md"></i>&nbsp;&nbsp;{% trans 'Save' %}</a>
            </div>
            {% endcomment %}

            </form>

            
            </div>

              </div>


            </div>
            <!-- Tab Content -->


          </div>
        </div>
      </div>
      <!-- BODY -->

    </div>
    <!-- TEST -->



  <div class="modal fade" id="modal-customer">
    <div class="modal-dialog">
      <div class="modal-content"></div>
    </div>
  </div>
  </form>

  <div class="container">
    <div class="row"></div>
  </div>

</section>
<!-- /.content -->

</div>

<!-- Customer District Modal -->
<div class="modal fade" id="districtmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle"><i class="fas fa-search"></i>&nbsp;&nbsp;{% trans 'Select a Location' %}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {% trans 'Loading...' %}
      </div>

      <div class="modal-footer">
        <!--<button id='cus_site_district_lookup_modal' type='button' class='btn btn-outline-secondary btn-xs'><b>></b></button>-->
        <button type="button" class="btn btn-success btn-sm" data-dismiss="modal">{% trans 'Close' %}</button>
        <!--<button type="button" class="btn btn-success btn-sm">{% trans 'Select' %}</button>-->
      </div>

    </div>
  </div>
</div>


<!-- Contact Modal -->
<div class="modal fade" id="contact_modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle"><i class="fas fa-search"></i>&nbsp;&nbsp;{% trans 'Select a Person' %}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {% trans 'Loading...' %}
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">{% trans 'Close' %}</button>
      </div>

    </div>
  </div>
</div>


<!-- Search Customer Modal -->
<div class="modal fade" id="search_customer_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <div class="modal-header bg-success text-white" style="padding:7px;">
        <h5 class="modal-title" id="exampleModalLongTitle"><i class="fas fa-search"></i>&nbsp;{% trans 'Select a Customer' %}</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body" style="padding:15px 0 0 12px;">
        <span class="text-center">{% trans 'Loading, please wait...' %}</span>
      </div>

      <div class="modal-footer" style="padding:5px 5px 5px 0;">

        <div class='float-left text-left col-10 pl-4'><span id="id_search_number_of_found_record"></span></div>
        <div class="float-right text-right col-2">
          <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">{% trans 'Close' %}</button>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- /.content-wrapper -->
{% endblock %}



{% block javascript %}
<script>
  function showLoading() {
    $.LoadingOverlaySetup({
        background      : "rgba(0, 0, 0, 0.5)",
        image           : "/static/img/logo-small.png",        
        imageAnimation  : "1.5s fadein",
        imageColor      : "#ffcc00"
    });
    $.LoadingOverlay("show"); 
  }

  $(document).ready(function(){
    $('#id_cus_id').focus();
    $("#main-content :input").attr("disabled", true);    

    $('#cancelSaveAllCustomerTabs').on('click', function (e) {      
      
      // todo: clear form
      $('#customer_code_form').trigger("reset");
      $('#cus_main_form').trigger("reset");
      $('#cus_site_form').trigger("reset");
      $('#cus_bill_form').trigger("reset");

      $("#main-content :input").attr("disabled", true);
      $('#customer_name_title').html("<button type='button' class='btn text-light' style='background-color: #018349;'><span style='font-size:18px;font-weight:bold;'>Customer</span></button>");

      $("#id_cus_id").attr("disabled", false);
      $('#id_cus_id').attr('readonly', false);
      $("#id_cus_brn").attr("disabled", false);
      $('#id_cus_brn').attr('readonly', false);
      $('#customer_lookup').attr("disabled", false);

      $("#id_cus_id").focus();
    });

    $(document).on('keyup keypress', '#id_search_text', function(e) {
      if(e.which == 13) {
        
        e.preventDefault();
        if(this.value=="") {
          return false;  
        } else {
          //console.log("check");
          customer_search_modal();          
        }
        
      }
    });

  });

  function render_service_list_table_html(data) {
    var result = ""
    var count = data.results.length;

    result = "";
    result += "<div class='row col-12' stye='padding:0;'>";

    result += "<div class='col-8 offset-3 pb-2'>";
    result += "<form id='search_customer_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
    result += "  <div class='form-group mx-sm-3 mb-2'>";
    result += "  <select name='search_option' class='form-control form-control-sm' required id='id_search_option'>";
    result += "    <option value='1'>Customer Code</option>";
    result += "    <option value='2' selected>Customer Name (TH)</option>";
    result += "    <option value='3'>Customer Name (EN)</option>";
    result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
    result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
    result += "    <input type='text' class='form-control form-control-sm' id='id_search_text' name='search_text' autocomplete='off' value=''>";
    result += "  </div>";
    result += "<a href='javascript:customer_search_modal()' type='button' class='btn btn-success btn-sm mb-2'>Search</a>";            
    result += "</form>";
    result += "</div>";        
    result += "<div class='table-responsive' stye='padding:0;'>";        
    result += "<table class='table table-hover table-striped table-wrapper-scroll-y my-custom-scrollbar'>";
    result += " <thead>";
    result += "   <tr class='text-left'>";
    result += "     <th scope='col' class='text-left' nowrap>{% trans 'Cus Code' %}</th>";
    result += "     <th scope='col' class='text-left' nowrap>{% trans 'Customer Name (TH)' %}</th>";
    result += "     <th scope='col' class='text-left' nowrap>{% trans 'Customer Name (EN)' %}</th>";
    result += "     <th scope='col' class='text-center' nowrap>{% trans 'Branch' %}</th>";
    result += "     <th scope='col' class='text-left'>{% trans 'Site Address' %}</th>";
    result += "     <th scope='col'>&nbsp;</th>";
    result += "   </tr>";
    result += " </thead>";

    result += "<tbody style='font-size:13px;'>";
    result += "</div>";
    result += "<div>";

    for(var i=0; i<count; i++) {              
      var cus_id = data.results[i]["cus_id"];
      var cus_brn = data.results[i]["cus_brn"];
      var cus_name_th = data.results[i]["cus_name_th"];
      var cus_name_en = data.results[i]["cus_name_en"];
      var cus_add1_th = data.results[i]["cus_add1_th"];

      result += "<tr>";
      result += "<td class='align-middle text-center'>" + cus_id + "</td>";
      
      result += "<td class='align-middle'>" + cus_name_th + "</td>";
      result += "<td class='align-middle'>" + cus_name_en + "</td>";
      result += "<td class='align-middle text-center'>" + cus_brn + "</td>";
      if(cus_add1_th.length>=30) {
        result += "<td class='align-middle' nowrap>" + cus_add1_th + "...</td>";  
      } else {
        result += "<td class='align-middle' nowrap>" + cus_add1_th + "</td>";
      }            
      result += "<td class='text-right'><a href='javascript:customer_select_item(" + cus_id + "," + cus_brn + ",\"" + cus_name_th + "\",\"" + cus_name_en + "\");' type='button' class='btn btn-outline-success btn-sm'>&nbsp;&nbsp;Select&nbsp;&nbsp;</a></td>";
      result += "</tr>";              
    }
    result += " </tbody>";
    result += "</table>";            
    result += "</div>";

    return result;
  }

  $('#customer_lookup').on('click', function (e) {
    $("#id_search_number_of_found_record").html("");
    $("#search_customer_modal").modal("show");
    $('#search_customer_modal').on('shown.bs.modal', function () {
      $("#id_search_text").focus();
    });            
    result = "";
    result += "<div class='row col-12' stye='padding:0;'>";
    result += "<div class='col-8 offset-3 pb-2'>";
    result += "<form id='search_customer_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
    result += "  <div class='form-group mx-sm-3 mb-2'>";
    result += "  <select name='search_option' class='form-control form-control-sm' required id='id_search_option'>";
    result += "    <option value='1'>Customer Code</option>";
    result += "    <option value='2' selected>Customer Name (TH)</option>";
    result += "    <option value='3'>Customer Name (EN)</option>";
    result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
    result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
    result += "    <input type='text' class='form-control form-control-sm' id='id_search_text' name='search_text' autocomplete='off' value=''>";
    result += "  </div>";
    result += "<a href='javascript:customer_search_modal()' type='button' class='btn btn-success btn-sm mb-2'>Search</a>";            
    result += "</form>";
    result += "</div>"; 
    result += "<div class='table-responsive' stye='padding:0; width:100%'>";
    result += "<table class='table table-hover table-striped table-wrapper-scroll-y my-custom-scrollbar w-100'>";
    result += " <thead>";
    result += "   <tr class='text-left'>";
    result += "     <th scope='col' class='text-left' nowrap>{% trans 'Cus Code' %}.</th>";
    result += "     <th scope='col' class='text-left' nowrap>{% trans 'Customer Name (TH)' %}</th>";
    result += "     <th scope='col' class='text-left' nowrap>{% trans 'Customer Name (EN)' %}</th>";
    result += "     <th scope='col' class='text-center' nowrap>{% trans 'Branch' %}</th>";
    result += "     <th scope='col' class='text-left w-100'>{% trans 'Site Address' %}</th>";
    result += "     <th scope='col'>&nbsp;</th>";
    result += "   </tr>";
    result += " </thead>";
    result += "<tbody style='font-size:13px;'>";
    result += "</div>";
    result += "<div>";
    result += "<tr>";
    result += "<td class='align-middle text-center' colspan='6'><br><br><br><br>Hi there! What are you looking for?<br><br><br><br><br><br></td>";
    result += "</tr>";              
    result += " </tbody>";
    result += "</table>";            
    result += "</div>";          
    $("#search_customer_modal .modal-body").html(result);
  });

  $("#id_cus_id").bind("focus",function(e){
    window.setTimeout(function() {
      $("#id_cus_id").select();
    }, 0);
  });

  $("#id_cus_brn").bind("focus",function(e){
    window.setTimeout(function() {
      $("#id_cus_brn").select();
    }, 0);
  });

  $(document).on('keyup keypress', '#cus_site_search_district_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });

  $(document).on('keyup keypress', '#cus_main_search_district_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });

  $(document).on('keyup keypress', '#cus_main_search_contact_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });

  $(document).on('keyup keypress', '#cus_site_search_contact_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });  

  $(document).on('keyup keypress', '#cus_bill_search_contact_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });  

  $(document).on('keyup keypress', '#cus_bill_search_district_modal_form input[type="text"]', function(e) {
    if(e.which == 13) {
      e.preventDefault();
      return false;
    }
  });  

  $('#btnCopyToSite').on('click', function (e) {
    if ($('#id_cus_main_cus_active').is(":checked"))
      cus_main_cus_active = 1;
    else
      cus_main_cus_active = 0;

    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();      
    cus_main_cus_district_dist_th = $('#id_cus_main_cus_district_dist_th').val();
    cus_main_cus_city_th = $('#id_cus_main_cus_city_th').val();
    cus_main_cus_country_th = $('#id_cus_main_cus_country_th').val();
    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();      
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();      
    id_cus_main_cus_district_en = $('#id_cus_main_cus_district_en').val();
    cus_main_cus_city_en = $('#id_cus_main_cus_city_en').val();
    cus_main_cus_country_en = $('#id_cus_main_cus_country_en').val();
    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();
    cus_main_select_district_id = $('#id_cus_main_select_district_id').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();

    cus_main_cus_contact_id = $('#id_cus_main_cus_contact_id').val();
    cus_main_cus_contact_title_id = $('#id_cus_main_cus_contact_title_list').val();
    cus_main_cus_contact_cus_title = $('#id_cus_main_cus_contact_cus_title_th').val();  
    cus_main_cus_contact_con_fname_th = $('#id_cus_main_cus_contact_con_fname_th').val();
    cus_main_cus_contact_con_lname_th = $('#id_cus_main_cus_contact_con_lname_th').val();
    cus_main_cus_contact_con_position_th = $('#id_cus_main_cus_contact_con_position_th').val();

    cus_main_cus_contact_title_sex = $("input[name='sexOptions']:checked").val();  

    cus_main_cus_contact_cus_title_en = $('#id_cus_main_cus_contact_cus_title_en').val();
    cus_main_cus_contact_con_fname_en = $('#id_cus_main_cus_contact_con_fname_en').val();
    cus_main_cus_contact_con_lname_en = $('#id_cus_main_cus_contact_con_lname_en').val();
    cus_main_cus_contact_con_position_en = $('#id_cus_main_cus_contact_con_position_en').val();
    
    cus_main_cus_contact_nation_list = $('#id_cus_main_cus_contact_nation_list').val();    
    cus_main_cus_contact_con_mobile = $('#id_cus_main_cus_contact_con_mobile').val();
    cus_main_cus_contact_con_email = $('#id_cus_main_cus_contact_con_email').val();


    if(cus_main_cus_active==1)
      $('#id_cus_site_cus_active').prop('checked', true);
    else
      $('#id_cus_site_cus_active').prop('checked', false);

    $('#id_cus_site_cus_name_th').val(cus_main_cus_name_th);
    $('#id_cus_site_cus_add1_th').val(cus_main_cus_add1_th);
    $('#id_cus_site_cus_add2_th').val(cus_main_cus_add2_th);
    $('#id_cus_site_cus_subdist_th').val(cus_main_cus_subdist_th);
    $('#id_cus_site_cus_district_dist_th').val(cus_main_cus_district_dist_th);
    $('#id_cus_site_cus_city_th').val(cus_main_cus_city_th);
    $('#id_cus_site_cus_country_th').val(cus_main_cus_country_th);

    $('#id_cus_site_cus_name_en').val(cus_main_cus_name_en);
    $('#id_cus_site_cus_add1_en').val(cus_main_cus_add1_en);
    $('#id_cus_site_cus_add2_en').val(cus_main_cus_add2_en);
    $('#id_cus_site_cus_subdist_en').val(cus_main_cus_subdist_en);
    $('#id_cus_site_cus_district_en').val(id_cus_main_cus_district_en);
    $('#id_cus_site_cus_city_en').val(cus_main_cus_city_en);
    $('#id_cus_site_cus_country_en').val(cus_main_cus_country_en);

    $('#id_cus_site_select_district_id').val(cus_main_select_district_id);
    $('#id_cus_site_cus_district_dist_th').val(cus_main_cus_district_dist_th);

    $('#id_cus_site_cus_zip').val(cus_main_cus_zip);
    $('#id_cus_site_cus_tel').val(cus_main_cus_tel);
    $('#id_cus_site_cus_fax').val(cus_main_cus_fax);
    $('#id_cus_site_cus_email').val(cus_main_cus_email);
    $('#id_cus_site_cus_zone').val(cus_main_cus_zone);

    // Site - Contact Information
    $('#id_cus_site_site_contact_id').val(cus_main_cus_contact_id);
    $('#id_cus_site_cus_contact_title_list').val(cus_main_cus_contact_title_id);
    $('#id_cus_site_site_contact_title_th').val(cus_main_cus_contact_cus_title);
    $('#id_cus_site_site_contact_fname_th').val(cus_main_cus_contact_con_fname_th);
    $('#id_cus_site_site_contact_lname_th').val(cus_main_cus_contact_con_lname_th);
    $('#id_cus_site_site_contact_position_th').val(cus_main_cus_contact_con_position_th);
  
    if(cus_main_cus_contact_title_sex == 'M') {
      $('#id_cus_site_sex_male').prop("checked", true);
      $('#id_cus_site_sex_female').prop("checked", false);
    }

    if(cus_main_cus_contact_title_sex == 'F') {
      $('#id_cus_site_sex_male').prop("checked", false);
      $('#id_cus_site_sex_female').prop("checked", true);
    }



    $('#id_cus_site_site_contact_cus_title_en').val(cus_main_cus_contact_cus_title_en);
    $('#id_cus_site_site_contact_con_fname_en').val(cus_main_cus_contact_con_fname_en);
    $('#id_cus_site_site_contact_con_lname_en').val(cus_main_cus_contact_con_lname_en);
    $('#id_cus_site_site_contact_con_position_en').val(cus_main_cus_contact_con_position_en);

    $('#id_cus_site_site_contact_nation_list').val(cus_main_cus_contact_nation_list);
    $('#id_cus_site_site_contact_con_mobile').val(cus_main_cus_contact_con_mobile);
    $('#id_cus_site_site_contact_con_email').val(cus_main_cus_contact_con_email);

    $(document).Toasts('create', {
      class: 'bg-success', 
      title: "{% trans 'Message' %}",
      subtitle: '',
      autohide: true,
      delay: 2000,
      body: "Copy to site successfully.",
      autoDismiss: true,
      close: true,
      autoremove: true,
    });    
  });

  $('#btnCopyToBill').on('click', function (e) {
    if ($('#id_cus_main_cus_active').is(":checked"))
      cus_main_cus_active = 1;
    else
      cus_main_cus_active = 0;

    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();      
    cus_main_cus_district_dist_th = $('#id_cus_main_cus_district_dist_th').val();
    cus_main_cus_city_th = $('#id_cus_main_cus_city_th').val();
    cus_main_cus_country_th = $('#id_cus_main_cus_country_th').val();

    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();      
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();      
    id_cus_main_cus_district_en = $('#id_cus_main_cus_district_en').val();
    cus_main_cus_city_en = $('#id_cus_main_cus_city_en').val();
    cus_main_cus_country_en = $('#id_cus_main_cus_country_en').val();
    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();
    
    cus_main_select_district_id = $('#id_cus_main_select_district_id').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();

    cus_main_cus_contact_id = $('#id_cus_main_cus_contact_id').val();    
    cus_main_cus_contact_title_id = $('#id_cus_main_cus_contact_title_list').val();
    cus_main_cus_contact_cus_title = $('#id_cus_main_cus_contact_cus_title_th').val();  
    cus_main_cus_contact_con_fname_th = $('#id_cus_main_cus_contact_con_fname_th').val();
    cus_main_cus_contact_con_lname_th = $('#id_cus_main_cus_contact_con_lname_th').val();
    cus_main_cus_contact_con_position_th = $('#id_cus_main_cus_contact_con_position_th').val();
    cus_main_cus_contact_title_sex = $("input[name='sexOptions']:checked").val();  
    cus_main_cus_contact_cus_title_en = $('#id_cus_main_cus_contact_cus_title_en').val();
    cus_main_cus_contact_con_fname_en = $('#id_cus_main_cus_contact_con_fname_en').val();
    cus_main_cus_contact_con_lname_en = $('#id_cus_main_cus_contact_con_lname_en').val();
    cus_main_cus_contact_con_position_en = $('#id_cus_main_cus_contact_con_position_en').val();    
    cus_main_cus_contact_nation_list = $('#id_cus_main_cus_contact_nation_list').val();    
    cus_main_cus_contact_con_mobile = $('#id_cus_main_cus_contact_con_mobile').val();
    cus_main_cus_contact_con_email = $('#id_cus_main_cus_contact_con_email').val();

    if(cus_main_cus_active==1)
      $('#id_cus_bill_cus_active').prop('checked', true);
    else
      $('#id_cus_bill_cus_active').prop('checked', false);

    $('#id_cus_bill_cus_name_th').val(cus_main_cus_name_th);
    $('#id_cus_bill_cus_add1_th').val(cus_main_cus_add1_th);
    $('#id_cus_bill_cus_add2_th').val(cus_main_cus_add2_th);
    $('#id_cus_bill_cus_subdist_th').val(cus_main_cus_subdist_th);
    $('#id_cus_bill_cus_district_dist_th').val(cus_main_cus_district_dist_th);
    $('#id_cus_bill_cus_city_th').val(cus_main_cus_city_th);
    $('#id_cus_bill_cus_country_th').val(cus_main_cus_country_th);

    $('#id_cus_bill_cus_name_en').val(cus_main_cus_name_en);
    $('#id_cus_bill_cus_add1_en').val(cus_main_cus_add1_en);
    $('#id_cus_bill_cus_add2_en').val(cus_main_cus_add2_en);
    $('#id_cus_bill_cus_subdist_en').val(cus_main_cus_subdist_en);
    $('#id_cus_bill_cus_district_en').val(id_cus_main_cus_district_en);
    $('#id_cus_bill_cus_city_en').val(cus_main_cus_city_en);
    $('#id_cus_bill_cus_country_en').val(cus_main_cus_country_en);

    $('#id_cus_bill_select_district_id').val(cus_main_select_district_id);
    $('#id_cus_bill_cus_district_dist_th').val(cus_main_cus_district_dist_th);

    $('#id_cus_bill_cus_zip').val(cus_main_cus_zip);
    $('#id_cus_bill_cus_tel').val(cus_main_cus_tel);
    $('#id_cus_bill_cus_fax').val(cus_main_cus_fax);
    $('#id_cus_bill_cus_email').val(cus_main_cus_email);
    $('#id_cus_bill_cus_zone').val(cus_main_cus_zone);

    // Bill Cotact Information
    $('#id_cus_bill_cus_contact_id').val(cus_main_cus_contact_id);
    $('#id_cus_bill_cus_contact_title_list').val(cus_main_cus_contact_title_id);
    $('#id_cus_bill_cus_contact_title_th').val(cus_main_cus_contact_cus_title);
    $('#id_cus_bill_cus_contact_con_fname_th').val(cus_main_cus_contact_con_fname_th);
    $('#id_cus_bill_cus_contact_con_lname_th').val(cus_main_cus_contact_con_lname_th);
    $('#id_cus_bill_cus_contact_con_position_th').val(cus_main_cus_contact_con_position_th);
  
    if(cus_main_cus_contact_title_sex == 'M') {
      $('#id_cus_bill_sex_male').prop("checked", true);
      $('#id_cus_bill_sex_female').prop("checked", false);
    }

    if(cus_main_cus_contact_title_sex == 'F') {
      $('#id_cus_bill_sex_male').prop("checked", false);
      $('#id_cus_bill_sex_female').prop("checked", true);
    }

    $('#id_cus_bill_cus_contact_cus_title_en').val(cus_main_cus_contact_cus_title_en);
    $('#id_cus_bill_cus_contact_con_fname_en').val(cus_main_cus_contact_con_fname_en);
    $('#id_cus_bill_cus_contact_con_lname_en').val(cus_main_cus_contact_con_lname_en);
    $('#id_cus_bill_cus_contact_con_position_en').val(cus_main_cus_contact_con_position_en);

    $('#id_cus_bill_cus_contact_nation_list').val(cus_main_cus_contact_nation_list);
    $('#id_cus_bill_cus_contact_con_mobile').val(cus_main_cus_contact_con_mobile);
    $('#id_cus_bill_cus_contact_con_email').val(cus_main_cus_contact_con_email);

    $(document).Toasts('create', {
      class: 'bg-success', 
      title: "{% trans 'Message' %}",
      subtitle: '',
      autohide: true,
      delay: 2000,
      body: "Copy to bill successfully.",
      autoDismiss: true,
      close: true,
      autoremove: true,
    });    
  });


  $('#btnSiteCopyToBill').on('click', function (e) {
    if ($('#id_cus_site_cus_active').is(":checked"))
      cus_site_cus_active = 1;
    else
      cus_site_cus_active = 0;

    cus_site_site_name_th = $('#id_cus_site_cus_name_th').val();
    cus_site_site_add1_th = $('#id_cus_site_cus_add1_th').val();
    cus_site_site_add2_th = $('#id_cus_site_cus_add2_th').val();
    cus_site_site_subdist_th = $('#id_cus_site_cus_subdist_th').val();      
    cus_site_site_district_dist_th = $('#id_cus_site_cus_district_dist_th').val();
    cus_site_site_city_th = $('#id_cus_site_cus_city_th').val();
    cus_site_site_country_th = $('#id_cus_site_cus_country_th').val();

    cus_site_site_name_en = $('#id_cus_site_cus_name_en').val();      
    cus_site_site_add1_en = $('#id_cus_site_cus_add1_en').val();
    cus_site_site_add2_en = $('#id_cus_site_cus_add2_en').val();
    cus_site_site_subdist_en = $('#id_cus_site_cus_subdist_en').val();      
    cus_site_site_district_en = $('#id_cus_site_cus_district_en').val();
    cus_site_site_city_en = $('#id_cus_site_cus_city_en').val();
    cus_site_site_country_en = $('#id_cus_site_cus_country_en').val();
    cus_site_site_zip = $('#id_cus_site_cus_zip').val();
    cus_site_site_tel = $('#id_cus_site_cus_tel').val();
    cus_site_site_fax = $('#id_cus_site_cus_fax').val();
    cus_site_site_email = $('#id_cus_site_cus_email').val();

    cus_site_select_district_id = $('#id_cus_site_select_district_id').val();
    cus_site_site_zone = $('#id_cus_site_cus_zone').val();

    cus_site_site_contact_id = $('#id_cus_site_site_contact_id').val();
    cus_site_site_contact_cus_title_id = $("#id_cus_site_cus_contact_title_list").val();
    cus_site_site_contact_con_fname_th = $("#id_cus_site_site_contact_fname_th").val();
    cus_site_site_contact_con_lname_th = $("#id_cus_site_site_contact_lname_th").val();
    cus_site_site_contact_con_position_th = $("#id_cus_site_site_contact_position_th").val();

    cus_site_site_contact_title_sex = $("input[name='cus_site_sex_options']:checked").val();  
    cus_site_site_contact_cus_title_en = $('#id_cus_site_site_contact_cus_title_en').val();
    cus_site_site_contact_con_fname_en = $('#id_cus_site_site_contact_con_fname_en').val();
    cus_site_site_contact_con_lname_en = $('#id_cus_site_site_contact_con_lname_en').val();
    cus_site_site_contact_con_position_en = $('#id_cus_site_site_contact_con_position_en').val();    
    cus_site_site_contact_nation_list = $('#id_cus_site_site_contact_nation_list').val();    
    cus_site_site_contact_con_mobile = $('#id_cus_site_site_contact_con_mobile').val();
    cus_site_site_contact_con_email = $('#id_cus_site_site_contact_con_email').val();

    /*
    console.log(
      cus_site_select_district_id + "," +
      cus_site_site_contact_id + "," + 
      cus_site_site_contact_cus_title_id + "," +
      cus_site_site_contact_con_fname_th + "," +
      cus_site_site_contact_con_lname_th + "," +
      cus_site_site_contact_con_position_th + "," + 
      cus_site_site_contact_title_sex + "," +
      cus_site_site_contact_cus_title_en + "," +
      cus_site_site_contact_con_fname_en + "," +
      cus_site_site_contact_con_lname_en + "," +
      cus_site_site_contact_con_position_en + "," +
      cus_site_site_contact_nation_list + "," +
      cus_site_site_contact_con_mobile + "," +
      cus_site_site_contact_con_email
      );
    */

    if(cus_site_cus_active==1)
      $('#id_cus_bill_cus_active').prop('checked', true);
    else
      $('#id_cus_bill_cus_active').prop('checked', false);
    
    $('#id_cus_bill_cus_name_th').val(cus_site_site_name_th);
    $('#id_cus_bill_cus_add1_th').val(cus_site_site_add1_th);
    $('#id_cus_bill_cus_add2_th').val(cus_site_site_add2_th);
    $('#id_cus_bill_cus_subdist_th').val(cus_site_site_subdist_th);
    $('#id_cus_bill_cus_district_dist_th').val(cus_site_site_district_dist_th);
    $('#id_cus_bill_cus_city_th').val(cus_site_site_city_th);
    $('#id_cus_bill_cus_country_th').val(cus_site_site_country_th);

    $('#id_cus_bill_cus_name_en').val(cus_site_site_name_en);
    $('#id_cus_bill_cus_add1_en').val(cus_site_site_add1_en);
    $('#id_cus_bill_cus_add2_en').val(cus_site_site_add2_en);
    $('#id_cus_bill_cus_subdist_en').val(cus_site_site_subdist_en);
    $('#id_cus_bill_cus_district_en').val(cus_site_site_district_en);
    $('#id_cus_bill_cus_city_en').val(cus_site_site_city_en);
    $('#id_cus_bill_cus_country_en').val(cus_site_site_country_en);

    $('#id_cus_bill_select_district_id').val(cus_site_select_district_id);
    $('#id_cus_bill_cus_district_dist_th').val(cus_site_site_district_dist_th);

    $('#id_cus_bill_cus_zip').val(cus_site_site_zip);
    $('#id_cus_bill_cus_tel').val(cus_site_site_tel);
    $('#id_cus_bill_cus_fax').val(cus_site_site_fax);
    $('#id_cus_bill_cus_email').val(cus_site_site_email);
    $('#id_cus_bill_cus_zone').val(cus_site_site_zone);

    // Bill Cotact Information
    $('#id_cus_bill_cus_contact_id').val(cus_site_site_contact_id);        
    $('#id_cus_bill_cus_contact_con_fname_th').val(cus_site_site_contact_con_fname_th);
    $('#id_cus_bill_cus_contact_con_lname_th').val(cus_site_site_contact_con_lname_th);
    $('#id_cus_bill_cus_contact_con_position_th').val(cus_site_site_contact_con_position_th);

    if(cus_site_site_contact_title_sex == 'M') {
      $('#id_cus_bill_sex_male').prop("checked", true);
      $('#id_cus_bill_sex_female').prop("checked", false);
    }

    if(cus_site_site_contact_title_sex == 'F') {
      $('#id_cus_bill_sex_male').prop("checked", false);
      $('#id_cus_bill_sex_female').prop("checked", true);
    }


    $('#id_cus_bill_cus_contact_cus_title_en').val(cus_site_site_contact_cus_title_en);
    $('#id_cus_bill_cus_contact_con_fname_en').val(cus_site_site_contact_con_fname_en);
    $('#id_cus_bill_cus_contact_con_lname_en').val(cus_site_site_contact_con_lname_en);
    $('#id_cus_bill_cus_contact_con_position_en').val(cus_site_site_contact_con_position_en);

    $('#id_cus_bill_cus_contact_nation_list').val(cus_site_site_contact_nation_list);
    $('#id_cus_bill_cus_contact_con_mobile').val(cus_site_site_contact_con_mobile);
    $('#id_cus_bill_cus_contact_con_email').val(cus_site_site_contact_con_email);


    $(document).Toasts('create', {
      class: 'bg-success', 
      title: "{% trans 'Message' %}",
      subtitle: '',
      autohide: true,
      delay: 2000,
      body: "Copy to bill is successfully.",
      autoDismiss: true,
      close: true,
      autoremove: true,
    });    
  });

  $('#checkboxMainOfficeForSite').on('change', function(){
    if(this.checked) {
      alert("check for site");
    } else {
      alert("uncheck for site");
    }
  });

  $('#checkboxMainOfficeForBill').on('change', function(){
    if(this.checked) {
      alert("check for bill");
    } else {
      alert("uncheck for bill");
    }
  });

  $(".nav-tabs a[data-toggle=tab]").on("click", function(e) {
     var cus_id = $('#id_cus_id').val();
     var cus_brn = $('#id_cus_brn').val();
  });



  function enter_id_cus_id(cus_id, cus_brn) {
    // Check check_exist_cus_main_cus_id
    $.ajax({
      url: "/customer/ajax/ajax_check_exist_cus_main/",
      type: "POST",
      data: {          
        csrfmiddlewaretoken: '{{ csrf_token }}',
        cus_id: cus_id,
        cus_brn: cus_brn,
      },
      success: function(data) {

        $('#id_cus_brn').focus();

        var cus_main_cus_active = data.results[0]["cus_active"];
        var cus_main_cus_name_th = data.results[0]["cus_name_th"];
        var cus_main_cus_add1_th = data.results[0]["cus_add1_th"];
        var cus_main_cus_add2_th = data.results[0]["cus_add2_th"];
        var cus_main_cus_district_id = data.results[0]["cus_district_id"];          
        var cus_main_subdist_th = data.results[0]["cus_subdist_th"];
        var cus_main_cus_district_th = data.results[0]["cus_district_th"];          
        var cus_main_cus_city_th = data.results[0]["cus_city_th"];
        var cus_main_cus_country_th = data.results[0]["cus_country_th"];
        
        var cus_main_cus_name_en = data.results[0]["cus_name_en"];
        var cus_main_cus_add1_en = data.results[0]["cus_add1_en"];
        var cus_main_cus_add2_en = data.results[0]["cus_add2_en"];          
        var cus_main_subdist_en = data.results[0]["cus_subdist_en"];
        var cus_main_cus_district_en = data.results[0]["cus_district_en"];
        var cus_main_cus_city_en = data.results[0]["cus_city_en"];
        var cus_main_cus_country_en = data.results[0]["cus_country_en"];

        var cus_main_cus_zip = data.results[0]["cus_zip"];
        var cus_main_cus_tel = data.results[0]["cus_tel"];
        var cus_main_cus_fax = data.results[0]["cus_fax"];
        var cus_main_cus_email = data.results[0]["cus_email"];
        var cus_main_cus_zone = data.results[0]["cus_zone"];

        var cus_main_cus_contact_id = data.results[0]["cus_contact_id"];
        var cus_main_cus_contact_con_title_id = data.results[0]["cus_contact_con_title_id"];          
        var cus_main_cus_contact_title_th = data.results[0]["cus_contact_title_th"];
        var cus_main_cus_contact_fname_th = data.results[0]["cus_contact_fname_th"];
        var cus_main_cus_contact_lname_th = data.results[0]["cus_contact_lname_th"];
        var cus_main_cus_contact_position_th = data.results[0]["cus_contact_position_th"];

        var cus_main_cus_contact_con_sex = data.results[0]["cus_contact_con_sex"];

        var cus_main_cus_contact_title_en = data.results[0]["cus_contact_title_en"];
        var cus_main_cus_contact_fname_en = data.results[0]["cus_contact_fname_en"];
        var cus_main_cus_contact_lname_en = data.results[0]["cus_contact_lname_en"];
        var cus_main_cus_contact_position_en = data.results[0]["cus_contact_position_en"];

        var cus_contact_con_nationality_id = data.results[0]["cus_contact_con_nationality_id"];
        var cus_contact_con_mobile = data.results[0]["cus_contact_con_mobile"];
        var cus_contact_con_email = data.results[0]["cus_contact_con_email"];

        var cus_main_cus_taxid = data.results[0]["cus_main_cus_taxid"];
        //alert(cus_main_cus_taxid);

        if(cus_main_cus_active==1) {
          $('#id_cus_main_cus_active').val(1);
          $('#id_cus_main_cus_active').prop("checked", true);
        } else {
          $('#id_cus_main_cus_active').val(0);
          $('#id_cus_main_cus_active').prop("checked", false);
        }
        
        if(data.results[0]["cus_id"]==null) {
          $('#customer_name_title').html("<button type='button' class='btn text-light' style='background-color: #018349;'><span style='font-size:18px;font-weight:bold;'>Add new customer</span></button>");
        }          
        else {
          $('#customer_name_title').html("<button type='button' class='btn text-light' style='background-color: #018349;'><span style='font-size:18px;font-weight:bold;'>" + cus_main_cus_name_th + "</span></button>");
        }

        $('#id_cus_main_cus_name_th').val(cus_main_cus_name_th);
        $('#id_cus_main_cus_add1_th').val(cus_main_cus_add1_th);
        $('#id_cus_main_cus_add2_th').val(cus_main_cus_add2_th);
        $('#id_cus_main_select_district_id').val(cus_main_cus_district_id);
        $('#id_cus_main_cus_district_dist_th').val(cus_main_cus_district_th);
        $('#id_cus_main_cus_subdist_th').val(cus_main_subdist_th);
        $('#id_cus_main_cus_city_th').val(cus_main_cus_city_th);
        $('#id_cus_main_cus_country_th').val(cus_main_cus_country_th);

        $('#id_cus_main_cus_name_en').val(cus_main_cus_name_en);
        $('#id_cus_main_cus_add1_en').val(cus_main_cus_add1_en);
        $('#id_cus_main_cus_add2_en').val(cus_main_cus_add2_en);          
        $('#id_cus_main_cus_subdist_en').val(cus_main_subdist_en);
        $('#id_cus_main_cus_city_en').val(cus_main_cus_city_en);
        $('#id_cus_main_cus_district_en').val(cus_main_cus_district_en);
        $('#id_cus_main_cus_country_en').val(cus_main_cus_country_en);
        
        $('#id_cus_main_cus_zip').val(cus_main_cus_zip);
        $('#id_cus_main_cus_tel').val(cus_main_cus_tel);
        $('#id_cus_main_cus_fax').val(cus_main_cus_fax);
        $('#id_cus_main_cus_email').val(cus_main_cus_email);

        $('#id_cus_main_cus_zone').val(cus_main_cus_zone);

        $('#id_cus_main_cus_contact_id').val(cus_main_cus_contact_id);
        $('#id_cus_main_cus_contact_title_list').val(cus_main_cus_contact_con_title_id);

        $('#id_cus_main_cus_contact_cus_title_th').val(cus_main_cus_contact_title_th);
        $('#id_cus_main_cus_contact_con_fname_th').val(cus_main_cus_contact_fname_th);
        $('#id_cus_main_cus_contact_con_lname_th').val(cus_main_cus_contact_lname_th);          
        $('#id_cus_main_cus_contact_con_position_th').val(cus_main_cus_contact_position_th);

        if(cus_main_cus_contact_con_sex=='M') {
          $('#id_sex_male').prop("checked", true);
          $('#id_sex_female').prop("checked", false);
        }

        if(cus_main_cus_contact_con_sex=='F') {
          $('#id_sex_male').prop("checked", false);
          $('#id_sex_female').prop("checked", true);
        }

        $('#id_cus_main_cus_contact_cus_title_en').val(cus_main_cus_contact_title_en);
        $('#id_cus_main_cus_contact_con_fname_en').val(cus_main_cus_contact_fname_en);
        $('#id_cus_main_cus_contact_con_lname_en').val(cus_main_cus_contact_lname_en);
        $('#id_cus_main_cus_contact_con_position_en').val(cus_main_cus_contact_position_en);

        $('#id_cus_main_cus_contact_nation_list').val(cus_contact_con_nationality_id);
        $('#id_cus_main_cus_contact_con_mobile').val(cus_contact_con_mobile);
        $('#id_cus_main_cus_contact_con_email').val(cus_contact_con_email);

        
        // WORK
        $('#id_customer_group_id').val(cus_main_cus_taxid);
        $('#id_customer_group_id_text').val(cus_main_cus_taxid);

        return true; 
      },
      error: function(data) {
        alert(data.responseJSON.error);
        return false
      },
    });
  }


  // Update Main Office
  $(document).on('keypress', '#id_cus_id', function(e) {
    if(e.which == 13) {      
      e.preventDefault();

      var obj = $(this);
      var cus_id = obj.val();
      var cus_brn = $('#id_cus_brn').val();      

      enter_id_cus_id(cus_id, cus_brn);

      return false;
    }
  });


   function reDeleteConfirmation() {
     var retVal = confirm("Do you want to get this customer back again?");
     if( retVal == true ) {        
        alert("Yes");
        return true;
     } else {
        alert("No");
        return false;
     }
  }








  function enter_id_cus_brn(cus_id, cus_brn) {

    if(cus_id == "" || cus_id==null){
      alert("Customer Code is required!");
      $("#id_cus_id").focus();
      return false;
    } else if(cus_brn=="" || cus_brn==null){
      $("#id_cus_brn").val("000");
      $("#id_cus_brn").focus();
    }      

    $.ajax({
      url: "/customer/ajax/ajax_check_exist_cus_site/",
      type: "POST",
      data: {          
        csrfmiddlewaretoken: '{{ csrf_token }}',
        cus_id: cus_id,
        cus_brn: cus_brn,
      },
      success: function(data) {
        // Check Deleted status
        var upd_flag = data.results[0]["upd_flag"];
        var cus_no = data.results[0]["cus_no"];
        
        
        if(upd_flag=='D') {    

          var retVal = confirm("Would you like to undelete Customer No." + cus_no + " ?");
                    
          if( retVal == true ) {
            
            // Change upd_flag to 'R'
            $.ajax({
              url: "/customer/ajax/ajax_undelete_customer/",
              type: "POST",
              data: {        
                csrfmiddlewaretoken: '{{ csrf_token }}',
                cus_no: cus_no,
              },
              success: function(data) {
                
              },
              error: function(data) {
                
              },
            });

            $("#main-content :input").attr("disabled", false);
            $("#id_cus_main_cus_name_th").focus();

            while (cus_brn.length < 3) 
              cus_brn = "0" + cus_brn;
            $('#id_cus_brn').val(cus_brn);
            
            var customer_option_btype = data.results[0]["customer_option_btype"];
            var customer_option_op1 = data.results[0]["customer_option_op1"];
            var customer_option_op2 = data.results[0]["customer_option_op2"];
            var customer_option_op3 = data.results[0]["customer_option_op3"];
            var customer_option_op4 = data.results[0]["customer_option_op4"];          

            // Customer Main Office
            $('#id_cus_main_cus_name_th').focus();          
            
            $('#id_cus_main_business_type').val(customer_option_btype);
            //$('#id_cus_main_business_type').val("aa");

            $('#id_cus_main_customer_option_op1').val(customer_option_op1);
            $('#id_cus_main_customer_option_op2').val(customer_option_op2);
            $('#id_cus_main_customer_option_op3').val(customer_option_op3);
            $('#id_cus_main_customer_option_op4').val(customer_option_op4);

            // Customer Site
            var cus_site_cus_active = data.results[0]["cus_active"];
            if(cus_site_cus_active==1) {
              $('#id_cus_site_cus_active').val(1);
              $('#id_cus_site_cus_active').prop("checked", true);
            } else {
              $('#id_cus_site_cus_active').val(0);
              $('#id_cus_site_cus_active').prop("checked", false);
            }

            var cus_site_cus_name_th = data.results[0]["cus_name_th"];
            var cus_site_cus_add1_th = data.results[0]["cus_add1_th"];
            var cus_site_cus_add2_th = data.results[0]["cus_add2_th"];                  
            var cus_site_cus_district_id = data.results[0]["cus_district_id"];
            var cus_site_cus_subdist_th = data.results[0]["cus_subdist_th"];          
            var cus_site_cus_district_th = data.results[0]["cus_district_th"];
            var cus_site_cus_city_th = data.results[0]["cus_city_th"];
            var cus_site_cus_country_th = data.results[0]["cus_country_th"];          
            var cus_site_cus_name_en = data.results[0]["cus_name_en"];
            var cus_site_cus_add1_en = data.results[0]["cus_add1_en"];
            var cus_site_cus_add2_en = data.results[0]["cus_add2_en"];        
            var cus_site_cus_subdist_en = data.results[0]["cus_subdist_en"];
            var cus_site_cus_district_en = data.results[0]["cus_district_en"];
            var cus_site_cus_city_en = data.results[0]["cus_city_en"];
            var cus_site_cus_country_en = data.results[0]["cus_country_en"];
            var cus_site_cus_zip = data.results[0]["cus_zip"];
            var cus_site_cus_tel = data.results[0]["cus_tel"];
            var cus_site_cus_fax = data.results[0]["cus_fax"];
            var cus_site_cus_email = data.results[0]["cus_email"];
            var cus_site_cus_zone = data.results[0]["cus_zone"];

            var cus_site_site_contact_id = data.results[0]["cus_site_site_contact_id"];
            var cus_site_site_contact_title_th = data.results[0]["cus_site_site_contact_title_th"];
            var cus_site_site_contact_fname_th = data.results[0]["cus_site_site_contact_fname_th"];
            var cus_site_site_contact_lname_th = data.results[0]["cus_site_site_contact_lname_th"];
            var cus_site_site_contact_position_th = data.results[0]["cus_site_site_contact_position_th"];

            var cus_site_site_contact_title_en = data.results[0]["cus_site_site_contact_title_en"];
            var cus_site_site_contact_fname_en = data.results[0]["cus_site_site_contact_fname_en"];
            var cus_site_site_contact_lname_en = data.results[0]["cus_site_site_contact_lname_en"];
            var cus_site_site_contact_position_en = data.results[0]["cus_site_site_contact_position_en"];

            var customer_cus_taxid = data.results[0]["customer_cus_taxid"];

            $('#id_cus_site_cus_name_th').val(cus_site_cus_name_th);
            $('#id_cus_site_cus_add1_th').val(cus_site_cus_add1_th);
            $('#id_cus_site_cus_add2_th').val(cus_site_cus_add2_th);
            $('#id_cus_site_cus_subdist_th').val(cus_site_cus_subdist_th);          
            $('#id_cus_site_cus_district_id').val(cus_site_cus_district_id);
            $('#id_cus_site_cus_district_dist_th').val(cus_site_cus_district_th);          
            $('#id_cus_site_cus_city_th').val(cus_site_cus_city_th);          
            $('#id_cus_site_cus_country_th').val(cus_site_cus_country_th);
            $('#id_cus_site_cus_name_en').val(cus_site_cus_name_en);
            $('#id_cus_site_cus_add1_en').val(cus_site_cus_add1_en);
            $('#id_cus_site_cus_add2_en').val(cus_site_cus_add2_en);
            $('#id_cus_site_cus_subdist_en').val(cus_site_cus_subdist_en);
            $('#id_cus_site_cus_district_en').val(cus_site_cus_district_en);
            $('#id_cus_site_cus_city_en').val(cus_site_cus_city_en);
            $('#id_cus_site_cus_country_en').val(cus_site_cus_country_en);
            $('#id_cus_site_cus_zip').val(cus_site_cus_zip);
            $('#id_cus_site_cus_tel').val(cus_site_cus_tel);
            $('#id_cus_site_cus_fax').val(cus_site_cus_fax);
            $('#id_cus_site_cus_email').val(cus_site_cus_email);
            $('#id_cus_site_cus_zone').val(cus_site_cus_zone);
            $('#id_cus_site_site_contact_id').val(cus_site_site_contact_id);
            $('#id_cus_site_site_contact_title_th').val(cus_site_site_contact_title_th);
            $('#id_cus_site_site_contact_fname_th').val(cus_site_site_contact_fname_th);
            $('#id_cus_site_site_contact_lname_th').val(cus_site_site_contact_lname_th);
            $('#id_cus_site_site_contact_position_th').val(cus_site_site_contact_position_th);
            $('#id_cus_site_site_contact_title_en').val(cus_site_site_contact_title_en);
            $('#id_cus_site_site_contact_fname_en').val(cus_site_site_contact_fname_en);
            $('#id_cus_site_site_contact_lname_en').val(cus_site_site_contact_lname_en);
            $('#id_cus_site_site_contact_position_en').val(cus_site_site_contact_position_en);

            $('#id_customer_group_id_text').val(customer_cus_taxid);

          } else {
            $("#id_cus_brn").val("");
            $("#id_cus_brn").focus();
            return false;          
          }            
        } else {

            $("#main-content :input").attr("disabled", false);
            $("#id_cus_main_cus_name_th").focus();

            while (cus_brn.length < 3) 
              cus_brn = "0" + cus_brn;
            $('#id_cus_brn').val(cus_brn);
            
            var customer_option_btype = data.results[0]["customer_option_btype"];
            var customer_option_op1 = data.results[0]["customer_option_op1"];
            var customer_option_op2 = data.results[0]["customer_option_op2"];
            var customer_option_op3 = data.results[0]["customer_option_op3"];
            var customer_option_op4 = data.results[0]["customer_option_op4"];

            // margin
            var customer_option_opn1 = data.results[0]["customer_option_opn1"];

            if(isNaN(customer_option_opn1))
              customer_option_opn1 = 0

            //alert(customer_option_opn1);

            // Customer Main Office
            $('#id_cus_main_cus_name_th').focus();          
            
            
            $('#id_cus_main_business_type').val(customer_option_btype);
            //$('#id_cus_main_business_type').val("BB");            
            //$('#id_customer_group_id').val(customer_option_btype);

            $('#id_cus_main_customer_option_op1').val(customer_option_op1);
            $('#id_cus_main_customer_option_op2').val(customer_option_op2);
            $('#id_cus_main_customer_option_op3').val(customer_option_op3);
            $('#id_cus_main_customer_option_op4').val(customer_option_op4);

            // margin
            $('#id_cus_main_customer_option_opn1').val(customer_option_opn1);


            // Customer Site
            var cus_site_cus_active = data.results[0]["cus_active"];
            if(cus_site_cus_active==1) {
              $('#id_cus_site_cus_active').val(1);
              $('#id_cus_site_cus_active').prop("checked", true);
            } else {
              $('#id_cus_site_cus_active').val(0);
              $('#id_cus_site_cus_active').prop("checked", false);
            }

            var cus_site_cus_name_th = data.results[0]["cus_name_th"];
            var cus_site_cus_add1_th = data.results[0]["cus_add1_th"];
            var cus_site_cus_add2_th = data.results[0]["cus_add2_th"];                  
            var cus_site_cus_district_id = data.results[0]["cus_district_id"];
            var cus_site_cus_subdist_th = data.results[0]["cus_subdist_th"];          
            var cus_site_cus_district_th = data.results[0]["cus_district_th"];
            var cus_site_cus_city_th = data.results[0]["cus_city_th"];
            var cus_site_cus_country_th = data.results[0]["cus_country_th"];          
            var cus_site_cus_name_en = data.results[0]["cus_name_en"];
            var cus_site_cus_add1_en = data.results[0]["cus_add1_en"];
            var cus_site_cus_add2_en = data.results[0]["cus_add2_en"];        
            var cus_site_cus_subdist_en = data.results[0]["cus_subdist_en"];
            var cus_site_cus_district_en = data.results[0]["cus_district_en"];
            var cus_site_cus_city_en = data.results[0]["cus_city_en"];
            var cus_site_cus_country_en = data.results[0]["cus_country_en"];
            var cus_site_cus_zip = data.results[0]["cus_zip"];
            var cus_site_cus_tel = data.results[0]["cus_tel"];
            var cus_site_cus_fax = data.results[0]["cus_fax"];
            var cus_site_cus_email = data.results[0]["cus_email"];
            var cus_site_cus_zone = data.results[0]["cus_zone"];

            var cus_site_site_contact_id = data.results[0]["cus_site_site_contact_id"];            
            var cus_site_site_contact_title_id = data.results[0]["cus_site_site_contact_title_id"]
            var cus_site_site_contact_title_th = data.results[0]["cus_site_site_contact_title_th"];
            var cus_site_site_contact_con_sex = data.results[0]["cus_site_site_contact_con_sex"];
            var cus_site_site_contact_fname_th = data.results[0]["cus_site_site_contact_fname_th"];
            var cus_site_site_contact_lname_th = data.results[0]["cus_site_site_contact_lname_th"];
            var cus_site_site_contact_position_th = data.results[0]["cus_site_site_contact_position_th"];
            var cus_site_site_contact_title_en = data.results[0]["cus_site_site_contact_title_en"];
            var cus_site_site_contact_fname_en = data.results[0]["cus_site_site_contact_fname_en"];
            var cus_site_site_contact_lname_en = data.results[0]["cus_site_site_contact_lname_en"];
            var cus_site_site_contact_position_en = data.results[0]["cus_site_site_contact_position_en"];
            var cus_site_site_contact_con_nationality_id = data.results[0]["cus_site_site_contact_con_nationality_id"];
            var cus_site_site_contact_con_mobile = data.results[0]["cus_site_site_contact_con_mobile"];
            var cus_site_site_contact_con_email = data.results[0]["cus_site_site_contact_con_email"];
            var customer_cus_taxid = data.results[0]["customer_cus_taxid"];

            
            $('#id_cus_site_cus_name_th').val(cus_site_cus_name_th);
            $('#id_cus_site_cus_add1_th').val(cus_site_cus_add1_th);
            $('#id_cus_site_cus_add2_th').val(cus_site_cus_add2_th);
            $('#id_cus_site_cus_subdist_th').val(cus_site_cus_subdist_th);          
            $('#id_cus_site_cus_district_id').val(cus_site_cus_district_id);
            $('#id_cus_site_cus_district_dist_th').val(cus_site_cus_district_th);          
            $('#id_cus_site_cus_city_th').val(cus_site_cus_city_th);          
            $('#id_cus_site_cus_country_th').val(cus_site_cus_country_th);
            $('#id_cus_site_cus_name_en').val(cus_site_cus_name_en);
            $('#id_cus_site_cus_add1_en').val(cus_site_cus_add1_en);
            $('#id_cus_site_cus_add2_en').val(cus_site_cus_add2_en);
            $('#id_cus_site_cus_subdist_en').val(cus_site_cus_subdist_en);
            $('#id_cus_site_cus_district_en').val(cus_site_cus_district_en);
            $('#id_cus_site_cus_city_en').val(cus_site_cus_city_en);
            $('#id_cus_site_cus_country_en').val(cus_site_cus_country_en);
            $('#id_cus_site_cus_zip').val(cus_site_cus_zip);
            $('#id_cus_site_cus_tel').val(cus_site_cus_tel);
            $('#id_cus_site_cus_fax').val(cus_site_cus_fax);
            $('#id_cus_site_cus_email').val(cus_site_cus_email);
            $('#id_cus_site_cus_zone').val(cus_site_cus_zone);
            $('#id_cus_site_site_contact_id').val(cus_site_site_contact_id);
            $('#id_cus_site_site_contact_title_th').val(cus_site_site_contact_title_th);
            
            $('#id_customer_group_id').val(customer_cus_taxid);
            $('#id_customer_group_id_text').val(customer_cus_taxid);

            if(cus_site_site_contact_con_sex == 'M') {
              $('#id_cus_site_sex_male').prop("checked", true);
              $('#id_cus_site_sex_female').prop("checked", false);
            }

            if(cus_site_site_contact_con_sex == 'F') {
              $('#id_cus_site_sex_male').prop("checked", false);
              $('#id_cus_site_sex_female').prop("checked", true);
            }
          
            $('#id_cus_site_site_contact_fname_th').val(cus_site_site_contact_fname_th);
            $('#id_cus_site_site_contact_lname_th').val(cus_site_site_contact_lname_th);
            $('#id_cus_site_site_contact_position_th').val(cus_site_site_contact_position_th);
            $('#id_cus_site_cus_contact_title_list').val(cus_site_site_contact_title_id);
            $('#id_cus_site_site_contact_con_title_en').val(cus_site_site_contact_title_en);
            $('#id_cus_site_site_contact_con_fname_en').val(cus_site_site_contact_fname_en);
            $('#id_cus_site_site_contact_con_lname_en').val(cus_site_site_contact_lname_en);
            $('#id_cus_site_site_contact_con_position_en').val(cus_site_site_contact_position_en);
            $('#id_cus_site_site_contact_nation_list').val(cus_site_site_contact_con_nationality_id);
            $('#id_cus_site_site_contact_con_mobile').val(cus_site_site_contact_con_mobile);
            $('#id_cus_site_site_contact_con_email').val(cus_site_site_contact_con_email);

            $("#id_cus_id").attr("disabled", true);
            $('#id_cus_id').attr('readonly', true);
            $("#id_cus_brn").attr("disabled", true);
            $('#id_cus_brn').attr('readonly', true);
            $('#customer_lookup').attr("disabled", true);
            
            //console.log("bbb");              

        }
      },
      error: function(data) {
        alert(data.responseJSON.error);          
      },
    });



    // Fill in CUS_BILL
    $.ajax({
      url: "/customer/ajax/ajax_check_exist_cus_bill/",
      type: "POST",
      data: {          
        csrfmiddlewaretoken: '{{ csrf_token }}',
        cus_id: cus_id,
        cus_brn: cus_brn,
      },
      success: function(data) {

        while (cus_brn.length < 3) 
          cus_brn = "0" + cus_brn;
          $('#id_cus_brn').val(cus_brn);
        
        // Customer Site
        var cus_bill_cus_active = data.results[0]["cus_active"];
        if(cus_bill_cus_active==1) {
          $('#id_cus_bill_cus_active').val(1);
          $('#id_cus_bill_cus_active').prop("checked", true);
        } else {
          $('#id_cus_bill_cus_active').val(0);
          $('#id_cus_bill_cus_active').prop("checked", false);
        }

        var cus_bill_cus_name_th = data.results[0]["cus_name_th"];
        var cus_bill_cus_add1_th = data.results[0]["cus_add1_th"];
        var cus_bill_cus_add2_th = data.results[0]["cus_add2_th"];                  
        var cus_bill_cus_district_id = data.results[0]["cus_district_id"];
        var cus_bill_cus_subdist_th = data.results[0]["cus_subdist_th"];          
        var cus_bill_cus_district_th = data.results[0]["cus_district_th"];
        var cus_bill_cus_city_th = data.results[0]["cus_city_th"];
        var cus_bill_cus_country_th = data.results[0]["cus_country_th"];          
        var cus_bill_cus_name_en = data.results[0]["cus_name_en"];
        var cus_bill_cus_add1_en = data.results[0]["cus_add1_en"];
        var cus_bill_cus_add2_en = data.results[0]["cus_add2_en"];        
        var cus_bill_cus_subdist_en = data.results[0]["cus_subdist_en"];
        var cus_bill_cus_district_en = data.results[0]["cus_district_en"];
        var cus_bill_cus_city_en = data.results[0]["cus_city_en"];
        var cus_bill_cus_country_en = data.results[0]["cus_country_en"];
        var cus_bill_cus_zip = data.results[0]["cus_zip"];
        var cus_bill_cus_tel = data.results[0]["cus_tel"];
        var cus_bill_cus_fax = data.results[0]["cus_fax"];
        var cus_bill_cus_email = data.results[0]["cus_email"];
        var cus_bill_cus_zone = data.results[0]["cus_zone"];

        var cus_bill_cus_contact_id = data.results[0]["cus_bill_cus_contact_id"];          
        var cus_bill_cus_contact_title_id = data.results[0]["cus_bill_cus_contact_title_id"];
        var cus_bill_cus_contact_title_th = data.results[0]["cus_bill_cus_contact_title_th"];
        var cus_bill_cus_contact_con_sex = data.results[0]["cus_bill_cus_contact_con_sex"];
        var cus_bill_cus_contact_fname_th = data.results[0]["cus_bill_cus_contact_fname_th"];
        var cus_bill_cus_contact_lname_th = data.results[0]["cus_bill_cus_contact_lname_th"];
        var cus_bill_cus_contact_position_th = data.results[0]["cus_bill_cus_contact_position_th"];          
        var cus_bill_cus_contact_title_en = data.results[0]["cus_bill_cus_contact_title_en"];
        var cus_bill_cus_contact_fname_en = data.results[0]["cus_bill_cus_contact_fname_en"];
        var cus_bill_cus_contact_lname_en = data.results[0]["cus_bill_cus_contact_lname_en"];
        var cus_bill_cus_contact_position_en = data.results[0]["cus_bill_cus_contact_position_en"];
        var cus_bill_cus_contact_con_nationality_id = data.results[0]["cus_bill_cus_contact_con_nationality_id"];
        var cus_bill_cus_contact_con_mobile = data.results[0]["cus_bill_cus_contact_con_mobile"];
        var cus_bill_cus_contact_con_email = data.results[0]["cus_bill_cus_contact_con_email"];

        //alert(cus_bill_cus_contact_con_nationality_id);

        $('#id_cus_bill_cus_name_th').val(cus_bill_cus_name_th);
        $('#id_cus_bill_cus_add1_th').val(cus_bill_cus_add1_th);
        $('#id_cus_bill_cus_add2_th').val(cus_bill_cus_add2_th);
        $('#id_cus_bill_cus_subdist_th').val(cus_bill_cus_subdist_th);          
        $('#id_cus_bill_cus_district_id').val(cus_bill_cus_district_id);
        
        $('#id_cus_bill_cus_district_dist_th').val(cus_bill_cus_district_th);
        //$('#id_cus_bill_cus_district_dist_th').val("aa");

        $('#id_cus_bill_cus_city_th').val(cus_bill_cus_city_th);          
        $('#id_cus_bill_cus_country_th').val(cus_bill_cus_country_th);
        $('#id_cus_bill_cus_name_en').val(cus_bill_cus_name_en);
        $('#id_cus_bill_cus_add1_en').val(cus_bill_cus_add1_en);
        $('#id_cus_bill_cus_add2_en').val(cus_bill_cus_add2_en);
        $('#id_cus_bill_cus_subdist_en').val(cus_bill_cus_subdist_en);
        $('#id_cus_bill_cus_district_en').val(cus_bill_cus_district_en);
        $('#id_cus_bill_cus_city_en').val(cus_bill_cus_city_en);
        $('#id_cus_bill_cus_country_en').val(cus_bill_cus_country_en);
        $('#id_cus_bill_cus_zip').val(cus_bill_cus_zip);
        $('#id_cus_bill_cus_tel').val(cus_bill_cus_tel);
        $('#id_cus_bill_cus_fax').val(cus_bill_cus_fax);
        $('#id_cus_bill_cus_email').val(cus_bill_cus_email);
        $('#id_cus_bill_cus_zone').val(cus_bill_cus_zone);

        $('#id_cus_bill_cus_contact_id').val(cus_bill_cus_contact_id);
        $('#id_cus_bill_cus_contact_title_id').val()
        $('#id_cus_bill_cus_contact_cus_title_th').val(cus_bill_cus_contact_title_th);

        if(cus_bill_cus_contact_con_sex == 'M') {
          $('#id_cus_bill_sex_male').prop("checked", true);
          $('#id_cus_bill_sex_female').prop("checked", false);
        }

        if(cus_bill_cus_contact_con_sex == 'F') {
          $('#id_cus_bill_sex_male').prop("checked", false);
          $('#id_cus_bill_sex_female').prop("checked", true);
        }

        $('#id_cus_bill_cus_contact_con_fname_th').val(cus_bill_cus_contact_fname_th);
        $('#id_cus_bill_cus_contact_con_lname_th').val(cus_bill_cus_contact_lname_th);
        $('#id_cus_bill_cus_contact_con_position_th').val(cus_bill_cus_contact_position_th);
        $('#id_cus_bill_cus_contact_title_list').val(cus_bill_cus_contact_title_id);
        $('#id_cus_bill_cus_contact_cus_title_en').val(cus_bill_cus_contact_title_en);
        $('#id_cus_bill_cus_contact_con_fname_en').val(cus_bill_cus_contact_fname_en);
        $('#id_cus_bill_cus_contact_con_lname_en').val(cus_bill_cus_contact_lname_en);
        $('#id_cus_bill_cus_contact_con_position_en').val(cus_bill_cus_contact_position_en);
        $('#id_cus_bill_cus_contact_nation_list').val(cus_bill_cus_contact_con_nationality_id);
        $('#id_cus_bill_cus_contact_con_mobile').val(cus_bill_cus_contact_con_mobile);
        $('#id_cus_bill_cus_contact_con_email').val(cus_bill_cus_contact_con_email);

      },
      error: function(data) {
        //alert(data.error);    
      },
    });      

  }

  
  // cus_brn
  $(document).on('keypress', '#id_cus_brn', function(e) {
    if(e.which == 13) {      
      e.preventDefault();

      var obj = $(this);      
      var cus_brn = obj.val();
      var cus_id = $('#id_cus_id').val();

      enter_id_cus_brn(cus_id, cus_brn);

    }
  });






  $("#cusMainSaveButton").click( function() {
    event.preventDefault();
    alert("todo: to be deleted");
  });

  $("#cusMainCreateSaveButton").click( function() {
    event.preventDefault();
    add_cus_main();    
  });

  $("#saveAllCustomerTabs").click( function() {
    event.preventDefault();

    var cus_id = $('#id_cus_id').val();
    var cus_brn = $('#id_cus_brn').val();
    
    //var cus_main_cus_district_id = $('#id_cus_main_cus_district_id').val();
    //var cus_site_cus_district_id = $('#id_cus_site_cus_district_id').val();  

    if(cus_id=='' || cus_brn=='') {
      alert("Customer Code is required.");
      $('#id_cus_id').focus();
    }
    else
      save_all_cus_tabs();
  });

  function save_all_cus_tabs() {

    cus_id = $('#id_cus_id').val();
    cus_brn = $('#id_cus_brn').val();

    // CUS_MAIN_CUS_ACTIVE
    if ($('#id_cus_main_cus_active').is(":checked"))
      cus_main_cus_active = 1;
    else
      cus_main_cus_active = 0;


    // CUS_MAIN
    cus_main_cus_name_th = $('#id_cus_main_cus_name_th').val();
    cus_main_cus_add1_th = $('#id_cus_main_cus_add1_th').val();
    cus_main_cus_add2_th = $('#id_cus_main_cus_add2_th').val();    
    cus_main_cus_subdist_th = $('#id_cus_main_cus_subdist_th').val();
    cus_main_cus_district_id = $('#id_cus_main_select_district_id').val();    
    cus_main_cus_district = $('#id_cus_main_cus_district').val();
    cus_main_cus_name_en = $('#id_cus_main_cus_name_en').val();
    cus_main_cus_add1_en = $('#id_cus_main_cus_add1_en').val();
    cus_main_cus_add2_en = $('#id_cus_main_cus_add2_en').val();
    cus_main_cus_subdist_en = $('#id_cus_main_cus_subdist_en').val();
    cus_main_cus_zip = $('#id_cus_main_cus_zip').val();
    cus_main_cus_tel = $('#id_cus_main_cus_tel').val();
    cus_main_cus_fax = $('#id_cus_main_cus_fax').val();
    cus_main_cus_email = $('#id_cus_main_cus_email').val();    
    cus_main_cus_taxid = $('#id_customer_group_id').val();
    cus_main_cus_zone = $('#id_cus_main_cus_zone').val();    
    customer_option_btype = $('#id_cus_main_business_type').val();
    customer_option_op1 = $('#id_cus_main_customer_option_op1').val();
    customer_option_op2 = $('#id_cus_main_customer_option_op2').val();
    customer_option_op3 = $('#id_cus_main_customer_option_op3').val();
    customer_option_op4 = $('#id_cus_main_customer_option_op4').val();
    customer_option_opn1 = $('#id_cus_main_customer_option_opn1').val();


    // CUS_MAIN_CUS_CONTACT
    cus_main_cus_contact_id = $('#id_cus_main_cus_contact_id').val();
    cus_main_select_contact_title_id = $('#id_cus_main_cus_contact_title_list').val();    
    cus_main_cus_contact_cus_title_th = $('#id_cus_main_cus_contact_cus_title_th').val();
    cus_main_cus_contact_con_fname_th = $('#id_cus_main_cus_contact_con_fname_th').val();
    cus_main_cus_contact_con_lname_th = $('#id_cus_main_cus_contact_con_lname_th').val();
    cus_main_cus_contact_con_position_th = $('#id_cus_main_cus_contact_con_position_th').val();
    cus_main_cus_contact_title_sex = $("input[name='sexOptions']:checked").val();        
    cus_main_cus_contact_cus_title_en = $('#id_cus_main_cus_contact_cus_title_en').val();
    cus_main_cus_contact_con_fname_en = $('#id_cus_main_cus_contact_con_fname_en').val();
    cus_main_cus_contact_con_lname_en = $('#id_cus_main_cus_contact_con_lname_en').val();
    cus_main_cus_contact_con_position_en = $('#id_cus_main_cus_contact_con_position_en').val();
    cus_main_cus_contact_sex_option = $("input[name=sexOptions]:checked").val();
    cus_main_cus_contact_con_nationality_id = $("#id_cus_main_cus_contact_nation_list").val();
    cus_main_cus_contact_con_mobile = $("#id_cus_main_cus_contact_con_mobile").val();
    cus_main_cus_contact_con_email = $("#id_cus_main_cus_contact_con_email").val();

    /*
    console.log("--------cus_main---------\n");
    console.log(
      cus_main_cus_contact_id + "," + 
      cus_main_select_contact_title_id + "," +
      cus_main_cus_contact_con_fname_th + "," +
      cus_main_cus_contact_con_lname_th + "," +
      cus_main_cus_contact_con_position_th + "," +
      cus_main_cus_contact_title_sex + "," +
      cus_main_cus_contact_cus_title_en + "," +
      cus_main_cus_contact_con_fname_en + "," +
      cus_main_cus_contact_con_lname_en + "," +
      cus_main_cus_contact_con_position_en + "," +
      cus_main_cus_contact_con_nationality_id + "," +
      cus_main_cus_contact_con_mobile + "," +
      cus_main_cus_contact_con_email);
    console.log("--------end---------\n\n\n");
    */

    // CUS_SITE
    if ($('#id_cus_site_cus_active').is(":checked"))
      cus_site_cus_active = 1;
    else
      cus_site_cus_active = 0;

    //cus_site_cus_taxid = $('#id_customer_group_id').val();
    cus_site_cus_taxid = $('#id_customer_group_id_text').val();

    cus_site_cus_name_th = $('#id_cus_site_cus_name_th').val();
    cus_site_cus_add1_th = $('#id_cus_site_cus_add1_th').val();
    cus_site_cus_add2_th = $('#id_cus_site_cus_add2_th').val();    
    cus_site_cus_subdist_th = $('#id_cus_site_cus_subdist_th').val();
    cus_site_cus_district_id = $('#id_cus_site_select_district_id').val();    
    cus_site_cus_name_en = $('#id_cus_site_cus_name_en').val();    
    cus_site_cus_add1_en = $('#id_cus_site_cus_add1_en').val();
    cus_site_cus_add2_en = $('#id_cus_site_cus_add2_en').val();    
    cus_site_cus_subdist_en = $('#id_cus_site_cus_subdist_en').val();
    cus_site_cus_zip = $('#id_cus_site_cus_zip').val();
    cus_site_cus_tel = $('#id_cus_site_cus_tel').val();
    cus_site_cus_fax = $('#id_cus_site_cus_fax').val();
    cus_site_cus_email = $('#id_cus_site_cus_email').val();    
    cus_site_cus_zone = $('#id_cus_site_cus_zone').val();    
  
    // CUS_SITE_CUS_CONTACT    
    cus_site_site_contact_id = $('#id_cus_site_site_contact_id').val();        
    cus_site_select_contact_title_id = $('#id_cus_site_cus_contact_title_list').val();    
    cus_site_site_contact_con_fname_th = $('#id_cus_site_site_contact_fname_th').val();
    cus_site_site_contact_con_lname_th= $('#id_cus_site_site_contact_lname_th').val();    
    cus_site_site_contact_con_position_th = $('#id_cus_site_site_contact_position_th').val();    
    cus_site_site_contact_con_sex = $("input[name=cus_site_sex_options]:checked").val();
    cus_site_site_contact_cus_title_en = $('#id_cus_site_site_contact_cus_title_en').val();
    cus_site_site_contact_con_fname_en = $('#id_cus_site_site_contact_con_fname_en').val();
    cus_site_site_contact_con_lname_en = $('#id_cus_site_site_contact_con_lname_en').val();
    cus_site_site_contact_con_position_en = $('#id_cus_site_site_contact_con_position_en').val();
    cus_site_site_contact_con_nationality_id = $("#id_cus_site_site_contact_nation_list").val();
    cus_site_site_contact_con_mobile = $("#id_cus_site_site_contact_con_mobile").val();
    cus_site_site_contact_con_email = $("#id_cus_site_site_contact_con_email").val();


    // CUS_BILL
    if ($('#id_cus_bill_cus_active').is(":checked"))
      cus_bill_cus_active = 1;
    else
      cus_bill_cus_active = 0;

    cus_bill_cus_name_th = $('#id_cus_bill_cus_name_th').val();    
    cus_bill_cus_add1_th = $('#id_cus_bill_cus_add1_th').val();
    cus_bill_cus_add2_th = $('#id_cus_bill_cus_add2_th').val();    
    cus_bill_cus_subdist_th = $('#id_cus_bill_cus_subdist_th').val();
    cus_bill_cus_district_id = $('#id_cus_bill_select_district_id').val();
    cus_bill_cus_district = $('#id_cus_bill_cus_district').val();
    cus_bill_cus_name_en = $('#id_cus_bill_cus_name_en').val();
    cus_bill_cus_add1_en = $('#id_cus_bill_cus_add1_en').val();
    cus_bill_cus_add2_en = $('#id_cus_bill_cus_add2_en').val();
    cus_bill_cus_subdist_en = $('#id_cus_bill_cus_subdist_en').val();
    cus_bill_cus_zip = $('#id_cus_bill_cus_zip').val();
    cus_bill_cus_tel = $('#id_cus_bill_cus_tel').val();
    cus_bill_cus_fax = $('#id_cus_bill_cus_fax').val();
    cus_bill_cus_email = $('#id_cus_bill_cus_email').val();
    cus_bill_cus_zone = $('#id_cus_bill_cus_zone').val();    

    cus_bill_cus_contact_id = $('#id_cus_bill_cus_contact_id').val();        
    cus_bill_select_contact_title_id = $('#id_cus_bill_cus_contact_title_list').val();
    cus_bill_cus_contact_con_fname_th = $('#id_cus_bill_cus_contact_con_fname_th').val();
    cus_bill_cus_contact_con_lname_th= $('#id_cus_bill_cus_contact_con_lname_th').val();    
    cus_bill_cus_contact_con_position_th = $('#id_cus_bill_cus_contact_con_position_th').val();    
    cus_bill_cus_contact_con_sex = $("input[name=cus_bill_sex_options]:checked").val();
    cus_bill_cus_contact_cus_title_en = $('#id_cus_bill_cus_contact_cus_title_en').val();
    cus_bill_cus_contact_con_fname_en = $('#id_cus_bill_cus_contact_con_fname_en').val();
    cus_bill_cus_contact_con_lname_en = $('#id_cus_bill_cus_contact_con_lname_en').val();
    cus_bill_cus_contact_con_position_en = $('#id_cus_bill_cus_contact_con_position_en').val();
    cus_bill_cus_contact_con_nationality_id = $("#id_cus_bill_cus_contact_nation_list").val();
    cus_bill_cus_contact_con_mobile = $("#id_cus_bill_cus_contact_con_mobile").val();
    cus_bill_cus_contact_con_email = $("#id_cus_bill_cus_contact_con_email").val();

    /*
    console.log("--------cus_bill---------\n");
    console.log(cus_bill_cus_contact_id + "," + 
      cus_bill_select_contact_title_id + "," +
      cus_bill_cus_contact_con_fname_th + "," +
      cus_bill_cus_contact_con_lname_th + "," +
      cus_bill_cus_contact_con_position_th + "," +
      cus_bill_cus_contact_con_sex + "," +
      cus_bill_cus_contact_cus_title_en + "," +
      cus_bill_cus_contact_con_fname_en + "," +
      cus_bill_cus_contact_con_lname_en + "," +
      cus_bill_cus_contact_con_position_en + "," +
      cus_bill_cus_contact_con_nationality_id + "," +
      cus_bill_cus_contact_con_mobile + "," +
      cus_bill_cus_contact_con_email);
    console.log("--------end---------\n\n\n");
    */

    $.ajax({
      url : "/customer/ajax/save_all_cus_tabs/",
      type : "POST",
      data : {          
        csrfmiddlewaretoken: '{{ csrf_token }}',
        cus_id: cus_id,
        cus_brn: cus_brn,

        // CUS_MAIN
        cus_main_cus_active: cus_main_cus_active,        
        cus_main_cus_name_th: cus_main_cus_name_th,
        cus_main_cus_add1_th: cus_main_cus_add1_th,
        cus_main_cus_add2_th: cus_main_cus_add2_th,
        cus_main_cus_subdist_th: cus_main_cus_subdist_th,
        cus_main_cus_district_id: cus_main_cus_district_id,        
        cus_main_cus_name_en: cus_main_cus_name_en,
        cus_main_cus_add1_en: cus_main_cus_add1_en,
        cus_main_cus_add2_en: cus_main_cus_add2_en,
        cus_main_cus_subdist_en: cus_main_cus_subdist_en,        
        cus_main_cus_zip: cus_main_cus_zip,
        cus_main_cus_tel: cus_main_cus_tel,
        cus_main_cus_fax: cus_main_cus_fax,
        cus_main_cus_email: cus_main_cus_email,
        cus_main_cus_taxid: cus_main_cus_taxid,
        cus_main_cus_zone: cus_main_cus_zone,        
        cus_main_business_type: customer_option_btype,
        cus_main_customer_option_op1: customer_option_op1,
        cus_main_customer_option_op2: customer_option_op2,
        cus_main_customer_option_op3: customer_option_op3,
        cus_main_customer_option_op4: customer_option_op4,
        cus_main_customer_option_opn1: customer_option_opn1,
              
        cus_main_cus_contact_id: cus_main_cus_contact_id, 
        cus_main_select_contact_title_id: cus_main_select_contact_title_id,
        cus_main_cus_contact_cus_title_th: cus_main_cus_contact_cus_title_th,
        cus_main_cus_contact_con_fname_th: cus_main_cus_contact_con_fname_th,
        cus_main_cus_contact_con_lname_th: cus_main_cus_contact_con_lname_th,
        cus_main_cus_contact_con_position_th: cus_main_cus_contact_con_position_th,
        cus_main_cus_contact_title_sex: cus_main_cus_contact_title_sex,
        cus_main_cus_contact_cus_title_en: cus_main_cus_contact_cus_title_en,
        cus_main_cus_contact_con_fname_en: cus_main_cus_contact_con_fname_en,
        cus_main_cus_contact_con_lname_en: cus_main_cus_contact_con_lname_en,
        cus_main_cus_contact_con_position_en: cus_main_cus_contact_con_position_en,
        cus_main_cus_contact_sex_option: cus_main_cus_contact_sex_option,
        cus_main_cus_contact_con_nationality_id: cus_main_cus_contact_con_nationality_id,
        cus_main_cus_contact_con_mobile: cus_main_cus_contact_con_mobile,
        cus_main_cus_contact_con_email: cus_main_cus_contact_con_email,



        // CUS_SITE
        cus_site_cus_active: cus_site_cus_active,
        cus_site_cus_name_th: cus_site_cus_name_th,
        cus_site_cus_add1_th: cus_site_cus_add1_th,
        cus_site_cus_add2_th: cus_site_cus_add2_th,
        cus_site_cus_subdist_th: cus_site_cus_subdist_th,
        cus_site_cus_name_en: cus_site_cus_name_en,
        cus_site_cus_add1_en: cus_site_cus_add1_en,
        cus_site_cus_add2_en: cus_site_cus_add2_en,
        cus_site_cus_subdist_en: cus_site_cus_subdist_en,        
        cus_site_cus_district_id: cus_site_cus_district_id,
        cus_site_cus_zip: cus_site_cus_zip,
        cus_site_cus_tel: cus_site_cus_tel,
        cus_site_cus_fax: cus_site_cus_fax,
        cus_site_cus_email: cus_site_cus_email,
        cus_site_cus_zone: cus_site_cus_zone,

        cus_site_site_contact_id: cus_site_site_contact_id,
        cus_site_site_contact_con_fname_th: cus_site_site_contact_con_fname_th,
        cus_site_site_contact_con_lname_th: cus_site_site_contact_con_lname_th,
        cus_site_site_contact_con_position_th: cus_site_site_contact_con_position_th,
        cus_site_select_contact_title_id: cus_site_select_contact_title_id,
        cus_site_site_contact_con_sex: cus_site_site_contact_con_sex,        
        cus_site_site_contact_cus_title_en: cus_site_site_contact_cus_title_en,
        cus_site_site_contact_con_fname_en: cus_site_site_contact_con_fname_en,
        cus_site_site_contact_con_lname_en: cus_site_site_contact_con_lname_en,
        cus_site_site_contact_con_position_en: cus_site_site_contact_con_position_en,
        cus_site_site_contact_con_nationality_id: cus_site_site_contact_con_nationality_id,
        cus_site_site_contact_con_mobile: cus_site_site_contact_con_mobile,
        cus_site_site_contact_con_email: cus_site_site_contact_con_email,        
        cus_site_cus_taxid: cus_site_cus_taxid,


        // CUS_BILL
        cus_bill_cus_active: cus_bill_cus_active,
        cus_bill_cus_name_th: cus_bill_cus_name_th,
        cus_bill_cus_add1_th: cus_bill_cus_add1_th,
        cus_bill_cus_add2_th: cus_bill_cus_add2_th,
        cus_bill_cus_subdist_th: cus_bill_cus_subdist_th,
        cus_bill_cus_name_en: cus_bill_cus_name_en,
        cus_bill_cus_add1_en: cus_bill_cus_add1_en,
        cus_bill_cus_add2_en: cus_bill_cus_add2_en,
        cus_bill_cus_subdist_en: cus_bill_cus_subdist_en,        
        cus_bill_cus_district_id: cus_bill_cus_district_id,
        cus_bill_cus_zip: cus_bill_cus_zip,
        cus_bill_cus_tel: cus_bill_cus_tel,
        cus_bill_cus_fax: cus_bill_cus_fax,
        cus_bill_cus_email: cus_bill_cus_email,
        cus_bill_cus_zone: cus_bill_cus_zone,
        
        cus_bill_cus_contact_id: cus_bill_cus_contact_id,
        cus_bill_select_contact_title_id: cus_bill_select_contact_title_id,
        cus_bill_cus_contact_con_fname_th: cus_bill_cus_contact_con_fname_th,
        cus_bill_cus_contact_con_lname_th: cus_bill_cus_contact_con_lname_th,
        cus_bill_cus_contact_con_position_th: cus_bill_cus_contact_con_position_th,
        cus_bill_cus_contact_con_sex: cus_bill_cus_contact_con_sex,        
        cus_bill_cus_contact_cus_title_en: cus_bill_cus_contact_cus_title_en,
        cus_bill_cus_contact_con_fname_en: cus_bill_cus_contact_con_fname_en,
        cus_bill_cus_contact_con_lname_en: cus_bill_cus_contact_con_lname_en,
        cus_bill_cus_contact_con_position_en: cus_bill_cus_contact_con_position_en,
        cus_bill_cus_contact_con_nationality_id: cus_bill_cus_contact_con_nationality_id,
        cus_bill_cus_contact_con_mobile: cus_bill_cus_contact_con_mobile,
        cus_bill_cus_contact_con_email: cus_bill_cus_contact_con_email,
      },
      success : function(json) {        
        if(json.form_is_valid) {
          $(document).Toasts('create', {
            class: json.class, 
            title: "{% trans 'Message' %}",
            subtitle: '',
            autohide: true,
            delay: 2000,
            body: json.result + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",
            autoDismiss: true,
            close: true,
            autoremove: true,
          });

          if(json.is_cus_main_has_new_contact) {
            $('#id_cus_main_cus_contact_id').val(json.cus_main_new_contact_id);            
          }

          if(json.is_cus_site_has_new_contact) {
            $('#id_cus_site_site_contact_id').val(json.cus_site_new_contact_id);
          }

          if(json.is_cus_bill_has_new_contact) {
            $('#id_cus_bill_cus_contact_id').val(json.cus_bill_new_contact_id);
          }

          $.each($('.is-valid'), function() {
            $('.is-valid').removeClass('is-valid');              
          });            

          $.each($('.is-invalid'), function() {
            $('.is-invalid').addClass('is-valid');  
            $('.is-invalid').removeClass('is-invalid');              
          });           

        }
        else {          
          //alert("b");          

          $(document).Toasts('create', {
            class: json.class,
            title: "{% trans 'Error1' %}",
            subtitle: '',
            autohide: true,
            delay: 5000,
            body: json.message,
            autoDismiss: true,
            close: true,
            autoremove: true,
            preventDuplicates: true,       
          });

          $.each($('.is-invalid'), function() {
            $('.is-invalid').removeClass('is-invalid');
          });            

          for(error in json.errors) {
            $("#id_" + error).addClass("is-invalid");         
          };            


        }
      },
    });
  }

  $(document).ready(function(){
    $('#cus_site_contact_lookup').on('click', function (e) {
      var obj = $(this);
      current_contact_id = $('#id_cus_site_site_contact_id').val();
      
      $.ajax({
          url: obj.attr("data-url"), // url: get_contact_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_contact_id : current_contact_id,
          },          
          beforeSend: function () {
            $("#contact_modal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var con_id = data.results[0]["con_id"];
            var con_fname_th = data.results[0]["con_fname_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_site_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
            result += "    <option value='1'>Contact ID</option>";
            result += "    <option value='2' selected>Name (TH)</option>";
            result += "    <option value='3'>Last Name (TH)</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
            result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
            result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var con_id = data.results[i]["con_id"];
              var con_fname_th = data.results[i]["con_fname_th"];
              var con_lname_th = data.results[i]["con_lname_th"];

              result += "<tr>";
              result += "<td>" + con_id + "</td>";        
              result += "<td>" + con_fname_th + "</td>";
              result += "<td>" + con_lname_th + "</td>";
              result += "<td class='text-right'><a href='javascript:cus_site_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
              result += "</tr>";
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }

            $("#contact_modal .modal-body").html(result);            
          },
          error: function(data){
            $("#contact_modal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });

    });
  });

  function cus_site_search_district_modal() {
    current_district_id = $('#id_cus_site_select_district_id').val();
    search_district_option = $('#id_cus_site_cus_district_option').val();
    search_district_text = $('#id_cus_site_cus_district_search_text').val();

    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          city_name : search_district_text,
          search_district_option : search_district_option,          
          search_district_text : search_district_text,
          current_district_id : current_district_id,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var city_name_th = data.results[i]["city_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_en = data.results[i]["city_en"];
            var country_name_th = data.results[i]["country_name_th"];
            var country_name_en = data.results[i]["country_name_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";
            
            //result += "<td><a href='javascript:select_cus_site_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
            result += "<td><a href='javascript:select_cus_site_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#districtmodal .modal-body").html(result);
        }          
    });
  }

  function cus_bill_search_district_modal() {
    current_district_id = $('#id_cus_bill_select_district_id').val();
    search_district_option = $('#id_cus_bill_cus_district_option').val();
    search_district_text = $('#id_cus_bill_cus_district_search_text').val();

    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          city_name : search_district_text,
          search_district_option : search_district_option,          
          search_district_text : search_district_text,
          current_district_id : current_district_id,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_bill_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_bill_cus_district_option' class='form-control form-control-sm' required id='id_cus_bill_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_district_search_text' name='cus_bill_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_bill_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var city_name_th = data.results[i]["city_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_en = data.results[i]["city_en"];
            var country_name_th = data.results[i]["country_name_th"]
            var country_name_en = data.results[i]["country_name_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";            
            result += "<td><a href='javascript:select_cus_bill_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_bill_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_bill_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_bill_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_bill_cus_district_option' class='form-control form-control-sm' required id='id_cus_bill_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_bill_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#districtmodal .modal-body").html(result);
        }          
    });
  }

  function cus_site_select_contact(con_id) {
    $.ajax({
        url : "/customer/ajax/get_contact",
        type: 'get',          
        dataType: 'json',
        data : {          
          contact_id : con_id,
        },
        beforeSend: function () {
          $("#contact_modal").modal("show");
        },
        success: function (data) {
          var con_id = data.results[0]["con_id"];
          var con_fname_th = data.results[0]["con_fname_th"];
          var con_lname_th = data.results[0]["con_lname_th"];
          var con_position_th = data.results[0]["con_position_th"];
          $("#id_cus_site_site_contact_id").val(con_id);
          $("#id_cus_site_site_contact_fname_th").val(con_fname_th);          
          $("#id_cus_site_site_contact_lname_th").val(con_lname_th);          
          $("#id_cus_site_site_contact_position_th").val(con_position_th);
        },
        error: function(data){
          // 
        }          
    });

    $("#contact_modal").modal("hide");    
  }

  $(document).ready(function(){

    $('#cus_main_district_lookup').on('click', function (e) {
      var obj = $(this);
      current_district_id = $('#id_cus_main_select_district_id').val();

      $.ajax({
          url: obj.attr("data-url"),
          type: 'get',          
          dataType: 'json',
          data : {          
            current_district_id : current_district_id, // get_district_list
          },          
          beforeSend: function () {
            $("#districtmodal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var dist_id = data.results[0]["dist_id"];
            var dist_th = data.results[0]["dist_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_main_cus_district_option' class='form-control form-control-sm' required id='id_cus_main_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_district_search_text' name='cus_main_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_main_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var dist_id = data.results[i]["dist_id"];
              var dist_name_th = data.results[i]["dist_th"];
              var dist_name_en = data.results[i]["dist_en"];
              var city_name_th = data.results[i]["city_th"];
              var city_name_en = data.results[i]["city_en"];
              var country_name_th = data.results[i]["country_name_th"];
              var country_name_en = data.results[i]["country_name_en"];

              result += "<tr>";
              result += "<td>" + dist_id + "</td>";        
              result += "<td>" + dist_name_th + "</td>";
              result += "<td>" + city_name_th + "</td>";
          
              result += "<td><a href='javascript:select_cus_main_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

              result += "</tr>";              
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }
            
            $("#districtmodal .modal-body").html(result);            
          },
          error: function(data){
            $("#districtmodal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });



    });
  });

  function cus_main_search_district_modal() {
    current_district_id = $('#id_cus_main_select_district_id').val();
    search_district_option = $('#id_cus_main_cus_district_option').val();
    search_district_text = $('#id_cus_main_cus_district_search_text').val();

    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_district_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          city_name : search_district_text,
          search_district_option : search_district_option,          
          search_district_text : search_district_text,
          current_district_id : current_district_id,
        },
        success: function (data) {
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_main_cus_district_option' class='form-control form-control-sm' required id='id_cus_main_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_district_search_text' name='cus_main_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_main_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

          for(var i=0; i<count; i++) {              
            var dist_id = data.results[i]["dist_id"];
            var dist_name_th = data.results[i]["dist_th"];
            var city_name_th = data.results[i]["city_th"];
            var dist_name_en = data.results[i]["dist_en"];
            var city_name_en = data.results[i]["city_en"];
            var country_name_th = data.results[i]["country_name_th"];
            var country_name_en = data.results[i]["country_name_en"];

            result += "<tr>";
            result += "<td>" + dist_id + "</td>";        
            result += "<td>" + dist_name_th + "</td>";
            result += "<td>" + city_name_th + "</td>";
            
            //result += "<td><a href='javascript:cus_main_select_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
            result += "<td><a href='javascript:select_cus_main_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_cus_main_district_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_cus_main_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          
          $("#districtmodal .modal-body").html(result);          
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_main_cus_district_option' class='form-control form-control-sm' required id='id_cus_main_cus_district_option'>";
          result += "    <option value='1'>District ID</option>";
          result += "    <option value='2'>District</option>";
          result += "    <option value='3' selected>City</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_district_search_text' name='cus_main_cus_district_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_main_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#districtmodal .modal-body").html(result);
        }          
    });
  }

  function cus_main_select_contact(con_id) {    
    $.ajax({
        url : "/customer/ajax/get_contact",
        type: 'get',          
        dataType: 'json',
        data : {          
          contact_id : con_id,
        },
        beforeSend: function () {
          $("#contact_modal").modal("show");
        },
        success: function (data) {
          var con_id = data.results[0]["con_id"];
          var con_title_id = data.results[0]["con_title_id"];
          var con_title = data.results[0]["con_title_th"]
          var con_fname_th = data.results[0]["con_fname_th"];
          var con_lname_th = data.results[0]["con_lname_th"];
          var con_position_th = data.results[0]["con_position_th"];

          var con_title_en = data.results[0]["con_title_en"]
          var con_fname_en = data.results[0]["con_fname_en"];
          var con_lname_en = data.results[0]["con_lname_en"];
          var con_position_en = data.results[0]["con_position_en"];
          var con_sex = data.results[0]["con_sex"];
          var con_mobile = data.results[0]["con_mobile"];
          var con_email = data.results[0]["con_email"];
          var con_nation = data.results[0]["con_nation"];

          $("#id_cus_main_cus_contact_id").val(con_id);
          $("#id_cus_main_cus_contact_title_list").val(con_title_id);
          $("#id_cus_main_cus_contact_con_fname_th").val(con_fname_th);          
          $("#id_cus_main_cus_contact_con_lname_th").val(con_lname_th);          
          $("#id_cus_main_cus_contact_con_position_th").val(con_position_th);
          $("#id_cus_main_cus_contact_cus_title_en").val(con_title_en);
          $("#id_cus_main_cus_contact_con_fname_en").val(con_fname_en);          
          $("#id_cus_main_cus_contact_con_lname_en").val(con_lname_en);
          $("#id_cus_main_cus_contact_con_position_en").val(con_position_en);          

          if(con_sex == 'M') {
            $("#id_sex_male").prop("checked", true);
            $("#id_sex_female").prop("checked", false);
          }
          
          if(con_sex == 'F') {
            $("#id_sex_male").prop("checked", false);
            $("#id_sex_female").prop("checked", true);            
          }


          $("#id_cus_main_cus_contact_con_mobile").val(con_mobile);
          $("#id_cus_main_cus_contact_con_email").val(con_email);
          $("#id_cus_main_cus_contact_nation_list").val(con_nation);

        },
        error: function(data){
          // 
        }          
    });

    $("#contact_modal").modal("hide");    
  }

  function cus_main_search_contact_modal() {
    current_contact_id = $('#id_cus_main_select_cus_contact_id').val();    
    search_contact_option = $('#id_cus_main_cus_contact_option').val();
    search_contact_text = $('#id_cus_main_cus_contact_search_text').val();
    page_no = 1;

    console.log(current_contact_id);

    $.ajax({
        url : "/customer/ajax/get_contact_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_contact_id : current_contact_id,
          search_contact_option : search_contact_option,
          search_contact_text : search_contact_text,          
        },
        success: function (data) {
    
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_main_cus_contact_option' class='form-control form-control-sm' required id='id_cus_main_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_contact' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_contact_search_text' name='cus_main_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_main_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          
          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
          result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
          result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";

          for(var i=0; i<count; i++) {              
            var con_id = data.results[i]["con_id"];
            var con_fname_th = data.results[i]["con_fname_th"];
            var con_lname_th = data.results[i]["con_lname_th"];
            var con_position_th = data.results[i]["con_position_th"];
            var con_position_en = data.results[i]["con_position_en"];

            result += "<tr>";
            result += "<td>" + con_id + "</td>";        
            result += "<td>" + con_fname_th + "</td>";
            result += "<td>" + con_lname_th + "</td>";
            
            result += "<td class='text-right'><a href='javascript:cus_main_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";


            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_main_contact_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_main_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          

          $("#contact_modal .modal-body").html(result);
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_main_cus_contact_option' class='form-control form-control-sm' required id='id_cus_main_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_contact_search_text' name='cus_main_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_main_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#contact_modal .modal-body").html(result);
        }          
    });
  }


  function cus_site_search_contact_modal() {
    current_contact_id = $('#id_cus_site_select_site_contact_id').val();
    search_contact_option = $('#id_cus_site_cus_contact_option').val();
    search_contact_text = $('#id_cus_site_cus_contact_search_text').val();    
    page_no = 1;

    $.ajax({
        url : "/customer/ajax/get_contact_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          current_contact_id : current_contact_id,
          search_contact_option : search_contact_option,
          search_contact_text : search_contact_text,          
        },
        success: function (data) {
    
          var result = ""
          var count = data.results.length;
          var dist_id = data.results[0]["dist_id"];
          var dist_th = data.results[0]["dist_th"];


          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          
          result += "<div class='row col-12'>";
          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
          result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
          result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";
          result += "<tbody>";
          result += "</div>";
          result += "<div>";

          for(var i=0; i<count; i++) {              
            var con_id = data.results[i]["con_id"];
            var con_fname_th = data.results[i]["con_fname_th"];
            var con_lname_th = data.results[i]["con_lname_th"];
            var con_position_th = data.results[i]["con_position_th"];
            var con_position_en = data.results[i]["con_position_en"];

            result += "<tr>";
            result += "<td>" + con_id + "</td>";        
            result += "<td>" + con_fname_th + "</td>";
            result += "<td>" + con_lname_th + "</td>";
            
            result += "<td class='text-right'><a href='javascript:cus_site_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

            result += "</tr>";              
          }
          result += " </tbody>";
          result += "</table>";

          if(data.is_paginated) {
            result += "<div>";
            result += "  <span>";
            if(data.previous_page != 0) {
              result += " <a href='javascript:get_site_contact_lookup(" + data.previous_page + ");'>" + "<i class='fas fa-arrow-circle-left'></i></a> ";
            }
            result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
            result += " <a href='javascript:get_site_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
            result += "    </span>";
            result += "</div>";
          }
          

          $("#contact_modal .modal-body").html(result);
        },
        error: function(data){
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_site_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='cus_site_cus_contact_option' class='form-control form-control-sm' required id='id_cus_site_cus_contact_option'>";
          result += "    <option value='1'>Contact ID</option>";
          result += "    <option value='2' selected>Name (TH)</option>";
          result += "    <option value='3'>Last Name (TH)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_contact_search_text' name='cus_site_cus_contact_search_text' placeholder=''>";
          result += "  </div>";
          result += "<a href='javascript:cus_site_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>Not found.<br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#contact_modal .modal-body").html(result);
        }          
    });
  }


  $(document).ready(function(){
    $("#id_customer_group_id").change(function(){         
      $(".groupIDTextBox").val($("#id_customer_group_id option:selected").html());
    });

    $("#id_customer_option_btype").change(function(){         
      $(".businessTypeTextBox").val($("#id_customer_option_btype option:selected").html());
    });

    $("#id_customer_option_op2").change(function(){         
      $(".group1TextBox").val($("#id_customer_option_op2 option:selected").html());
    });

    $("#id_customer_option_op3").change(function(){         
      $(".group2TextBox").val($("#id_customer_option_op3 option:selected").html());
    });

    $("#id_cus_main_cus_contact_title_list").change(function(){         
      //$("#id_cus_main_cus_contact_cus_title_en").val($("#id_cus_main_cus_contact_title_list option:selected").html());
      
      var contact_id = $("#id_cus_main_cus_contact_id").val();
      var title_id = $("#id_cus_main_cus_contact_title_list option:selected").val();

      $.ajax({
        url: "/customer/ajax/get_contact_title/",
        type: 'get',          
        dataType: 'json',
        data : {          
          title_id : title_id,
        },
        success: function (data) {
          var title_en = data.title_en;
          var title_sex = data.title_sex;

          $("#id_cus_main_cus_contact_cus_title_en").val(title_en);

          if(title_sex == 'M') {
            $("#id_sex_male").prop("checked", true);
            $("#id_sex_female").prop("checked", false);
          }
          
          if(title_sex == 'F') {
            $("#id_sex_male").prop("checked", false);
            $("#id_sex_female").prop("checked", true);            
          }
          
        },
        error: function(data){
          alert("Error!");
        }        
      });

    });

  });

  $(document).ready(function(){
    $('#cus_main_contact_lookup').on('click', function (e) {
      var obj = $(this);
      current_contact_id = $('#id_cus_main_cus_contact_id').val();
      
      if(current_contact_id == null)
        current_contact_id = null;

      $.ajax({
          url: obj.attr("data-url"),  // get_contact_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_contact_id : current_contact_id,
          },          
          beforeSend: function () {
            $("#contact_modal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var con_id = data.results[0]["con_id"];
            var con_fname_th = data.results[0]["con_fname_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_main_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_main_contact_option' class='form-control form-control-sm' required id='id_cus_main_cus_contact_option'>";
            result += "    <option value='1'>Contact ID</option>";
            result += "    <option value='2' selected>Name (TH)</option>";
            result += "    <option value='3'>Last Name (TH)</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_contact' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_main_cus_contact_search_text' name='cus_main_cus_contact_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_main_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
            result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
            result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var con_id = data.results[i]["con_id"];
              var con_fname_th = data.results[i]["con_fname_th"];
              var con_lname_th = data.results[i]["con_lname_th"];              

              result += "<tr>";
              result += "<td>" + con_id + "</td>";        
              result += "<td>" + con_fname_th + "</td>";
              result += "<td>" + con_lname_th + "</td>";
              result += "<td class='text-right'><a href='javascript:cus_main_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
              result += "</tr>";
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_main_distict_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }

            $("#contact_modal .modal-body").html(result);            
          },
          error: function(data){
            $("#contact_modal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });

    });
  });

  $(document).ready(function(){
    $('#cus_site_district_lookup').on('click', function (e) {
      var obj = $(this);
      cus_site_cus_district_id = $('#id_cus_site_cus_district_id').val();
      $.ajax({
          url: obj.attr("data-url"),
          type: 'get',          
          dataType: 'json',
          data : {          
            current_district_id : cus_site_cus_district_id,
          },          
          beforeSend: function () {
            $("#districtmodal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var dist_id = data.results[0]["dist_id"];
            var dist_th = data.results[0]["dist_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_site_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_site_cus_district_option' class='form-control form-control-sm' required id='id_cus_site_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_site_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_site_cus_district_search_text' name='cus_site_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_site_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var dist_id = data.results[i]["dist_id"];
              var dist_name_th = data.results[i]["dist_th"];
              var dist_name_en = data.results[i]["dist_en"];
              var city_name_th = data.results[i]["city_th"];
              var city_name_en = data.results[i]["city_en"];
              var country_name_th = data.results[i]["country_name_th"];
              var country_name_en = data.results[i]["country_name_en"];


              result += "<tr>";
              result += "<td>" + dist_id + "</td>";        
              result += "<td>" + dist_name_th + "</td>";
              result += "<td>" + city_name_th + "</td>";
              result += "<td><a href='javascript:select_cus_site_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

              result += "</tr>";              
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_site_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }
            
            $("#districtmodal .modal-body").html(result);            
          },
          error: function(data){
            $("#districtmodal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });
    });  
  });

  $(document).ready(function(){
    $('#cus_bill_district_lookup').on('click', function (e) {
      var obj = $(this);
      cus_bill_cus_district_id = $('#id_cus_bill_select_district_id').val();
      $.ajax({
          url: obj.attr("data-url"),
          type: 'get',          
          dataType: 'json',
          data : {          
            current_district_id : cus_bill_cus_district_id,
          },          
          beforeSend: function () {
            $("#districtmodal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var dist_id = data.results[0]["dist_id"];
            var dist_th = data.results[0]["dist_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_bill_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_bill_cus_district_option' class='form-control form-control-sm' required id='id_cus_bill_cus_district_option'>";
            result += "    <option value='1'>District ID</option>";
            result += "    <option value='2'>District</option>";
            result += "    <option value='3' selected>City</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_bill_search_district' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_district_search_text' name='cus_bill_cus_district_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_bill_search_district_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'District ID' %}</th>";
            result += "     <th scope='col'>{% trans 'District' %}</th>";
            result += "     <th scope='col'>{% trans 'City' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var dist_id = data.results[i]["dist_id"];
              var dist_name_th = data.results[i]["dist_th"];
              var dist_name_en = data.results[i]["dist_en"];
              var city_name_th = data.results[i]["city_th"];
              var city_name_en = data.results[i]["city_en"];
              var country_name_th = data.results[i]["country_name_th"];
              var country_name_en = data.results[i]["country_name_en"];


              result += "<tr>";
              result += "<td>" + dist_id + "</td>";        
              result += "<td>" + dist_name_th + "</td>";
              result += "<td>" + city_name_th + "</td>";
              result += "<td><a href='javascript:select_cus_bill_district(" + dist_id + ",\"" + dist_name_th + "\",\"" + city_name_th + "\",\"" + dist_name_en + "\",\"" + city_name_en + "\",\"" + country_name_th + "\",\"" + country_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";

              result += "</tr>";              
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_bill_district_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }
            
            $("#districtmodal .modal-body").html(result);            
          },
          error: function(data){
            $("#districtmodal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });
    });  
  });

  // TODO - DELETE
  /*
  function select_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en) {
    $("#id_cus_site_cus_district_id").val(dist_id); 
    $("#id_cus_site_cus_district_dist_th").val(dist_name_th);
    $("#id_cus_site_cus_district_en").val(dist_name_en);    
    $("#id_cus_site_cus_city_th").val(city_name_th);
    $("#id_cus_site_cus_city_en").val(city_name_en);
    $("#districtmodal").modal("hide");    
  }

  function cus_bill_select_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en, country_name_th, country_name_en) {
    $("#id_cus_bill_cus_district_dist_th").val(dist_name_th);
    $("#id_cus_bill_select_district_id").val(dist_id);
    $("#id_cus_bill_cus_city_th").val(city_name_th);
    $("#id_cus_bill_cus_district_en").val(dist_name_en);
    $("#id_cus_bill_cus_city_en").val(city_name_en);    
    $("#id_cus_bill_cus_country_th").val(country_name_th);
    $("#id_cus_bill_cus_country_en").val(country_name_en);

    $("#districtmodal").modal("hide");    
  };
  */

  // CUS_MAIN
  function select_cus_main_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en, country_name_th, country_name_en) {
    $("#id_cus_main_cus_district_dist_th").val(dist_name_th);
    $("#id_cus_main_select_district_id").val(dist_id);
    $("#id_cus_main_cus_city_th").val(city_name_th);
    $("#id_cus_main_cus_district_en").val(dist_name_en);
    $("#id_cus_main_cus_city_en").val(city_name_en);    

    $("#id_cus_main_cus_country_th").val(country_name_th);
    $("#id_cus_main_cus_country_en").val(country_name_en);

    $("#districtmodal").modal("hide");    
  };

  // CUS_SITE
  function select_cus_site_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en, country_name_th, country_name_en) {    
    $("#id_cus_site_cus_district_dist_th").val(dist_name_th);

    $("#id_cus_site_select_district_id").val(dist_id);
    
    $("#id_cus_site_cus_city_th").val(city_name_th);    
    $("#id_cus_site_cus_district_en").val(dist_name_en);
    $("#id_cus_site_cus_city_en").val(city_name_en);
    $("#id_cus_site_cus_country_th").val(country_name_th);
    $("#id_cus_site_cus_country_en").val(country_name_en);
    $("#districtmodal").modal("hide");  
  }

  // CUS_BILL
  function select_cus_bill_district(dist_id, dist_name_th, city_name_th, dist_name_en, city_name_en, country_name_th, country_name_en) {        
    $("#id_cus_bill_select_district_id").val(dist_id);    
    $("#id_cus_bill_cus_district_dist_th").val(dist_name_th);    
    $("#id_cus_bill_cus_city_th").val(city_name_th);    
    $("#id_cus_bill_cus_district_en").val(dist_name_en);
    $("#id_cus_bill_cus_city_en").val(city_name_en);
    $("#id_cus_bill_cus_country_th").val(country_name_th);
    $("#id_cus_bill_cus_country_en").val(country_name_en);
    $("#districtmodal").modal("hide");  
  }



  function customer_select_item(cus_id, cus_brn, cnt_name_th, cnt_name_en) {
    loadCustomer(cus_id, cus_brn);    
  };

  function loadCustomer(cus_id, cus_brn) {

    $("#id_cus_id").val(cus_id);
    $("#id_cus_brn").val(cus_brn);

    showLoading();
    enter_id_cus_id(cus_id, cus_brn);
    enter_id_cus_brn(cus_id, cus_brn);
    $("#search_customer_modal").modal("hide");    
    $.LoadingOverlay("hide");
  }


  function customer_search_modal() {

    page_no = 1;
    search_option = $('#id_search_option').val(); //1=cus_id, 2=cus_name_th, 3=cus_name_en
    search_text = $('#id_search_text').val();

    if(search_text=="") {
      $.alert({
          title: 'Error',
          type: 'red',
          content: "กรุณาป้อนข้อมูลที่ต้องการค้นหา",
          animation: 'zoom',
          animationBounce: 1.5,
          closeIcon: false,
          boxWidth: '38%',
          useBootstrap: false,
      });      
      return false;
    } else {
      //return false;
    }  

    $.ajax({
        url : "/customer/ajax/get_customer_list_modal",
        type: 'get',   
        dataType: 'json',
        data : {          
          page_no : page_no,
          search_option : search_option,          
          search_text : search_text,
        },
        success: function (data) {

          
          var result = ""
          var count = data.results.length;

          /*
          var cus_id = data.results[0]["cus_id"];
          var cus_brn = data.results[0]["cus_brn"];
          var cus_name_th = data.results[0]["cus_name_th"];
          var cus_name_en = data.results[0]["cus_name_en"];

          result += "<div class='row col-12' stye='padding:0;'>";

          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='search_customer_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='search_option' class='form-control form-control-sm' required id='id_search_option'>";
          result += "    <option value='1'>Customer Code</option>";
          result += "    <option value='2' selected>Customer Name (TH)</option>";
          result += "    <option value='3'>Customer Name (EN)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
          result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_search_text' name='search_text' autocomplete='off' value=''>";
          result += "  </div>";
          result += "<a href='javascript:customer_search_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
          result += "</form>";
          result += "</div>";

          
          result += "<div class='table-responsive' stye='padding:0;'>";
          
          //<table class='table table-responsive table-sm table-striped table-condensed table-wrapper-scroll-y my-custom-scrollbar' id="
          result += "<table class='table table-hover table-striped table-wrapper-scroll-y my-custom-scrollbar w-100'>";
          result += " <thead>";
          result += "   <tr class='text-left'>";
          result += "     <th scope='col' class='text-left' nowrap>{% trans 'Customer Code' %}</th>";
          result += "     <th scope='col' class='text-center' nowrap>{% trans 'Branch' %}</th>";
          result += "     <th scope='col' class='text-left'>{% trans 'Customer Name (TH)' %}</th>";
          result += "     <th scope='col' class='text-left'>{% trans 'Customer Name (EN)' %}</th>";
          result += "     <th scope='col'>&nbsp;</th>";
          result += "   </tr>";
          result += " </thead>";

          result += "<tbody style='font-size:13px;'>";
          result += "</div>";
          result += "<div>";

          for(var i=0; i<count; i++) {              
            var cus_id = data.results[i]["cus_id"];
            var cus_brn = data.results[i]["cus_brn"];
            var cus_name_th = data.results[i]["cus_name_th"];
            var cus_name_en = data.results[i]["cus_name_en"];

            result += "<tr>";
            result += "<td class='align-middle'>" + cus_id + "</td>";
            result += "<td class='align-middle text-center'>" + cus_brn + "</td>";
            result += "<td class='align-middle'>" + cus_name_th + "</td>";
            result += "<td class='align-middle'>" + cus_name_en + "</td>";
            result += "<td class='text-right'><a href='javascript:customer_select_item(" + cus_id + "," + cus_brn + ",\"" + cus_name_th + "\",\"" + cus_name_en + "\");' type='button' class='btn btn-outline-primary btn-sm'>&nbsp;&nbsp;Select&nbsp;&nbsp;</a></td>";
            result += "</tr>";          
          }
          result += " </tbody>";
          result += "</table>";            
          result += "</div>";

          $("#id_search_number_of_found_record").html("ค้นหา&nbsp;&nbsp;&nbsp;<span class='text-success'><b>" + search_text + "</b></span>&nbsp;&nbsp;&nbsp;พบทั้งหมด&nbsp;&nbsp;<b>" + count + "</b>&nbsp;&nbsp;รายการ");
          */

          result = render_service_list_table_html(data);
          $("#search_customer_modal .modal-body").html(result);

          $("#id_search_number_of_found_record").html("ค้นหา&nbsp;&nbsp;&nbsp;<span class='text-success'><b>" + search_text + "</b></span>&nbsp;&nbsp;&nbsp;พบทั้งหมด&nbsp;&nbsp;<b>" + count + "</b>&nbsp;&nbsp;รายการ");          
        },
        error: function(data){          
          result = "";
          result += "<div class='row col-12'>";
          result += "<div class='col-8 offset-3 pb-2'>";
          result += "<form id='cus_main_search_district_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
          result += "  <div class='form-group mx-sm-3 mb-2'>";
          result += "  <select name='search_option' class='form-control form-control-sm' required id='id_search_option'>";
          result += "    <option value='1'>Customer Code</option>";
          result += "    <option value='2' selected>Customer Name (TH)</option>";
          result += "    <option value='3'>Customer Name (EN)</option>";
          result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";          
          result += "    <label for='id_cus_main_search_district' class='sr-only'>Search</label>";            
          result += "    <input type='text' class='form-control form-control-sm' id='id_search_text' name='search_text' autocomplete='off' value=''>";          
          result += "  </div>";
          result += "<a href='javascript:customer_search_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";
          result += "</form>";
          result += "</div>";

          result += "<table class='table table-hover table-sm'>";
          result += " <thead>";
          result += "   <tr>";
          result += "     <td colspan='4' class='text-center'><br>ไม่พบรายการ &nbsp;&nbsp;<b>" + search_text + "</b><br><br></td>";
          result += "   </tr>";
          result += " </thead>";
          result += "</tbody>";
          result += "</table>";

          $("#id_search_number_of_found_record").html("");
          $("#search_customer_modal .modal-body").html(result);
        }          
    });
  }


  $(document).ready(function(){
    $('#cus_bill_contact_lookup').on('click', function (e) {
      var obj = $(this);
      current_contact_id = $('#id_cus_bill_cus_contact_id').val();
      id_cus_bill_select_bill_contact_id
      
      //alert(current_contact_id);

      $.ajax({
          url: obj.attr("data-url"), // url: get_contact_list
          type: 'get',          
          dataType: 'json',
          data : {          
            current_contact_id : current_contact_id,
          },          
          beforeSend: function () {
            $("#contact_modal").modal("show");
          },
          success: function (data) {
            var result = "";
            var count = data.results.length;
            var con_id = data.results[0]["con_id"];
            var con_fname_th = data.results[0]["con_fname_th"];

            result += "<div class='row col-12'>";
            result += "<div class='col-8 offset-3 pb-2'>";
            result += "<form id='cus_bill_search_contact_modal_form' class='form-inline col-12' accept-charset='UTF-8'>";
            result += "  <div class='form-group mx-sm-3 mb-2'>";
            result += "  <select name='cus_bill_contact_option' class='form-control form-control-sm' required id='id_cus_bill_cus_contact_option'>";
            result += "    <option value='1'>Contact ID</option>";
            result += "    <option value='2' selected>Name (TH)</option>";
            result += "    <option value='3'>Last Name (TH)</option>";
            result += "  </select>&nbsp;&nbsp;&nbsp;&nbsp;";
            result += "    <label for='id_cus_bill_search_contact' class='sr-only'>Search</label>";            
            result += "    <input type='text' class='form-control form-control-sm' id='id_cus_bill_cus_contact_search_text' name='cus_bill_cus_contact_search_text' placeholder=''>";
            result += "  </div>";
            result += "<a href='javascript:cus_bill_search_contact_modal()' type='button' class='btn btn-primary btn-sm mb-2'>Search</a>";            
            result += "</form>";
            result += "</div>";

            result += "<div class='row col-12'>";
            result += "<table class='table table-hover table-sm'>";
            result += " <thead>";
            result += "   <tr>";
            result += "     <th scope='col'>{% trans 'Contact ID' %}</th>";
            result += "     <th scope='col'>{% trans 'Name (TH)' %}</th>";
            result += "     <th scope='col'>{% trans 'Last Name (TH)' %}</th>";
            result += "     <th scope='col'>&nbsp;</th>";
            result += "   </tr>";
            result += " </thead>";
            result += "<tbody>";
            result += "</div>";
            result += "<div>";

            for(var i=0; i<count; i++) {              
              var con_id = data.results[i]["con_id"];
              var con_fname_th = data.results[i]["con_fname_th"];
              var con_lname_th = data.results[i]["con_lname_th"];

              result += "<tr>";
              result += "<td>" + con_id + "</td>";        
              result += "<td>" + con_fname_th + "</td>";
              result += "<td>" + con_lname_th + "</td>";
              result += "<td class='text-right'><a href='javascript:cus_bill_select_contact(" + con_id + ");' type='button' class='btn btn-outline-primary btn-sm'>Select</a></td>";
              result += "</tr>";
            }
            result += " </tbody>";
            result += "</table>";

            if(data.is_paginated) {
              result += "<div>";
              result += "  <span>";
              result += data.current_page_number + " / " + data.current_page_paginator_num_pages;
              result += " <a href='javascript:get_cus_bill_contact_lookup(" + data.next_page + ");'>" + "<i class='fas fa-arrow-circle-right'></i></a>";
              result += "    </span>";
              result += "</div>";
            }

            $("#contact_modal .modal-body").html(result);     
          },
          error: function(data){
            $("#contact_modal .modal-body").html("{% trans 'There is no data.' %}");
          }          
      });

    });
  });


</script>

{% endblock %}

