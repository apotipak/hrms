{% extends "page_report.html" %}

{% load i18n %}
{% block title %} {{ page_title}} - {% trans 'Report' %} {% endblock %}
{% load static %}
{% load widget_tweaks %}

{% block style %} 
<style>

.nav-tabs{
  background-color: #ccc;
  color: #5f5d5d;
  padding: 0 0 0 0;
  -webkit-border-radius: 2px 2px 0 0;
  -moz-border-radius: 2px 2px 0 0;
  border-radius: 5px 5px 0 0;
  padding: 0px !important;
  border-bottom: 5px solid #257638 !important;
}

.nav-tabs > li > a{
  border: none;
  -webkit-border-radius: 2px 2px 0 0;
  -moz-border-radius: 2px 2px 0 0;
  border-radius: 5px 5px 0 0;
  color: #5f5d5d;
}

.nav-tabs .nav-item .nav-link.active {
  background-color: #257638;
  color: #fff;
  font-weight: bold;
  border-color: #257638;
  -webkit-border-radius: 2px 2px 0 0;
  -moz-border-radius: 2px 2px 0 0;
  border-radius: 5px 5px 0 0;  
}

.nav-tabs>.active>a, .nav-tabs>.active>a:hover, .nav-tabs>.active>a:focus {
  background-color: #257638;
  border-color: #257638;
  border-bottom-color: transparent;
  -webkit-border-radius: 2px 2px 0 0;
  -moz-border-radius: 2px 2px 0 0;
  border-radius: 5px 5px 0 0;  
}

label {
    display: inline-block;
    margin-bottom: 0rem;
}

thead th { white-space: nowrap; }

</style>
{% endblock %}

{% block content %}

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper pt-2" style="padding:0 0 0 0; background-color: #353538;">
  
    <!-- Main content -->
    <section class="content">


      <div class="card-header text-light" style="padding: 0 2px 10px 0;">
        <h5 class="card-title"><i class="far fa-list-alt"></i>&nbsp;<b>PSN Slip for D1</b>&nbsp;&nbsp;<small>สลิปค่าแรง D1</small></h5>
       
        <div class="float-right pb-1">
          <div class="d-flex flex-row-reverse">
            <button class="btn btn-outline-info btn-sm" onclick="print_document()">&nbsp;<i class="fas fa-print"></i>&nbsp;&nbsp;Print</button>
          </div>
        </div>
      </div>





      <div class="col-12 p-0 pt-2">

        <form method="post" autocomplete="off" name="search_form">
          {% csrf_token %}
          
          <div class="card-body p-0">
            <div class="form-group">

              <div class="input-group col-12 p-0">

               
                <div class="input-group-prepend"><span class="input-group-text border-bottom-0 rounded-0" style="background-color: #d2d4d6; width:95px;"><b>Emp Type</b></span></div>                
                <select id="id_employee_type_option" name="employee_type_option" class="form-control form-control-md" style="border-radius: 0; width: 100px;" disabled="">
                  {% for item in employee_type_list %}
                  <option value="{{item.0}}">{{item.0}} | {{ item.1 }}</option>
                  {% endfor %}
                </select>

                <div class="input-group-prepend"><span class="input-group-text border-bottom-0 rounded-0" style="background-color: #d2d4d6; width:70px;"><b>Period</b></span></div>
                <select id="id_period_option" name="period_option" class="form-control form-control-md" style="border-radius: 0; width: 100px;">
                	<option value="">---------</option>
                  	{% for item in period_list %}
                  	<option value="{{item.0}}"><b>{{item.0}} | {{item.1}}/{{item.2}} || Period: {{item.6|date:"j"}} - {{item.7|date:"j"}} Paid : {{item.8|date:"j"}}</option>
                  	{% endfor %}
                </select>

                <div class="input-group-prepend"><span class="input-group-text border-bottom-0 rounded-0" style="background-color: #d2d4d6; width:75px;"><b>Emp ID</b></span></div>
				<input type="number" min=3 maxlength=6 id="id_emp_id" name="emp_id" class="form-control" style="width:50px;" required="" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" value="">

                &nbsp;&nbsp;
                <!--<button id="searchPSNSlipD1Button" name="searchPSNSlipD1Button" type="button" class="btn btn-sm btn-info pull-right"><i class="fas fa-search fa-sm"></i>&nbsp;&nbsp;Search&nbsp;&nbsp;</button>-->
                <button id="cancelPSNSlipD1Button" name="cancelPSNSlipD1Button" type="button" class="btn btn-sm btn-warning pull-right">&nbsp;Cancel&nbsp;</button>
              </div>

            </div>
          </div>

        </form>        

      </div>
      <!-- /.col -->



    <!-- ./row -->
    <div class="row">
      <div class="col-12">
        <div class="card card-tabs">

          <div class="card-body text-dark" style="padding:5px !important; border-top: 5px solid #257638; border-right: 5px solid #257638; border-color: #257638; border-left: 5px solid #257638; border-bottom: 5px solid #257638; background-color: #e9ecef;">
            <div class="tab-content" id="custom-tabs-one-tabContent">                  
				<div class="tab-pane fade show active" id="custom-tabs-one-home" role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">
					<div class="col-10 float-left" style="padding: 0 5px 0 0 !important;">
						&nbsp;
					</div>
				</div>
			</div>
		  </div>
					


		  <!--
          <div style="padding:0px 0px 0px 0px !important; margin:0 0 0 0px !important;">

            <ul class="nav nav-tabs navbar-expand nav-fill" id="custom-tabs-one-tab" role="tablist" style="padding:0 !important; margin: 0 0 0 0 !important;">
              
              <li class="nav-item" style="padding:0 !important; margin:0 0 0 0px !important; font-size: 20px;">
                <a class="nav-link active" id="custom-tabs-one-home-tab" data-toggle="pill" href="#custom-tabs-one-home" role="tab" aria-controls="custom-tabs-one-home" aria-selected="true">Attendance Information</a>
              </li>


              <li class="nav-item" style="padding:0 0 0 0px !important; font-size: 20px;">
                

                <a class="nav-link" id="tab2-tab" data-toggle="pill" href="#custom-tabs-one-profile" role="tab" aria-controls="custom-tabs-one-profile" aria-selected="false">
                	Schedule Information
                </a>
                
              </li>
            </ul>

          </div>


          <div class="card-body text-dark" style="padding:5px !important; border-right: 5px solid #257638; border-color: #257638; border-left: 5px solid #257638; border-bottom: 5px solid #257638; background-color: #e9ecef;">
            <div class="tab-content" id="custom-tabs-one-tabContent">                  
				<div class="tab-pane fade show active" id="custom-tabs-one-home" role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">
					<div class="col-10 float-left" style="padding: 0 5px 0 0 !important;">
						&nbsp;
					</div>
				</div>
			</div>
		  </div>				
		  -->


        </div>
      </div>
    </div>









    </section>
    <!-- /.content -->
  </div>

{% endblock %}


{% block javascript %}
<script>

$(document).ready( function () {
	//
});

function showLoading() {
	$.LoadingOverlaySetup({
	    background      : "rgba(0, 0, 0, 0.5)",
	    image           : "/static/img/logo-small.png",        
	    imageAnimation  : "1.5s fadein",
	    imageColor      : "#ffcc00"
	});
	$.LoadingOverlay("show"); 
}


// ID_EMP_ID
$(document).on('keypress', '#id_emp_id', function(e) {
	if(e.which == 13) {              
    	e.preventDefault();

		emp_type = $("#id_employee_type_option").val();
		period_option = $("#id_period_option").val();
		emp_id = $("#id_emp_id").val();

    	if (emp_type=="") {
			$.alert({
			    title: 'Error',
			    type: 'red',
			    content: "กรุณาเลือกประเภทพนักงาน (Employee Type)",
			    animation: 'zoom',
			    animationBounce: 1.5,
			    closeIcon: false,
			    boxWidth: '38%',
			    useBootstrap: false,
			});
			return false;
    	}

    	if (period_option=="") {
			$.alert({
			    title: 'Error',
			    type: 'red',
			    content: "กรุณาเลือกงวด (Period)",
			    animation: 'zoom',
			    animationBounce: 1.5,
			    closeIcon: false,
			    boxWidth: '38%',
			    useBootstrap: false,
			});
			return false;
    	}


    	if (emp_id=="") {
			$.alert({
			    title: 'Error',
			    type: 'red',
			    content: "กรุณาเลือกรหัสพนักงาน (Employee ID)",
			    animation: 'zoom',
			    animationBounce: 1.5,
			    closeIcon: false,
			    boxWidth: '38%',
			    useBootstrap: false,
			});
			return false;
    	}

    	
    	//alert("TODO");
    } 
});

$("#searchPSNSlipD1Button").click( function() {
	event.preventDefault();

	emp_type = $("#id_employee_type_option").val();
	period_option = $("#id_period_option").val();

	alert(emp_type + " | " + period_option);
});

$(document).ready(function () {  
	//$('#id_work_date').datepicker({format: 'dd/mm/yyyy', altField: '#thealtdate', altFormat: 'dd/mm/yyyy', autoclose: true, todayHighlight: true}).datepicker("setDate", new Date());
});


function print_document() {
	alert("TODO");
	return false;

	/*
	var work_date = $("#id_work_date").val();
	var dept_zone = $("#id_dept_zone_option").val();

	var href = "/reports/cms/ajax-gpm-422-no-of-guard-operation-by-empl-by-zone/" + work_date + "/" + dept_zone + "/";
	window.open(href,'_blank');
	*/
}
   
</script>
{% endblock %}  